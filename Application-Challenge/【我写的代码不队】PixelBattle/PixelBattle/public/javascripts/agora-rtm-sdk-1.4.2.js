/*
 @preserve
 AgoraRTM Web SDK 1.4.2 - commit: v1.4.2-0-gcddbca54
 Copyright (C) 2018-2021 Agora Lab.
 This file is licensed under the AGORA, INC. SDK LICENSE AGREEMENT
 A copy of this license may be found at https://www.agora.io/en/sdk-license-agreement/
*/
"use strict";!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).AgoraRTM=t()}(this,(function(){function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pd(e,t,n,r,i,o,s){try{var a=e[o](s),u=a.value}catch(e){return void n(e)}a.done?t(u):Promise.resolve(u).then(r,i)}function K(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){function o(e){Pd(a,r,i,o,s,"next",e)}function s(e){Pd(a,r,i,o,s,"throw",e)}var a=e.apply(t,n);o(void 0)}))}}function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function al(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ea(e,t,n){return t&&al(e.prototype,t),n&&al(e,n),e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ja(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bl(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ka(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}function kd(e){return(kd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cl(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function Ch(e,t,n){return(Ch=cl()?Reflect.construct:function(e,t,n){var r=[null];return r.push.apply(r,t),e=new(Function.bind.apply(e,r)),n&&Qe(e,n.prototype),e}).apply(null,arguments)}function Re(e){var t="function"==typeof Map?new Map:void 0;return(Re=function(e){function n(){return Ch(e,arguments,kd(this).constructor)}if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Qe(n,e)})(e)}function Se(e,t){if(null==e)return{};if(null==e)var n={};else{n={};var r,i=Object.keys(e);for(r=0;r<i.length;r++){var o=i[r];0<=t.indexOf(o)||(n[o]=e[o])}}if(Object.getOwnPropertySymbols)for(r=Object.getOwnPropertySymbols(e),o=0;o<r.length;o++)i=r[o],0<=t.indexOf(i)||Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i]);return n}function n(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function la(e){var t=cl();return function(){var r=kd(e);if(t){var i=kd(this).constructor;r=Reflect.construct(r,arguments,i)}else r=r.apply(this,arguments);return r=!r||"object"!=typeof r&&"function"!=typeof r?n(this):r}}function Dh(e,t,n){return(Dh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kd(e)););if(e)return(t=Object.getOwnPropertyDescriptor(e,t)).get?t.get.call(n):t.value})(e,t,n||e)}function pa(e,t){var n=Array.isArray(e)?e:void 0;if(!n)if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){n=[];var r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}}else n=void 0;if(!(e=n||dl(e,t)))throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return e}function I(e){var t=Array.isArray(e)?Eh(e):void 0;if(t||(t="undefined"!=typeof Symbol&&Symbol.iterator in Object(e)?Array.from(e):void 0),!(e=t||dl(e)))throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");return e}function dl(e,t){if(e){if("string"==typeof e)return Eh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if("Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Eh(e,t)}}function Eh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function da(e,t,n,r,i){var o={};return Object.keys(r).forEach((function(e){o[e]=r[e]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(e,t,o),o=null),o}function Xa(e){var t={exports:{}};return e(t,t.exports),t.exports}function el(e,t){var n,r=3>arguments.length?e:arguments[2];return qa(e)===r?e[t]:(n=Db.f(e,t))?P(n,"value")?n.value:void 0===n.get?void 0:n.get.call(r):ea(n=Rb(e))?el(n,t,r):void 0}function Nr(e){var t=e.charCodeAt(0)<<24,n=0|Or(~t),r=0,i=0|e.length,o="";if(5>n&&i>=n){for(t=t<<n>>>24+n,r=1;r<n;r=r+1|0)t=t<<6|63&e.charCodeAt(r);65535>=t?o+=ld(t):1114111>=t?o+=ld(55296+((t=t-65536|0)>>10)|0,56320+(1023&t)|0):r=0}for(;r<i;r=r+1|0)o+="ï¿½";return o}function fl(){}function Pr(e){var t=0|e.charCodeAt(0);if(55296<=t&&56319>=t){var n=0|e.charCodeAt(1);if(!(n==n&&56320<=n&&57343>=n))return ld(239,191,189);if(65535<(t=(t-55296<<10)+n-56320+65536|0))return ld(240|t>>>18,128|t>>>12&63,128|t>>>6&63,128|63&t)}return 127>=t?e:2047>=t?ld(192|t>>>6,128|63&t):ld(224|t>>>12,128|t>>>6&63,128|63&t)}function gl(){}function aa(){aa.init.call(this)}function Zf(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+R(e))}function hl(e,t,n,r){Zf(n);var i=e._events;if(void 0===i)i=e._events=Object.create(null),e._eventsCount=0;else{void 0!==i.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),i=e._events);var o=i[t]}return void 0===o?(i[t]=n,++e._eventsCount):("function"==typeof o?o=i[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),0<(n=void 0===e._maxListeners?aa.defaultMaxListeners:e._maxListeners)&&o.length>n&&!o.warned&&(o.warned=!0,(n=Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",n.emitter=e,n.type=t,n.count=o.length,console&&console.warn&&console.warn(n))),e}function Qr(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function il(e,t,n){return e={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},(t=Qr.bind(e)).listener=n,e.wrapFn=t}function jl(e,t,n){if(void 0===(e=e._events))return[];if(void 0===(t=e[t]))return[];if("function"==typeof t)return n?[t.listener||t]:[t];if(n)for(n=Array(t.length),e=0;e<n.length;++e)n[e]=t[e].listener||t[e];else n=kl(t,t.length);return n}function ll(e){var t=this._events;if(void 0!==t){if("function"==typeof(e=t[e]))return 1;if(void 0!==e)return e.length}return 0}function kl(e,t){for(var n=Array(t),r=0;r<t;++r)n[r]=e[r];return n}function Rr(e){return e?I(e):Sr((function(){return[]}),(function(e,t){return e.push(t),e}))}function ml(e,t){var n,r,i,o;return w.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:n=nl(e)([Fh,Fh,function(e,t){return t}])[2],r=0;case 2:if(!(r<t.length)){s.next=17;break}if(i=t[r],!((o=n(Gh,i))instanceof $f)){s.next=11;break}if((o=Hh(o.deref()))===Gh){s.next=10;break}return s.next=10,o;case 10:return s.abrupt("return");case 11:if(o===Gh){s.next=14;break}return s.next=14,o;case 14:r++,s.next=2;break;case 17:case"end":return s.stop()}}),Tr)}function ag(e,t){return null!=t&&"function"==typeof t[Symbol.iterator]?ml(ag(e),t):function(t){var n=t[2];return Ur(t,(function(t,r){return n(t,e(r))}))}}function md(e){return"Object"===Object.prototype.toString.call(e).slice(8,-1)&&(e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype)}function nd(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Qd(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Rd(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Te(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new bg;++t<n;)this.add(e[t])}function Sd(e){this.size=(this.__data__=new cg(e)).size}function dg(e,t,n,r,i,o){var s,a=1&t,u=2&t,c=4&t;if(n&&(s=i?n(e,r,i,o):n(e)),void 0!==s)return s;if(!jb(e))return e;if(r=Ya(e)){if(s=Vr(e),!a)return Ih(e,s)}else{var l=Ue(e),f="[object Function]"==l||"[object GeneratorFunction]"==l;if(Ve(e))return ol(e,a);if("[object Object]"==l||"[object Arguments]"==l||f&&!i){if(s=u||f?{}:pl(e),!a)return u?Wr(e,Xr(s,e)):Yr(e,Zr(s,e))}else{if(!ra[l])return i?e:{};s=$r(e,l,a)}}if(o||(o=new Td),i=o.get(e))return i;o.set(e,s),as(e)?e.forEach((function(r){s.add(dg(r,t,n,r,e,o))})):bs(e)&&e.forEach((function(r,i){s.set(i,dg(r,t,n,i,e,o))})),u=c?u?ql:Jh:u?We:Rc;var h=r?void 0:u(e);return cs(h||e,(function(r,i){h&&(r=e[i=r]),rl(s,i,dg(r,t,n,i,e,o))})),s}function Kh(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;return o.has(i)?o.get(i):(r=e.apply(this,r),n.cache=o.set(i,r)||o,r)};return n.cache=new(Kh.Cache||bg),n}function sl(e){if("string"==typeof e)return e;if(Ya(e))return Ud(e,sl)+"";if(Vd(e))return tl?tl.call(e):"";var t=e+"";return"0"==t&&1/e==-ds?"-0":t}function Lh(e,t,n,r,i){var o=-1,s=e.length;for(n||(n=es),i||(i=[]);++o<s;){var a=e[o];0<t&&n(a)?1<t?Lh(a,t-1,n,r,i):Mh(i,a):r||(i[i.length]=a)}return i}function Wd(e,t,n,r,i){if(e===t)t=!0;else if(null==e||null==t||!cc(e)&&!cc(t))t=e!=e&&t!=t;else e:{var o=Ya(e),s=Ya(t),a=o?"[object Array]":Ue(e),u=s?"[object Array]":Ue(t),c="[object Object]"==(a="[object Arguments]"==a?"[object Object]":a);if(s="[object Object]"==(u="[object Arguments]"==u?"[object Object]":u),(u=a==u)&&Ve(e)){if(!Ve(t)){t=!1;break e}o=!0,c=!1}if(u&&!c)i||(i=new Td),t=o||Nh(e)?ul(e,t,n,r,Wd,i):fs(e,t,a,n,r,Wd,i);else{if(!(1&n)&&(o=c&&vl.call(e,"__wrapped__"),a=s&&vl.call(t,"__wrapped__"),o||a)){e=o?e.value():e,t=a?t.value():t,i||(i=new Td),t=Wd(e,t,n,r,i);break e}if(u)t:if(i||(i=new Td),o=1&n,a=Jh(e),s=a.length,u=Jh(t).length,s==u||o){for(u=s;u--;){var l=a[u];if(!(o?l in t:gs.call(t,l))){t=!1;break t}}if(c=i.get(e),l=i.get(t),c&&l)t=c==t&&l==e;else{c=!0,i.set(e,t),i.set(t,e);for(var f=o;++u<s;){var h=e[l=a[u]],p=t[l];if(r)var d=o?r(p,h,l,t,e,i):r(h,p,l,e,t,i);if(void 0===d?h!==p&&!Wd(h,p,n,r,i):!d){c=!1;break}f||(f="constructor"==l)}c&&!f&&((n=e.constructor)!=(r=t.constructor)&&"constructor"in e&&"constructor"in t&&!("function"==typeof n&&n instanceof n&&"function"==typeof r&&r instanceof r)&&(c=!1)),i.delete(e),i.delete(t),t=c}}else t=!1;else t=!1}}return t}function sa(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function kb(e){return!0===(e&&e.__isLong__)}function od(e,t){var n;if(t){if((t=0<=(e>>>=0)&&256>e)&&(n=wl[e]))return n;n=ta(e,0>(0|e)?-1:0,!0),t&&(wl[e]=n)}else{if((t=-128<=(e|=0)&&128>e)&&(n=xl[e]))return n;n=ta(e,0>e?-1:0,!1),t&&(xl[e]=n)}return n}function Eb(e,t){if(isNaN(e))return t?pd:Fb;if(t){if(0>e)return pd;if(e>=yl)return zl}else{if(e<=-Al)return lb;if(e+1>=Al)return Bl}return 0>e?Eb(-e,t).neg():ta(e%Xd|0,e/Xd|0,t)}function ta(e,t,n){return new sa(e,t,n)}function Oh(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return Fb;if("number"==typeof t?(n=t,t=!1):t=!!t,2>(n=n||10)||36<n)throw RangeError("radix");var r;if(0<(r=e.indexOf("-")))throw Error("interior hyphen");if(0===r)return Oh(e.substring(1),t,n).neg();r=Eb(eg(n,8));for(var i=Fb,o=0;o<e.length;o+=8){var s=Math.min(8,e.length-o),a=parseInt(e.substring(o,o+s),n);8>s?(s=Eb(eg(n,s)),i=i.mul(s).add(Eb(a))):i=(i=i.mul(r)).add(Eb(a))}return i.unsigned=t,i}function Sb(e,t){return"number"==typeof e?Eb(e,t):"string"==typeof e?Oh(e,t):ta(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}function M(e,t){function n(){this.constructor=e}Ph(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Yd(e){return"function"==typeof e}function Zd(e){setTimeout((function(){throw e}),0)}function Qh(e){return null!==e&&"object"===R(e)}function Cl(e){return e.reduce((function(e,t){return e.concat(t instanceof Xe?t.errors:t)}),[])}function Rh(e){for(;e;){var t=e.destination,n=e.isStopped;if(e.closed||n)return!1;e=t&&t instanceof fa?t:null}return!0}function Sc(e){return e}function Sh(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Dl(e)}function Dl(e){return 0===e.length?Sc:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}function El(e){if(e||(e=Gb.Promise||Promise),!e)throw Error("no Promise impl found");return e}function Fl(){return function(e){return e.lift(new hs(e))}}function Ye(e){return e?is(e):dc}function is(e){return new V((function(t){return e.schedule((function(){return t.complete()}))}))}function Tc(e){return e&&"function"==typeof e.schedule}function Th(e,t){return new V((function(n){var r=new Ka,i=0;return r.add(t.schedule((function(){i===e.length?n.complete():(n.next(e[i++]),n.closed||r.add(this.schedule()))}))),r}))}function Ze(e,t){return t?Th(e,t):new V(Gl(e))}function mb(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Tc(t=e[e.length-1])?(e.pop(),Th(e,t)):Ze(e)}function ba(e,t){return new V(t?function(n){return t.schedule(js,0,{error:e,subscriber:n})}:function(t){return t.error(e)})}function js(e){e.subscriber.error(e.error)}function ks(e,t){return void 0===t&&(t=0),function(n){return n.lift(new ls(e,t))}}function Hl(e){return e in Uh&&(delete Uh[e],!0)}function ec(){}function Z(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new ms(e,t))}}function Il(e,t,n){if(t){if(!Tc(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return Il(e,n).apply(void 0,r).pipe(Z((function(e){return Hb(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i,o=this,s={context:o,subject:i,callbackFunc:e,scheduler:n};return new V((function(r){if(n)return n.schedule(ns,0,{args:t,subscriber:r,params:s});if(!i){i=new $e;try{e.apply(o,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.next(1>=e.length?e[0]:e),i.complete()}]))}catch(e){Rh(i)?i.error(e):console.warn(e)}}return i.subscribe(r)}))}}function ns(e){var t=this,n=e.args,r=e.subscriber,i=e.params;e=i.callbackFunc;var o=i.context,s=i.scheduler,a=i.subject;if(!a){a=i.subject=new $e,i=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.add(s.schedule(os,0,{value:1>=e.length?e[0]:e,subject:a}))};try{e.apply(o,n.concat([i]))}catch(e){a.error(e)}}this.add(a.subscribe(r))}function os(e){var t=e.subject;t.next(e.value),t.complete()}function Jl(e,t,n){if(t){if(!Tc(t))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return Jl(e,n).apply(void 0,r).pipe(Z((function(e){return Hb(e)?t.apply(void 0,e):t(e)})))};n=t}return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var i={subject:void 0,args:t,callbackFunc:e,scheduler:n,context:this};return new V((function(r){var o=i.context,s=i.subject;if(n)return n.schedule(ps,0,{params:i,subscriber:r,context:o});if(!s){s=i.subject=new $e;try{e.apply(o,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];(t=e.shift())?s.error(t):(s.next(1>=e.length?e[0]:e),s.complete())}]))}catch(e){Rh(s)?s.error(e):console.warn(e)}}return s.subscribe(r)}))}}function ps(e){var t=this,n=e.params,r=e.subscriber;e=e.context;var i=n.callbackFunc,o=n.args,s=n.scheduler,a=n.subject;if(!a){a=n.subject=new $e,n=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];(n=e.shift())?t.add(s.schedule(Kl,0,{err:n,subject:a})):t.add(s.schedule(qs,0,{value:1>=e.length?e[0]:e,subject:a}))};try{i.apply(e,o.concat([n]))}catch(e){this.add(s.schedule(Kl,0,{err:e,subject:a}))}}this.add(a.subscribe(r))}function qs(e){var t=e.subject;t.next(e.value),t.complete()}function Kl(e){e.subject.error(e.err)}function Ll(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}function Vh(e,t,n,r,i){if(void 0===i&&(i=new rs(e,n,r)),!i.closed)return t instanceof V?t.subscribe(i):af(t)(i)}function ss(e,t){return new V((function(n){var r=new Ka;return r.add(t.schedule((function(){var i=e[$d]();r.add(i.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}function ts(e,t){return new V((function(n){var r=new Ka;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}function us(e,t){if(!e)throw Error("Iterable cannot be null");return new V((function(n){var r,i=new Ka;return i.add((function(){r&&"function"==typeof r.return&&r.return()})),i.add(t.schedule((function(){r=e[Uc](),i.add(t.schedule((function(){if(!n.closed){try{var e=r.next(),t=e.value,i=e.done}catch(e){return void n.error(e)}i?n.complete():(n.next(t),this.schedule())}})))}))),i}))}function Ml(e,t){if(null!=e){if(e&&"function"==typeof e[$d])return ss(e,t);if(Ll(e))return ts(e,t);if(Nl(e))return Th(e,t);if(e&&"function"==typeof e[Uc]||"string"==typeof e)return us(e,t)}throw new TypeError((null!==e&&R(e)||e)+" is not observable")}function Ib(e,t){return t?Ml(e,t):e instanceof V?e:new V(af(e))}function fc(e,t){if(!t.closed)return e instanceof V?e.subscribe(t):af(e)(t)}function eb(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?function(r){return r.pipe(eb((function(n,r){return Ib(e(n,r)).pipe(Z((function(e,i){return t(n,e,r,i)})))}),n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new vs(e,n))})}function Wh(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),eb(Sc,e)}function Ol(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Wh(1)(mb.apply(void 0,e))}function qd(e){return new V((function(t){try{var n=e()}catch(e){return void t.error(e)}return(n?Ib(n):Ye()).subscribe(t)}))}function Pl(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var n=e[0];if(Hb(n))return fg(n,null);if(Qh(n)&&Object.getPrototypeOf(n)===Object.prototype)return fg((e=Object.keys(n)).map((function(e){return n[e]})),e)}if("function"==typeof e[e.length-1]){var r=e.pop();return fg(e=1===e.length&&Hb(e[0])?e[0]:e,null).pipe(Z((function(e){return r.apply(void 0,e)})))}return fg(e,null)}function fg(e,t){return new V((function(n){var r=e.length;if(0===r)n.complete();else for(var i=Array(r),o=0,s=0,a=function(a){var u=Ib(e[a]),c=!1;n.add(u.subscribe({next:function(e){c||(c=!0,s++),i[a]=e},error:function(e){return n.error(e)},complete:function(){++o!==r&&c||(s===r&&n.next(t?t.reduce((function(e,t,n){return e[t]=i[n],e}),{}):i),n.complete())}}))},u=0;u<r;u++)a(u)}))}function fb(e,t,n,r){return Yd(n)&&(r=n,n=void 0),r?fb(e,t,n).pipe(Z((function(e){return Hb(e)?r.apply(void 0,e):r(e)}))):new V((function(r){Ql(e,t,(function(e){1<arguments.length?r.next(Array.prototype.slice.call(arguments)):r.next(e)}),r,n)}))}function Ql(e,t,n,r,i){if(e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener){e.addEventListener(t,n,i);var o=function(){return e.removeEventListener(t,n,i)}}else if(e&&"function"==typeof e.on&&"function"==typeof e.off)e.on(t,n),o=function(){return e.off(t,n)};else if(e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener)e.addListener(t,n),o=function(){return e.removeListener(t,n)};else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var s=0,a=e.length;s<a;s++)Ql(e[s],t,n,r,i)}r.add(o)}function Rl(e,t,n){return n?Rl(e,t).pipe(Z((function(e){return Hb(e)?n.apply(void 0,e):n(e)}))):new V((function(n){var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.next(1===e.length?e[0]:e)};try{var i=e(r)}catch(e){return void n.error(e)}if(Yd(t))return function(){return t(r,i)}}))}function ws(e){var t=e.subscriber,n=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(e){return void t.error(e)}else e.needIterate=!0;if(n){var r=void 0;try{r=n(e.state)}catch(e){return void t.error(e)}if(!r)return void t.complete();if(t.closed)return}try{var i=e.resultSelector(e.state)}catch(e){return void t.error(e)}if(!t.closed&&(t.next(i),!t.closed))return this.schedule(e)}}function Xh(e){return!Hb(e)&&0<=e-parseFloat(e)+1}function Sl(e,t){return void 0===e&&(e=0),void 0===t&&(t=Vc),(!Xh(e)||0>e)&&(e=0),t&&"function"==typeof t.schedule||(t=Vc),new V((function(n){return n.add(t.schedule(xs,e,{subscriber:n,counter:0,period:e})),n}))}function xs(e){var t=e.subscriber,n=e.counter;e=e.period,t.next(n),this.schedule({subscriber:t,counter:n+1,period:e},e)}function Tb(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];t=Number.POSITIVE_INFINITY;var n=null,r=e[e.length-1];return Tc(r)?(n=e.pop(),1<e.length&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof r&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof V?e[0]:Wh(t)(Ze(e,n))}function Yh(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return dc;var n=e[0],r=e.slice(1);return 1===e.length&&Hb(n)?Yh.apply(void 0,n):new V((function(e){var t=function(){return e.add(Yh.apply(void 0,r).subscribe(e))};return Ib(n).subscribe({next:function(t){e.next(t)},error:t,complete:t})}))}function ys(e){var t=e.keys,n=e.index,r=e.subscriber,i=e.subscription;if(e=e.obj,!r.closed)if(n<t.length){var o=t[n];r.next([o,e[o]]),i.add(this.schedule({keys:t,index:n+1,subscriber:r,subscription:i,obj:e}))}else r.complete()}function zs(e,t){function n(){return!n.pred.apply(n.thisArg,arguments)}return n.pred=e,n.thisArg=t,n}function nb(e,t){return function(n){return n.lift(new As(e,t))}}function ya(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!Hb(e[0]))return e[0];e=e[0]}return Ze(e,void 0).lift(new Bs)}function Cs(e){var t=e.start,n=e.index,r=e.subscriber;n>=e.count?r.complete():(r.next(t),r.closed||(e.index=n+1,e.start=t+1,this.schedule(e)))}function uc(e,t,n){void 0===e&&(e=0);var r=-1;return Xh(t)?r=1>Number(t)?1:Number(t):Tc(t)&&(n=t),Tc(n)||(n=Vc),new V((function(t){var i=Xh(e)?e:+e-n.now();return n.schedule(Ds,i,{index:0,period:r,subscriber:t})}))}function Ds(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}function Zh(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"function"==typeof(t=e[e.length-1])&&e.pop(),Ze(e,void 0).lift(new Es(t))}function Ga(e){return function(t){var n=new Fs(e);return t=t.lift(n),n.caught=t}}function $h(e,t){return eb(e,t,1)}function Tl(e){return void 0===e&&(e=null),function(t){return t.lift(new Gs(e))}}function Wc(e,t){void 0===t&&(t=Vc);var n=e instanceof Date&&!isNaN(+e)?+e-t.now():Math.abs(e);return function(e){return e.lift(new Hs(n,t))}}function Ul(e,t){return function(n){return n.lift(new Is(e,t))}}function rd(e){return void 0===e&&(e=Js),function(t){return t.lift(new Ks(e))}}function Js(){return new gg}function Pa(e){return function(t){return 0===e?Ye():t.lift(new Ls(e))}}function Vl(e,t){return t?function(n){return n.pipe(Vl((function(n,r){return Ib(e(n,r)).pipe(Z((function(e,i){return t(n,e,r,i)})))})))}:function(t){return t.lift(new Ms(e))}}function hg(e){return function(t){return t.lift(new Ns(e))}}function X(e,t){var n=2<=arguments.length;return function(r){return r.pipe(e?nb((function(t,n){return e(t,n,r)})):Sc,Pa(1),n?Tl(t):rd((function(){return new gg})))}}function Os(){return function(e){return e.lift(new Ps)}}function Wl(e){return function(t){return 0===e?Ye():t.lift(new Qs(e))}}function bf(e){return function(t){return t.lift(new Rs(e))}}function ig(e,t){var n=!1;return 2<=arguments.length&&(n=!0),function(r){return r.lift(new Ss(e,t,n))}}function Xl(e,t){return 2<=arguments.length?function(n){return Sh(ig(e,t),Wl(1),Tl(t))(n)}:function(t){return Sh(ig((function(t,n,r){return e(t,n,r+1)})),Wl(1))(t)}}function Ts(e,t){return function(n){var r="function"==typeof e?e:function(){return e};if("function"==typeof t)return n.lift(new Us(r,t));var i=Object.create(n,Vs);return i.source=n,i.subjectFactory=r,i}}function ae(e){return function(t){return t.lift(new Ws(e,t))}}function Xs(){return new La}function be(){return function(e){return Fl()(Ts(Xs)(e))}}function Yl(e,t,n){var r=e&&"object"===R(e)?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n};return function(e){return e.lift(Ys(r))}}function Ys(e){var t,n,r=e.bufferSize,i=void 0===r?Number.POSITIVE_INFINITY:r,o=void 0===(r=e.windowTime)?Number.POSITIVE_INFINITY:r,s=e.refCount,a=e.scheduler,u=0,c=!1,l=!1;return function(e){if(u++,!t||c){c=!1;var r=(t=new ce(i,o,a)).subscribe(this);n=e.subscribe({next:function(e){t.next(e)},error:function(e){c=!0,t.error(e)},complete:function(){l=!0,n=void 0,t.complete()}})}else r=t.subscribe(this);this.add((function(){u--,r.unsubscribe(),n&&!l&&s&&0===u&&(n.unsubscribe(),t=n=void 0)}))}}function vc(e,t){return"function"==typeof t?function(n){return n.pipe(vc((function(n,r){return Ib(e(n,r)).pipe(Z((function(e,i){return t(n,e,r,i)})))})))}:function(t){return t.lift(new Zs(e))}}function ob(e){return function(t){return t.lift(new $s(e))}}function at(e,t){return void 0===t&&(t=!1),function(n){return n.lift(new bt(e,t))}}function Y(e,t,n){return function(r){return r.lift(new ct(e,t,n))}}function dt(e,t,n){return void 0===t&&(t=Vc),void 0===n&&(n=et),function(r){return r.lift(new ft(e,t,n.leading,n.trailing))}}function gt(e){e.subscriber.clearThrottle()}function ht(e,t,n){return void 0===n&&(n=Vc),function(r){var i=e instanceof Date&&!isNaN(+e),o=i?+e-n.now():Math.abs(e);return r.lift(new it(o,i,t,n))}}function Za(e,t){return void 0===t&&(t=Vc),ht(e,ba(new pb),t)}function jt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){var n;return"function"==typeof e[e.length-1]&&(n=e.pop()),t.lift(new kt(e,n))}}function Zl(e,t,n,r,i){e!==t&&$l(t,(function(o,s){if(i||(i=new Td),jb(o)){o=i;var a=ai(e,s),u=ai(t,s),c=o.get(u);if(c)bi(e,s,c);else{var l=void 0===(c=r?r(a,u,s+"",e,t,o):void 0);if(l){var f=Ya(u),h=!f&&Ve(u),p=!f&&!h&&Nh(u);c=u,f||h||p?Ya(a)?c=a:cc(a)&&sd(a)?c=Ih(a):h?(l=!1,c=ol(u,!0)):p?(l=!1,c=am(u,!0)):c=[]:bm(u)||cf(u)?(c=a,cf(a)?c=de(a,We(a)):jb(a)&&!ci(a)||(c=pl(u))):l=!1}l&&(o.set(u,c),Zl(c,u,n,r,o),o.delete(u)),bi(e,s,c)}}else void 0===(a=r?r(ai(e,s),o,s+"",e,t,i):void 0)&&(a=o),bi(e,s,a)}),We)}function lt(e){var t=1,n=di;1==(1>=arguments.length?0:arguments.length-1)?"number"==typeof(1>=arguments.length?void 0:arguments[1])?t=1>=arguments.length?void 0:arguments[1]:n=1>=arguments.length?void 0:arguments[1]:2==(1>=arguments.length?0:arguments.length-1)&&(t=1>=arguments.length?void 0:arguments[1],n=2>=arguments.length?void 0:arguments[2]);var r=t||1;return function(t){return t.pipe(ig((function(t,i){var o=n.now(),s=o-e;if((t=t.filter((function(e){return e.until>s}))).length>=r){var a=t[t.length-1],u=t[0].until+e*Math.floor(t.length/r);t.push({delay:a.until<o?u-o:u-a.until,until:u,value:i})}else t.push({delay:0,until:o,value:i});return t}),[]),Z((function(e){return e[e.length-1]})),$h((function(e){var t=mb(e.value);return e.delay?t.pipe(Wc(e.delay,n)):t})))}}function mt(e,t){var n=(t=void 0===t?{protocols:cm,makeWebSocket:dm}:t).protocols,r=void 0===n?cm:n,i=void 0===(t=t.makeWebSocket)?dm:t;return new V((function(t){var n,o=new La,s=i(e,r),a=!1,u=!1,c=function(e){if(n)throw a=!0,e=Error("Web socket message factory function called more than once"),t.error(e),e;return n=e.subscribe((function(e){s.send(e)})),o};return s.onopen=function(){u?(a=!0,s.close()):t.next(c)},s.onmessage=function(e){o.next(e.data)},s.onerror=function(e){a=!0,t.error(Error(e.message))},s.onclose=function(e){a||(a=!0,u?(t.complete(),o.complete()):t.error(Error(1e3===e.code?"Normal closure":e.reason)))},function(){u=!0,n&&n.unsubscribe(),a||(a=!0,s.close())}}))}function jg(){this._listeners={}}function em(e){return"undefined"!=typeof Float32Array?function(){function t(e,t,n){o[0]=e,t[n]=s[0],t[n+1]=s[1],t[n+2]=s[2],t[n+3]=s[3]}function n(e,t,n){o[0]=e,t[n]=s[3],t[n+1]=s[2],t[n+2]=s[1],t[n+3]=s[0]}function r(e,t){return s[0]=e[t],s[1]=e[t+1],s[2]=e[t+2],s[3]=e[t+3],o[0]}function i(e,t){return s[3]=e[t],s[2]=e[t+1],s[1]=e[t+2],s[0]=e[t+3],o[0]}var o=new Float32Array([-0]),s=new Uint8Array(o.buffer),a=128===s[3];e.writeFloatLE=a?t:n,e.writeFloatBE=a?n:t,e.readFloatLE=a?r:i,e.readFloatBE=a?i:r}():function(){function t(e,t,n,r){var i=0>t?1:0;if(i&&(t=-t),0===t)e(0<1/t?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(34028234663852886e22<t)e((i<<31|2139095040)>>>0,n,r);else if(11754943508222875e-54>t)e((i<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var o=Math.floor(Math.log(t)/Math.LN2);e((i<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,n,r)}}function n(e,t,n){return n=e(t,n),e=2*(n>>31)+1,t=n>>>23&255,n&=8388607,255===t?n?NaN:1/0*e:0===t?1401298464324817e-60*e*n:e*Math.pow(2,t-150)*(n+8388608)}e.writeFloatLE=t.bind(null,fm),e.writeFloatBE=t.bind(null,gm),e.readFloatLE=n.bind(null,hm),e.readFloatBE=n.bind(null,im)}(),"undefined"!=typeof Float64Array?function(){function t(e,t,n){o[0]=e,t[n]=s[0],t[n+1]=s[1],t[n+2]=s[2],t[n+3]=s[3],t[n+4]=s[4],t[n+5]=s[5],t[n+6]=s[6],t[n+7]=s[7]}function n(e,t,n){o[0]=e,t[n]=s[7],t[n+1]=s[6],t[n+2]=s[5],t[n+3]=s[4],t[n+4]=s[3],t[n+5]=s[2],t[n+6]=s[1],t[n+7]=s[0]}function r(e,t){return s[0]=e[t],s[1]=e[t+1],s[2]=e[t+2],s[3]=e[t+3],s[4]=e[t+4],s[5]=e[t+5],s[6]=e[t+6],s[7]=e[t+7],o[0]}function i(e,t){return s[7]=e[t],s[6]=e[t+1],s[5]=e[t+2],s[4]=e[t+3],s[3]=e[t+4],s[2]=e[t+5],s[1]=e[t+6],s[0]=e[t+7],o[0]}var o=new Float64Array([-0]),s=new Uint8Array(o.buffer),a=128===s[7];e.writeDoubleLE=a?t:n,e.writeDoubleBE=a?n:t,e.readDoubleLE=a?r:i,e.readDoubleBE=a?i:r}():function(){function t(e,t,n,r,i,o){var s=0>r?1:0;if(s&&(r=-r),0===r)e(0,i,o+t),e(0<1/r?0:2147483648,i,o+n);else if(isNaN(r))e(0,i,o+t),e(2146959360,i,o+n);else if(17976931348623157e292<r)e(0,i,o+t),e((s<<31|2146435072)>>>0,i,o+n);else if(22250738585072014e-324>r)e((r/=5e-324)>>>0,i,o+t),e((s<<31|r/4294967296)>>>0,i,o+n);else{var a=Math.floor(Math.log(r)/Math.LN2);1024===a&&(a=1023),e(4503599627370496*(r*=Math.pow(2,-a))>>>0,i,o+t),e((s<<31|a+1023<<20|1048576*r&1048575)>>>0,i,o+n)}}function n(e,t,n,r,i){return t=e(r,i+t),r=e(r,i+n),e=2*(r>>31)+1,t=4294967296*(1048575&r)+t,2047===(n=r>>>20&2047)?t?NaN:1/0*e:0===n?5e-324*e*t:e*Math.pow(2,n-1075)*(t+4503599627370496)}e.writeDoubleLE=t.bind(null,fm,0,4),e.writeDoubleBE=t.bind(null,gm,4,0),e.readDoubleLE=n.bind(null,hm,0,4),e.readDoubleBE=n.bind(null,im,4,0)}(),e}function fm(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function gm(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function hm(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function im(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}function Ra(e,t){this.lo=e>>>0,this.hi=t>>>0}function df(e,t,n){this.fn=e,this.len=t,this.next=void 0,this.val=n}function ei(){}function nt(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function ha(){this.len=0,this.tail=this.head=new df(ei,0,0),this.states=null}function fi(e,t,n){t[n]=255&e}function gi(e,t){this.len=e,this.next=void 0,this.val=t}function hi(e,t,n){for(;e.hi;)t[n++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;127<e.lo;)t[n++]=127&e.lo|128,e.lo>>>=7;t[n++]=e.lo}function ii(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function gc(){ji.call(this)}function ot(e,t,n){40>e.length?T.utf8.write(e,t,n):t.utf8Write?t.utf8Write(e,n):t.write(e,n)}function Ub(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function Ha(e){this.buf=e,this.pos=0,this.len=e.length}function ki(){var e=new jm(0,0),t=0;if(!(4<this.len-this.pos)){for(;3>t;++t){if(this.pos>=this.len)throw Ub(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,128>this.buf[this.pos++])return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;4>t;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,128>this.buf[this.pos++])return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,128>this.buf[this.pos++])return e;if(t=0,4<this.len-this.pos){for(;5>t;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,128>this.buf[this.pos++])return e}else for(;5>t;++t){if(this.pos>=this.len)throw Ub(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,128>this.buf[this.pos++])return e}throw Error("invalid varint encoding")}function kg(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function km(){if(this.pos+8>this.len)throw Ub(this,8);return new jm(kg(this.buf,this.pos+=4),kg(this.buf,this.pos+=4))}function td(e){li.call(this,e)}function ef(e,t,n){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");T.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=!!t,this.responseDelimited=!!n}function ua(e){return"string"==typeof e&&/^[\s\w!#$%&()+,.:;<=>?@[\]^{|}~-]{1,64}$/.test(e)&&"null"!==e}function pt(e){try{var t=e.split(".").map((function(e){return Number(e)}))}catch(e){return!1}if(4!==t.length||0===t[0])return!1;for(e=0;e<t.length;e++){var n=t[e];if(!Number.isInteger(n)||0>n||255<n)return!1}return!0}function lm(e,t){if(!Array.isArray(t)||0===t.length||32<t.length||t.some((function(e){return 0===e.length||32<e.length})))throw new L("arguments is not valid",Fa);if(!ua(e))throw new L("ID is invalid",Fa)}function ff(e){var t=e.attributes,n=e.attrSizeMap,r=e.maxAttrsCount,i=e.maxAttrValueSize;if(e=e.maxTotalSize,!md(t))throw new L("attributes must be an object",Fa);if(Object.keys(t).length>r)throw new gb("Exceed the limit of ".concat(r," attributes"),ee);if(0===Object.keys(t).length)throw new L("The attributes is an empty object",Fa);var o=0,s=0;for(t=Object.entries(t);s<t.length;s++){var a=pa(t[s],2),u=a[1];a=new Blob([a[0]]).size;var c=new Blob([u]).size;if(0===a||32<a)throw new L("Invalid attribute key",Fa);if(c>i)throw new gb("Invalid attribute value, over the limit of ".concat(i," bytes"),ee);if("string"!=typeof u||0===u.length)throw new L("Invalid attribute value",Fa);o+=a,o+=c}if(o>e)throw new gb("The attributes size overflow",ee);if(void 0!==n){if(Object.keys(n).length>r)throw new gb("Exceed the limit of ".concat(r," attributes"),ee);for(o=r=0,n=Object.entries(n);o<n.length;o++){if(s=(t=pa(n[o],2))[1],0===(t=new Blob([t[0]]).size))throw new L("Invalid attribute key",Fa);if(s>i)throw new gb("Invalid attribute value, over the limit of ".concat(i," bytes"),ee);r+=t,r+=s}if(r>e)throw new gb("The attributes size overflow",ee)}}function mi(e,t){return Math.floor(Math.random()*(Math.floor(t)-Math.ceil(e)+1))+e}function lg(){var e=mi(0,4294967295),t=mi(1,4294967295);return new U(e,t,!0)}function Sa(e){return e.toString().padEnd(32,"0")}function mm(e,t){return new TypeError("Unexpected ".concat(e,": ").concat(t))}function nm(e,t){return e=e.split(".").map((function(e){return Number(e)})),t=t.split(".").map((function(e){return Number(e)})),Math.sqrt(1e3*Math.pow(e[0]-t[0],2)+100*Math.pow(e[1]-t[1],2)+10*Math.pow(e[2]-t[2],2)+1*Math.pow(e[3]-t[3],2))}function om(e){return e.lessThanOrEqual(Number.MAX_SAFE_INTEGER)?e.toNumber():e.toString()}function pm(e,t){t="".concat(e).concat(t||"");var n=qm.get(t)||1;return qm.set(t,n+1),"".concat(e).concat(n)}function rm(e,t){var n="number"==typeof t?t:void 0!==t&&"string"!=typeof t?t.code:void 0;return t="number"!=typeof t&&"string"!=typeof t&&void 0!==t&&void 0!==t.serverCode?t.serverCode:void 0,n="".concat(void 0!==n?" Error Code ".concat(n):"").concat(void 0!==t?", server Code ".concat(t):""),e="string"==typeof e&&e?mg(e):Array.isArray(e)&&"string"==typeof e[0]&&e[0]?mg(sm.apply(void 0,[e[0]].concat(I(e.slice(1))))):"","".concat(""===n?"":"".concat(n," - ")).concat(e)}function tm(e){return ni.apply(this,arguments)}function ni(){return(ni=K(w.mark((function e(t){return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){setTimeout((function(){e()}),t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function um(e){return e instanceof Blob||"[object Blob]"===Object.prototype.toString.call(e)}function ng(e){var t=255&e,n=e>>8&255,r=e>>16&255;return"".concat(e>>24&255,".").concat(r,".").concat(n,".").concat(t)}function gf(e,t,n){return oi.apply(this,arguments)}function oi(){return(oi=K(w.mark((function e(t,n,r){var i,o,s,a,u,c,l,f,h,p,d,v,b,g,y,E,m,_,O,I,k,A,T,R,N,S;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=n.body,o=n.headers,s=void 0===o?{}:o,a=n.timeout,u=void 0===a?1e4:a,c=n.signal,l=n.withCredentials,f=void 0!==l&&l,h=(r||{}).useBinaryResponse,p=void 0!==h&&h,(d=new XMLHttpRequest).open("POST",t,!0),d.responseType=p?"arraybuffer":"text",d.withCredentials=f,d.timeout=u,v=i instanceof FormData,b=i instanceof Uint8Array,!(1<(g=Object.keys(s).filter((function(e){return"content-type"===e.toLowerCase()}))).length)){e.next=14;break}throw new RangeError("multiple content-type");case 14:0===g.length&&(b?s["Content-Type"]="application/octet-stream":v||(s["Content-Type"]="application/json"));case 15:if("setRequestHeader"in d){e.next=46;break}return d.abort(),e.next=19,fetch(t,{body:v||b?i:JSON.stringify(i),cache:"no-cache",credentials:f?"include":"same-origin",headers:s,method:"POST",mode:"cors",referrer:"no-referrer",signal:c});case 19:if(y=e.sent,!(200<=(E=y.status)&&300>E||304===E)){e.next=31;break}if(!p){e.next=27;break}return e.next=25,y.arrayBuffer();case 25:return m=e.sent,e.abrupt("return",{status:E,responseData:m});case 27:return e.next=29,y.text();case 29:return _=e.sent,e.abrupt("return",{status:E,responseText:_});case 31:return O=new ca(["Post XHR failure, status %d",E]),e.prev=32,e.next=35,y.text();case 35:throw I=e.sent,O.statusCode=E,O.message=I||"Request failed, status ".concat(E),O;case 41:throw e.prev=41,e.t0=e.catch(32),O.statusCode=E,O.message="Request failed, status ".concat(E),O;case 46:if(0!==Object.keys(s).length)for(k=0,A=Object.entries(s);k<A.length;k++)T=pa(A[k],2),R=T[0],N=T[1],d.setRequestHeader(R,N);return void 0!==c&&(S=function e(){d.abort(),c.removeEventListener("abort",e)},c.addEventListener("abort",S)),v||b?d.send(i):d.send(JSON.stringify(i)),e.abrupt("return",new Promise((function(e,t){d.onload=function(){var n=d.status;if(200<=n&&300>n||304===n)e(p?{status:n,responseData:d.response}:{status:n,responseText:d.responseText});else{var r=new ca(["Post XHR failure, status %d",n]);r.statusCode=n,r.message=d.response||"Request failed, status ".concat(d.status),t(r)}},d.ontimeout=function(e){t(new bb(["XHR request timed out after %d ms",u],{originalError:e}))},d.onerror=function(){var e=new ca(["Post XHR failure, status %d",d.status]);e.statusCode=d.status,e.message=d.response||"Request failed, status ".concat(d.status),t(e)},d.onabort=function(){try{t(new DOMException("The request aborted.","AbortError"))}catch(n){var e=Error("The request aborted.");e.name="AbortError",t(e)}}})));case 50:case"end":return e.stop()}}),e,null,[[32,41]])})))).apply(this,arguments)}function wm(e){return ui.apply(this,arguments)}function ui(){return(ui=K(w.mark((function e(t){var n;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new Image).src=t,e.abrupt("return",new Promise((function(e,t){n.onload=function(){e({width:n.width,height:n.height})},n.onerror=t})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function st(e,t){return vi.apply(this,arguments)}function vi(){return(vi=K(w.mark((function e(t,n){var r,i,o,s,a,u,c,l,f,h;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.thumbnailHeight,i=void 0===r?0:r,o=t.thumbnailWidth,s=void 0===o?0:o,a=t.width,u=void 0===a?0:a,c=t.height,l=void 0===c?0:c,f=t.thumbnail,h=[],"number"==typeof i&&"number"==typeof s&&"number"==typeof u&&"number"==typeof l){e.next=5;break}throw new L("Invalid message params",jf);case 5:return 0>=u&&0>=l&&h.push(wm(xm(n)).then((function(e){u=e.width,l=e.height}))),0>=s&&0>=i&&void 0!==f&&h.push(wi(f).then(function(){var e=K(w.mark((function e(t){var n;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wm(xm(t));case 2:n=e.sent,s=n.width,i=n.height;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),e.next=9,Promise.all(h).catch((function(){}));case 9:return e.abrupt("return",{width:u,height:l,thumbnailWidth:s,thumbnailHeight:i});case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ym(e,t){if(!md(e))throw new L("message object is not a plain object",t);if(void 0===e.messageType)if(e.rawMessage instanceof Uint8Array){if(e.messageType="RAW",void 0!==e.text)throw new L("Raw messages cannot have text property. Use description instead",t)}else{if("string"!=typeof e.text)throw new L("messageType is undefined",t);if(e.messageType="TEXT",void 0!==e.rawMessage)throw new L("Text messages cannot have rawMessage property",t)}}function pg(e){return xi.apply(this,arguments)}function xi(){return(xi=K(w.mark((function e(t){var n,r,i,o,s,a,u,c,l,f,h,p,d,v,b,g,y,E,m,_,O;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.message,r=t.peerId,i=t.toPeer,o=t.session,s=t.errorCodes,a=t.diff,u=t.logger,c=t.options,void 0!==o){e.next=3;break}throw new H("The client is not logged in. Cannot do the operation",s.NOT_LOGGED_IN);case 3:if(l=!1,"TEXT"!==n.messageType||!n.text.startsWith("AgoraRTMLegacyEndcallCompatibleMessagePrefix")||!i){e.next=11;break}if(f=n.text.split("_"),h=pa(f,3),p=h[0],d=h[1],void 0!==h[2]&&ua(d)&&"AgoraRTMLegacyEndcallCompatibleMessagePrefix"===p){e.next=10;break}throw new L("Message is not valid",ge);case 10:l=!0;case 11:if(v=Date.now(),b=o.messageSentTimes.length-1,!((g=o.messageSentTimes[b])&&g+3e3<v)){e.next=18;break}o.messageSentTimes=[v],e.next=29;break;case 18:y=b;case 19:if(!(0<=y)){e.next=28;break}if(!(o.messageSentTimes[y]+3e3<v)){e.next=23;break}return o.messageSentTimes=o.messageSentTimes.slice(y+1,b+1),e.abrupt("break",28);case 23:if(!(180<=b-y+1)){e.next=25;break}throw new gb("Message sent failed, exceeded the 180 message in 3 seconds",s.TOO_OFTEN);case 25:y--,e.next=19;break;case 28:o.messageSentTimes.push(v);case 29:e.t0=n.messageType,e.next="TEXT"===e.t0?32:"RAW"===e.t0?37:"FILE"===e.t0||"IMAGE"===e.t0?39:40;break;case 32:if(!l){e.next=36;break}return E=n.text.split("_"),m=pa(E,3),_=m[1],O=m[2],u.info("[rtm-API] EndCall message send api is called"),e.abrupt("return",o.sendInvitationMessage({peerId:r,type:"CallCancel",extra:O,channelId:_,callId:"0"}));case 36:return e.abrupt("return",o.sendTextMessage(n.text,r,i,c,1e4-a));case 37:return void 0===n.description&&(n.description=""),e.abrupt("return",o.sendRawMessage(n.rawMessage,n.description,r,i,c,1e4-a));case 39:return e.abrupt("return",o.sendMediaMessage(n.messageType,n,r,i,c,1e4-a));case 40:throw new L("Invalid message type",ge);case 41:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tt(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=e.replace(/(https?:\/\/)?(www.)?/i,"");return t||(n=n.split(".").slice(e.length-2).join(".")),-1!==n.indexOf("/")?n.split("/")[0]:n}function qg(e,t){function n(n){if(void 0===e)return e;if(!Array.isArray(n)&&!md(n))return n;if(Array.isArray(n))return qg(n,t);var r={},i=0;for(n=Object.entries(n);i<n.length;i++){var o=pa(n[i],2),s=o[1];r[o[0]]=null==s?s:qg(s,t)}return rg(r,t)}return 2<arguments.length&&(t=Array.prototype.slice.call(arguments).slice(1)),Array.isArray(e)?e.map(n):n(e)}function zm(e){return Object.getOwnPropertyNames(e).forEach((function(t){"object"==R(t=e[t])&&null!==t&&zm(t)})),Object.freeze(e)}function na(e){return new TextDecoder("utf-8").decode(e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength))}function sg(e){return(new TextEncoder).encode(e).length}function Am(){for(var e=0,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];for(t=0;t<n.length;t++)e+=n[t].length;for(e=new Uint8Array(e),r=t=0;r<n.length;r++){var i=n[r];e.set(i,t),t+=i.length}return e}function Bm(e,t,n){var r=e.match(/([^?#]+)(\?[^#]*)?(#.*)?/);if(e=null==r?void 0:r[1],r=null==r?void 0:r[2]){var i;for(r=r.substr(1).split("&"),i=0;i<r.length;i++)if(r[i].split("=")[0]==t){r[i]=t+"="+encodeURIComponent(n);break}return i==r.length&&r.push(t+"="+encodeURIComponent(n)),e+"?"+r.join("&")}return e+"?"+t+"="+encodeURIComponent(n)}function wi(e){return new Promise((function(t,n){var r=new FileReader;r.onloadend=function(){var e=r.result||new ArrayBuffer(0);t(e)},r.onerror=n,r.readAsArrayBuffer(e)}))}function ut(e,t){e=e=[e],"string"==typeof(t=t||{})&&(t={type:t});try{var n=new Blob(e,t)}catch(i){if("TypeError"!==i.name)throw i;n=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder);for(var r=0;r<e.length;r+=1)n.append(e[r]);n=n.getBlob(t.type)}return n}function Cm(e){var t=[];return function e(n){if(null===n||"object"!==R(n))return n;if(-1!==t.indexOf(n))return"[Circular]";if(t.push(n),"function"==typeof n.toJSON)try{var r=e(n.toJSON());return t.pop(),r}catch(e){return"[Throws: "+(e?e.message:"?")+"]"}return Array.isArray(n)?(r=n.map(e),t.pop(),r):(r=Object.keys(n).reduce((function(t,r){e:{if(vt.call(n,r))try{var i=n[r];break e}catch(e){i="[Throws: "+(e?e.message:"?")+"]";break e}i=n[r]}return t[r]=e(i),t}),{}),t.pop(),r)}(e)}function wt(e){if(!(100<(e=String(e)).length)&&(e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e))){var t=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*t;case"weeks":case"week":case"w":return 6048e5*t;case"days":case"day":case"d":return 864e5*t;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*t;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*t;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t}}}function tg(e,t,n,r){return Math.round(e/n)+" "+r+(t>=1.5*n?"s":"")}function ia(e,t,n){void 0===n&&(n=Object.getOwnPropertyDescriptor(e,t));var r=n.value;return n.value=function(){for(var e=this,n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];this.invokeTracker.apply(this,["%s: ".concat(0<i.length?"%s with args: ".concat(i.map((function(){return"%o"}))):"%s"),this.name,t].concat(i));try{var s=r.apply(this,i)}catch(e){throw this.logError.apply(this,["".concat(void 0!==e.code?"Error Code ".concat(e.code,": "):"","%s failed").concat(0<i.length?" with args: ".concat(i.map((function(){return"%o"}))):""),t].concat(i)),e.originalError&&this.logError(e.originalError),this.errorTracker(e),e}var a=Date.now();return K(w.mark((function n(){var r,o;return w.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,s;case 3:r=n.sent,n.next=12;break;case 6:return n.prev=6,n.t0=n.catch(0),e.logError.apply(e,["".concat(void 0!==n.t0.code?"Error Code ".concat(n.t0.code,": "):"","%s failed").concat(0<i.length?" with args: ".concat(i.map((function(){return"%o"}))):""),t].concat(i)),n.t0.originalError&&e.logError(n.t0.originalError),e.errorTracker(n.t0),n.abrupt("return");case 12:r!==s?void 0===r?e.resultTracker("%s promise resolves after %dms",t,Date.now()-a):e.resultTracker("%s promise resolves after %dms, result is %o",t,Date.now()-a,r):"Object"!==Object.prototype.toString.call(r).slice(8,-1)||md(r)?e.resultTracker("%s result is %o",t,r):e.resultTracker("%s result is %s",t,r.name||(null===(o=r.constructor)||void 0===o?void 0:o.name));case 13:case"end":return n.stop()}}),n,null,[[0,6]])})))(),s},n}function xt(e,t){var n="".concat(e,"Uri");if("number"!=typeof(n=yi[n])||0===n)throw new TypeError("Got Unknown URI Name");return t=new(e=Dm[e])(t),t=e.encode(t).finish(),new yt({uri:n,data:t})}function cb(e,t,n,r){return zi.apply(this,arguments)}function zi(){return(zi=K(w.mark((function e(t,n,r,i){var o,s;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return o=zt[t].encode(n).finish(),s=function(){var e=K(w.mark((function e(n){var r,i,a=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(2<(r=1<a.length&&void 0!==a[1]?a[1]:0))){e.next=3;break}return e.abrupt("return");case 3:return i=Bm(i="https://".concat(n,":6443/events/proto-raw"),"sentTs",Math.ceil(Date.now()/1e3).toString()),i=Bm(i,"id",At[t].toString()),e.next=8,gf(i,{body:o,timeout:2e4,headers:{"Content-Type":"application/octet-stream"}}).catch((function(e){return s(n,r+1)}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.prev=4,e.next=7,s(r||"webcollector-rtm.agora.io");case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(4),e.next=13,s(i||"webcollector-rtm.agoraio.cn");case 13:case"end":return e.stop()}}),e,null,[[4,9]])})))).apply(this,arguments)}function db(e){return void 0===e?U.fromNumber(0):U.fromNumber(Date.now()-e)}function Bt(e){return btoa(String.fromCharCode.apply({},e.replace(/\r|\n/g,"").replace(/([\dA-Fa-f]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ").map((function(e){return parseInt(e,16)})))).replace(/={1,2}$/,"")}function ug(e,t){return U.fromValue(e).eq(t)}function vg(e,t){var n=void 0===t?e.val:t,r=e.isBoolean;t=e.isNumber;var i=e.oneof,o=e.len;if(2!==[r,t,i].filter((function(e){return!e})).length)throw new TypeError("invalid field type");if(void 0!==n&&(e=!1,void 0!==i&&(i=null==i?[]:Em(i,Rc(i)),Ct(i,ug).length===i.length&&void 0!==Dt(i,(function(e){return ug(n,e)}))&&(e=!0)),r=void 0!==r&&(0===n||1===n)&&1===o,t=void 0!==t&&n.toString(2).length<=o,!(e||r||t)))throw Error("invalid field value")}function Fm(e){return function(){var t=e();if(!t)throw new H("Client is not logged in. Cannot do the operation");return t}}var Ta="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},wg=function(e){return e&&e.Math==Math&&e},B=wg("object"==typeof globalThis&&globalThis)||wg("object"==typeof window&&window)||wg("object"==typeof self&&self)||wg("object"==typeof Ta&&Ta)||function(){return this}()||Function("return this")(),O=function(e){try{return!!e()}catch(e){return!0}},ja=!O((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),Gm={}.propertyIsEnumerable,Hm=Object.getOwnPropertyDescriptor,kf=Hm&&!Gm.call({1:2},1)?function(e){return!!(e=Hm(this,e))&&e.enumerable}:Gm,Xc=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},Et={}.toString,Vb=function(e){return Et.call(e).slice(8,-1)},Ft="".split,lf=O((function(){return!Object("z").propertyIsEnumerable(0)}))?function(e){return"String"==Vb(e)?Ft.call(e,""):Object(e)}:Object,hb=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e},rb=function(e){return lf(hb(e))},ea=function(e){return"object"==typeof e?null!==e:"function"==typeof e},hc=function(e,t){if(!ea(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!ea(r=n.call(e))||"function"==typeof(n=e.valueOf)&&!ea(r=n.call(e))||!t&&"function"==typeof(n=e.toString)&&!ea(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},Gt={}.hasOwnProperty,P=function(e,t){return Gt.call(e,t)},he=B.document,xg=ea(he)&&ea(he.createElement),Im=!ja&&!O((function(){return 7!=Object.defineProperty(xg?he.createElement("div"):{},"a",{get:function(){return 7}}).a})),Jm=Object.getOwnPropertyDescriptor,Db={f:ja?Jm:function(e,t){if(e=rb(e),t=hc(t,!0),Im)try{return Jm(e,t)}catch(e){}if(P(e,t))return Xc(!kf.call(e,t),e[t])}},qa=function(e){if(!ea(e))throw TypeError(String(e)+" is not an object");return e},Km=Object.defineProperty,Ma={f:ja?Km:function(e,t,n){if(qa(e),t=hc(t,!0),qa(n),Im)try{return Km(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},Ia=ja?function(e,t,n){return Ma.f(e,t,Xc(1,n))}:function(e,t,n){return e[t]=n,e},Ai=function(e,t){try{Ia(B,e,t)}catch(n){B[e]=t}return t},ud=B["__core-js_shared__"]||Ai("__core-js_shared__",{}),Ht=Function.toString;"function"!=typeof ud.inspectSource&&(ud.inspectSource=function(e){return Ht.call(e)});var Bi=ud.inspectSource,Lm=B.WeakMap,It="function"==typeof Lm&&/native code/.test(Bi(Lm)),vd=Xa((function(e){(e.exports=function(e,t){return ud[e]||(ud[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.9.0",mode:"global",copyright:"Â© 2021 Denis Pushkarev (zloirock.ru)"})})),Jt=0,Kt=Math.random(),ie=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++Jt+Kt).toString(36)},Mm=vd("keys"),yg=function(e){return Mm[e]||(Mm[e]=ie(e))},je={},Lt=B.WeakMap;if(It)var ke=ud.state||(ud.state=new Lt),Mt=ke.get,Nt=ke.has,Ot=ke.set,Ci=function(e,t){return t.facade=e,Ot.call(ke,e,t),t},zg=function(e){return Mt.call(ke,e)||{}},Di=function(e){return Nt.call(ke,e)};else{var mf=yg("state");je[mf]=!0,Ci=function(e,t){return t.facade=e,Ia(e,mf,t),t},zg=function(e){return P(e,mf)?e[mf]:{}},Di=function(e){return P(e,mf)}}var Ua={set:Ci,get:zg,has:Di,enforce:function(e){return Di(e)?zg(e):Ci(e,{})},getterFor:function(e){return function(t){var n;if(!ea(t)||(n=zg(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}}},Va=Xa((function(e){var t=Ua.get,n=Ua.enforce,r=String(String).split("String");(e.exports=function(e,t,i,o){var s=!!o&&!!o.unsafe,a=!!o&&!!o.enumerable;if(o=!!o&&!!o.noTargetGet,"function"==typeof i){"string"!=typeof t||P(i,"name")||Ia(i,"name",t);var u=n(i);u.source||(u.source=r.join("string"==typeof t?t:""))}e===B?a?e[t]=i:Ai(t,i):(s?!o&&e[t]&&(a=!0):delete e[t],a?e[t]=i:Ia(e,t,i))})(Function.prototype,"toString",(function(){return"function"==typeof this&&t(this).source||Bi(this)}))})),Nm=function(e){return"function"==typeof e?e:void 0},Wb=function(e,t){return 2>arguments.length?Nm(B[e])||Nm(B[e]):B[e]&&B[e][t]||B[e]&&B[e][t]},Pt=Math.ceil,Qt=Math.floor,ic=function(e){return isNaN(e=+e)?0:(0<e?Qt:Pt)(e)},Rt=Math.min,za=function(e){return 0<e?Rt(ic(e),9007199254740991):0},St=Math.max,Tt=Math.min,xb=function(e,t){return 0>(e=ic(e))?St(e+t,0):Tt(e,t)},Om=function(e){return function(t,n,r){t=rb(t);var i=za(t.length);if(r=xb(r,i),e&&n!=n){for(;i>r;)if((n=t[r++])!=n)return!0}else for(;i>r;r++)if((e||r in t)&&t[r]===n)return e||r||0;return!e&&-1}},Pm=Om(!0),Ei=Om(!1),Qm=function(e,t){e=rb(e);var n,r=0,i=[];for(n in e)!P(je,n)&&P(e,n)&&i.push(n);for(;t.length>r;)P(e,n=t[r++])&&(~Ei(i,n)||i.push(n));return i},Ag="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),Ut=Ag.concat("length","prototype"),wd={f:Object.getOwnPropertyNames||function(e){return Qm(e,Ut)}},nf={f:Object.getOwnPropertySymbols},Rm=Wb("Reflect","ownKeys")||function(e){var t=wd.f(qa(e)),n=nf.f;return n?t.concat(n(e)):t},Sm=function(e,t){for(var n=Rm(t),r=Ma.f,i=Db.f,o=0;o<n.length;o++){var s=n[o];P(e,s)||r(e,s,i(t,s))}},Vt=/#|\.prototype\./,jc=function(e,t){return(e=Wt[Xt(e)])==Yt||e!=Zt&&("function"==typeof t?O(t):!!t)},Xt=jc.normalize=function(e){return String(e).replace(Vt,".").toLowerCase()},Wt=jc.data={},Zt=jc.NATIVE="N",Yt=jc.POLYFILL="P",$t=Db.f,N=function(e,t){var n,r,i,o=e.target,s=e.global,a=e.stat;if(r=s?B:a?B[o]||Ai(o,{}):(B[o]||{}).prototype)for(i in t){var u=t[i],c=e.noTargetGet?(n=$t(r,i))&&n.value:r[i];if(!(n=jc(s?i:o+(a?".":"#")+i,e.forced))&&void 0!==c){if(typeof u==typeof c)continue;Sm(u,c)}(e.sham||c&&c.sham)&&Ia(u,"sham",!0);try{Va(r,i,u,e)}catch(e){}}},le=function(e,t){var n=[][e];return!!n&&O((function(){n.call(null,t||function(){throw 1},1)}))},au=[].join,bu=lf!=Object,cu=le("join",",");N({target:"Array",proto:!0,forced:bu||!cu},{join:function(e){return au.call(rb(this),void 0===e?",":e)}}),N({target:"Number",stat:!0},{MAX_SAFE_INTEGER:9007199254740991}),N({target:"Number",stat:!0},{isNaN:function(e){return e!=e}}),B.Number.isNaN;var wc=B.Promise,of=function(e,t,n){for(var r in t)Va(e,r,t[r],n);return e},xc=!!Object.getOwnPropertySymbols&&!O((function(){return!String(Symbol())})),Tm=xc&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Bg=vd("wks"),pf=B.Symbol,du=Tm?pf:pf&&pf.withoutSetter||ie,oa=function(e){return P(Bg,e)||(xc&&P(pf,e)?Bg[e]=pf[e]:Bg[e]=du("Symbol."+e)),Bg[e]},eu=Ma.f,Um=oa("toStringTag"),yc=function(e,t,n){e&&!P(e=n?e:e.prototype,Um)&&eu(e,Um,{configurable:!0,value:t})},Vm=oa("species"),qf=function(e){e=Wb(e);var t=Ma.f;ja&&e&&!e[Vm]&&t(e,Vm,{configurable:!0,get:function(){return this}})},yb=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e},zc=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e},me={},fu=oa("iterator"),gu=Array.prototype,Fi=function(e){return void 0!==e&&(me.Array===e||gu[fu]===e)},ne=function(e,t,n){if(yb(e),void 0===t)return e;switch(n){case 0:return function(){return e.call(t)};case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}},hu=oa("toStringTag"),Wm={};Wm[hu]="z";var Gi="[object z]"===String(Wm),iu=oa("toStringTag"),ju="Arguments"==Vb(function(){return arguments}()),rf=Gi?Vb:function(e){var t;if(void 0===e)var n="Undefined";else{if(null===e)var r="Null";else{e:{var i=e=Object(e);try{r=i[iu];break e}catch(e){}r=void 0}r="string"==typeof(n=r)?n:ju?Vb(e):"Object"==(t=Vb(e))&&"function"==typeof e.callee?"Arguments":t}n=r}return n},ku=oa("iterator"),Hi=function(e){if(null!=e)return e[ku]||e["@@iterator"]||me[rf(e)]},Ii=function(e){var t=e.return;if(void 0!==t)return qa(t.call(e)).value},sf=function(e,t){this.stopped=e,this.result=t},Cg=function(e,t,n){var r,i=!(!n||!n.AS_ENTRIES),o=!(!n||!n.IS_ITERATOR),s=!(!n||!n.INTERRUPTED),a=ne(t,n&&n.that,1+i+s),u=function(e){return c&&Ii(c),new sf(!0,e)};if(t=function(e){return i?(qa(e),s?a(e[0],e[1],u):a(e[0],e[1])):s?a(e,u):a(e)},o)var c=e;else{if("function"!=typeof(o=Hi(e)))throw TypeError("Target is not iterable");if(Fi(o)){for(o=0,n=za(e.length);n>o;o++)if((r=t(e[o]))&&r instanceof sf)return r;return new sf(!1)}c=o.call(e)}for(e=c.next;!(o=e.call(c)).done;){try{r=t(o.value)}catch(e){throw Ii(c),e}if("object"==typeof r&&r&&r instanceof sf)return r}return new sf(!1)},Xm=oa("iterator"),Ym=!1;try{var lu=0,Zm={next:function(){return{done:!!lu++}},return:function(){Ym=!0}};Zm[Xm]=function(){return this},Array.from(Zm,(function(){throw 2}))}catch(c){}var Dg=function(e,t){if(!t&&!Ym)return!1;var n=!1;try{(t={})[Xm]=function(){return{next:function(){return{done:n=!0}}}},e(t)}catch(e){}return n},mu=oa("species"),Yc=function(e,t){var n;return void 0===(e=qa(e).constructor)||null==(n=qa(e)[mu])?t:yb(n)},Ji=Wb("document","documentElement"),oe=Wb("navigator","userAgent")||"",$m=/(iphone|ipod|ipad).*applewebkit/i.test(oe),kc="process"==Vb(B.process),Eg=B.location,Ki=B.setImmediate,an=B.clearImmediate,nu=B.process,bn=B.MessageChannel,Li=B.Dispatch,Mi=0,tf={},Ni=function(e){if(tf.hasOwnProperty(e)){var t=tf[e];delete tf[e],t()}},Oi=function(e){return function(){Ni(e)}},cn=function(e){Ni(e.data)},dn=function(e){B.postMessage(e+"",Eg.protocol+"//"+Eg.host)};if(!Ki||!an)if(Ki=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return tf[++Mi]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},uf(Mi),Mi},an=function(e){delete tf[e]},kc)var uf=function(e){nu.nextTick(Oi(e))};else if(Li&&Li.now)uf=function(e){Li.now(Oi(e))};else if(bn&&!$m){var en=new bn,fn=en.port2;en.port1.onmessage=cn,uf=ne(fn.postMessage,fn,1)}else B.addEventListener&&"function"==typeof postMessage&&!B.importScripts&&Eg&&"file:"!==Eg.protocol&&!O(dn)?(uf=dn,B.addEventListener("message",cn,!1)):uf="onreadystatechange"in(xg?he.createElement("script"):{})?function(e){Ji.appendChild(xg?he.createElement("script"):{}).onreadystatechange=function(){Ji.removeChild(this),Ni(e)}}:function(e){setTimeout(Oi(e),0)};var Pi=Ki,ou=/web0s(?!.*chrome)/i.test(oe),pu=Db.f,gn=B.MutationObserver||B.WebKitMutationObserver,hn=B.document,jn=B.process,Qi=B.Promise,kn=pu(B,"queueMicrotask"),ln=kn&&kn.value,xd,vf;if(!ln){var Gg=function(){var e;for(kc&&(e=jn.domain)&&e.exit();xd;){var t=xd.fn;xd=xd.next;try{t()}catch(e){throw xd?Fg():vf=void 0,e}}vf=void 0,e&&e.enter()};if($m||kc||ou||!gn||!hn)if(Qi&&Qi.resolve)var mn=Qi.resolve(void 0),qu=mn.then,Fg=function(){qu.call(mn,Gg)};else Fg=kc?function(){jn.nextTick(Gg)}:function(){Pi.call(B,Gg)};else{var nn=!0,on=hn.createTextNode("");new gn(Gg).observe(on,{characterData:!0}),Fg=function(){on.data=nn=!nn}}}var pn=ln||function(e){e={fn:e,next:void 0},vf&&(vf.next=e),xd||(xd=e,Fg()),vf=e},ru=function(e){var t,n;this.promise=new e((function(e,r){if(void 0!==t||void 0!==n)throw TypeError("Bad Promise constructor");t=e,n=r})),this.resolve=yb(t),this.reject=yb(n)},Ri={f:function(e){return new ru(e)}},Hg=function(e,t){return qa(e),ea(t)&&t.constructor===e?t:((0,(e=Ri.f(e)).resolve)(t),e.promise)},su=function(e,t){var n=B.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))},Si=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}},qn=B.process,rn=qn&&qn.versions,sn=rn&&rn.v8;if(sn)var yd=sn.split("."),Ti=yd[0]+yd[1];else oe&&(yd=oe.match(/Edge\/(\d+)/),(!yd||74<=yd[1])&&(yd=oe.match(/Chrome\/(\d+)/))&&(Ti=yd[1]));var pe=Ti&&+Ti,tu=oa("species"),tn=Ua.get,uu=Ua.set,vu=Ua.getterFor("Promise"),sb=wc,un=B.TypeError,Ui=B.document,Vi=B.process,vn=Wb("fetch"),qe=Ri.f,wu=qe,xu=!!(Ui&&Ui.createEvent&&B.dispatchEvent),wn="function"==typeof PromiseRejectionEvent,wf=jc("Promise",(function(){if(Bi(sb)===String(sb)&&(66===pe||!kc&&!wn))return!0;if(51<=pe&&/native code/.test(sb))return!1;var e=sb.resolve(1),t=function(e){e((function(){}),(function(){}))};return(e.constructor={})[tu]=t,!(e.then((function(){}))instanceof t)})),yu=wf||!Dg((function(e){sb.all(e).catch((function(){}))})),xn=function(e){var t;return!(!ea(e)||"function"!=typeof(t=e.then))&&t},Wi=function(e,t){if(!e.notified){e.notified=!0;var n=e.reactions;pn((function(){for(var r=e.value,i=1==e.state,o=0;n.length>o;){var s,a=n[o++],u=i?a.ok:a.fail,c=a.resolve,l=a.reject,f=a.domain;try{if(u){if(i||(2===e.rejection&&zu(e),e.rejection=1),!0===u)var h=r;else if(f&&f.enter(),h=u(r),f){f.exit();var p=!0}h===a.promise?l(un("Promise-chain cycle")):(s=xn(h))?s.call(h,c,l):c(h)}else l(r)}catch(e){f&&!p&&f.exit(),l(e)}}e.reactions=[],e.notified=!1,t&&!e.rejection&&Au(e)}))}},yn=function(e,t,n){var r;if(xu){var i=Ui.createEvent("Event");i.promise=t,i.reason=n,i.initEvent(e,!1,!0),B.dispatchEvent(i)}else i={promise:t,reason:n};!wn&&(r=B["on"+e])?r(i):"unhandledrejection"===e&&su("Unhandled promise rejection",n)},Au=function(e){Pi.call(B,(function(){var t=e.facade,n=e.value;if(1!==e.rejection&&!e.parent){var r=Si((function(){kc?Vi.emit("unhandledRejection",n,t):yn("unhandledrejection",t,n)}));if(e.rejection=kc||1!==e.rejection&&!e.parent?2:1,r.error)throw r.value}}))},zu=function(e){Pi.call(B,(function(){var t=e.facade;kc?Vi.emit("rejectionHandled",t):yn("rejectionhandled",t,e.value)}))},re=function(e,t,n){return function(r){e(t,r,n)}},se=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=2,Wi(e,!0))},Xi=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw un("Promise can't be resolved itself");var r=xn(t);r?pn((function(){var n={done:!1};try{r.call(t,re(Xi,n,e),re(se,n,e))}catch(t){se(n,t,e)}})):(e.value=t,e.state=1,Wi(e,!1))}catch(t){se({done:!1},t,e)}}};if(wf){sb=function(e){zc(this,sb,"Promise"),yb(e),Yi.call(this);var t=tn(this);try{e(re(Xi,t),re(se,t))}catch(e){se(t,e)}};var Yi=function(e){uu(this,{type:"Promise",done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})};Yi.prototype=of(sb.prototype,{then:function(e,t){var n=vu(this),r=qe(Yc(this,sb));return r.ok="function"!=typeof e||e,r.fail="function"==typeof t&&t,r.domain=kc?Vi.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Wi(n,!1),r.promise},catch:function(e){return this.then(void 0,e)}});var Bu=function(){var e=new Yi,t=tn(e);this.promise=e,this.resolve=re(Xi,t),this.reject=re(se,t)};if(Ri.f=qe=function(e){return e===sb||e===Cu?new Bu(e):wu(e)},"function"==typeof wc){var Du=wc.prototype.then;Va(wc.prototype,"then",(function(e,t){var n=this;return new sb((function(e,t){Du.call(n,e,t)})).then(e,t)}),{unsafe:!0}),"function"==typeof vn&&N({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return Hg(sb,vn.apply(B,arguments))}})}}N({global:!0,wrap:!0,forced:wf},{Promise:sb}),yc(sb,"Promise",!1),qf("Promise");var Cu=Wb("Promise");N({target:"Promise",stat:!0,forced:wf},{reject:function(e){var t=qe(this);return t.reject.call(void 0,e),t.promise}}),N({target:"Promise",stat:!0,forced:wf},{resolve:function(e){return Hg(this,e)}}),N({target:"Promise",stat:!0,forced:yu},{all:function(e){var t=this,n=qe(t),r=n.resolve,i=n.reject,o=Si((function(){var n=yb(t.resolve),o=[],s=0,a=1;Cg(e,(function(e){var u=s++,c=!1;o.push(void 0),a++,n.call(t,e).then((function(e){c||(c=!0,o[u]=e,--a||r(o))}),i)})),--a||r(o)}));return o.error&&i(o.value),n.promise},race:function(e){var t=this,n=qe(t),r=n.reject,i=Si((function(){var i=yb(t.resolve);Cg(e,(function(e){i.call(t,e).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var Eu=Gi?{}.toString:function(){return"[object "+rf(this)+"]"};Gi||Va(Object.prototype,"toString",Eu,{unsafe:!0});var zn=[].indexOf,An=!!zn&&0>1/[1].indexOf(1,-0),Fu=le("indexOf");N({target:"Array",proto:!0,forced:An||!Fu},{indexOf:function(e){return An?zn.apply(this,arguments)||0:Ei(this,e,1<arguments.length?arguments[1]:void 0)}});var Zi=function(){var e=qa(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},Ig=O((function(){var e=RegExp("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),Gu=O((function(){var e=RegExp("^r","gy");return e.lastIndex=2,null!=e.exec("str")})),Jg=RegExp.prototype.exec,Hu=String.prototype.replace,Bn=Jg,$i=(c=/a/,a=/b*/g,Jg.call(c,"a"),Jg.call(a,"a"),0!==c.lastIndex||0!==a.lastIndex),Cn=Ig||Gu,aj=void 0!==/()??/.exec("")[1],c,a;($i||aj||Cn)&&(Bn=function(e){var t,n=Cn&&this.sticky,r=Zi.call(this),i=this.source,o=0,s=e;if(n){-1===(r=r.replace("y","")).indexOf("g")&&(r+="g"),s=String(e).slice(this.lastIndex),0<this.lastIndex&&(!this.multiline||this.multiline&&"\n"!==e[this.lastIndex-1])&&(i="(?: "+i+")",s=" "+s,o++);var a=new RegExp("^(?:"+i+")",r)}if(aj&&(a=new RegExp("^"+i+"$(?!\\s)",r)),$i)var u=this.lastIndex;var c=Jg.call(n?a:this,s);return n?c?(c.input=c.input.slice(o),c[0]=c[0].slice(o),c.index=this.lastIndex,this.lastIndex+=c[0].length):this.lastIndex=0:$i&&c&&(this.lastIndex=this.global?c.index+c[0].length:u),aj&&c&&1<c.length&&Hu.call(c[0],a,(function(){for(t=1;t<arguments.length-2;t++)void 0===arguments[t]&&(c[t]=void 0)})),c});var xf=Bn;N({target:"RegExp",proto:!0,forced:/./.exec!==xf},{exec:xf});var Iu=oa("species"),Ju=!O((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),Dn="$0"==="a".replace(/./,"$0"),En=oa("replace"),Fn=!!/./[En]&&""===/./[En]("a","$0"),Ku=!O((function(){var e=/(?:)/,t=e.exec;return e.exec=function(){return t.apply(this,arguments)},2!==(e="ab".split(e)).length||"a"!==e[0]||"b"!==e[1]})),Kg=function(e,t,n,r){var i=oa(e),o=!O((function(){var t={};return t[i]=function(){return 7},7!=""[e](t)})),s=o&&!O((function(){var t=!1,n=/a/;return"split"===e&&((n={constructor:{}}).constructor[Iu]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return t=!0,null},n[i](""),!t}));if(!o||!s||"replace"===e&&(!Ju||!Dn||Fn)||"split"===e&&!Ku){var a=/./[i],u=(n=n(i,""[e],(function(e,t,n,r,i){return t.exec===xf?o&&!i?{done:!0,value:a.call(t,n,r)}:{done:!0,value:e.call(n,t,r)}:{done:!1}}),{REPLACE_KEEPS_$0:Dn,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Fn}))[1];Va(String.prototype,e,n[0]),Va(RegExp.prototype,i,2==t?function(e,t){return u.call(e,this,t)}:function(e){return u.call(e,this)})}r&&Ia(RegExp.prototype[i],"sham",!0)},Gn=function(e){return function(t,n){t=String(hb(t)),n=ic(n);var r,i=t.length;if(0>n||n>=i)return e?"":void 0;var o=t.charCodeAt(n);return 55296>o||56319<o||n+1===i||56320>(r=t.charCodeAt(n+1))||57343<r?e?t.charAt(n):o:e?t.slice(n,n+2):r-56320+(o-55296<<10)+65536}};Gn(!1);var Hn=Gn(!0),bj=function(e,t,n){return t+(n?Hn(e,t).length:1)},Wa=function(e){return Object(hb(e))},Lu=Math.floor,Mu="".replace,Nu=/\$([$&'`]|\d\d?|<[^>]*>)/g,Ou=/\$([$&'`]|\d\d?)/g,Pu=function(e,t,n,r,i,o){var s=n+e.length,a=r.length,u=Ou;return void 0!==i&&(i=Wa(i),u=Nu),Mu.call(o,u,(function(o,u){switch(u.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(s);case"<":o=i[u.slice(1,-1)];break;default:var c=+u;if(0===c)return o;if(c>a)return 0===(c=Lu(c/10))?o:c<=a?void 0===r[c-1]?u.charAt(1):r[c-1]+u.charAt(1):o;o=r[c-1]}return void 0===o?"":o}))},te=function(e,t){var n=e.exec;if("function"==typeof n){if("object"!=typeof(e=n.call(e,t)))throw TypeError("RegExp exec method returned something other than an Object or null");return e}if("RegExp"!==Vb(e))throw TypeError("RegExp#exec called on incompatible receiver");return xf.call(e,t)},Qu=Math.max,Ru=Math.min,Su=function(e){return void 0===e?e:String(e)};Kg("replace",2,(function(e,t,n,r){var i=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,o=r.REPLACE_KEEPS_$0,s=i?"$":"$0";return[function(n,r){var i=hb(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,i,r):t.call(String(i),n,r)},function(e,r){if(!i&&o||"string"==typeof r&&-1===r.indexOf(s)){var a=n(t,e,this,r);if(a.done)return a.value}var u=qa(e);e=String(this),(a="function"==typeof r)||(r=String(r));var c=u.global;if(c){var l=u.unicode;u.lastIndex=0}for(var f=[];;){var h=te(u,e);if(null===h)break;if(f.push(h),!c)break;""===String(h[0])&&(u.lastIndex=bj(e,za(u.lastIndex),l))}for(l="",c=u=0;c<f.length;c++){h=f[c];for(var p=String(h[0]),d=Qu(Ru(ic(h.index),e.length),0),v=[],b=1;b<h.length;b++)v.push(Su(h[b]));h=h.groups,a?(v=[p].concat(v,d,e),void 0!==h&&v.push(h),h=String(r.apply(void 0,v))):h=Pu(p,e,d,v,h,r),d>=u&&(l+=e.slice(u,d)+h,u=d+p.length)}return l+e.slice(u)}]}));var zd=Array.isArray||function(e){return"Array"==Vb(e)},ue=function(e,t,n){(t=hc(t))in e?Ma.f(e,t,Xc(0,n)):e[t]=n},Tu=oa("species"),yf=function(e){return 51<=pe||!O((function(){var t=[];return(t.constructor={})[Tu]=function(){return{foo:1}},1!==t[e](Boolean).foo}))},Uu=yf("slice"),Vu=oa("species"),Wu=[].slice,Xu=Math.max;N({target:"Array",proto:!0,forced:!Uu},{slice:function(e,t){var n=rb(this),r=za(n.length);if(e=xb(e,r),t=xb(void 0===t?r:t,r),zd(n)){var i=n.constructor;if("function"!=typeof i||i!==Array&&!zd(i.prototype)?ea(i)&&(null===(i=i[Vu])&&(i=void 0)):i=void 0,i===Array||void 0===i)return Wu.call(n,e,t)}for(i=new(void 0===i?Array:i)(Xu(t-e,0)),r=0;e<t;e++,r++)e in n&&ue(i,r,n[e]);return i.length=r,i}});var In="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Jn=!O((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})),Kn=yg("IE_PROTO"),Yu=Object.prototype,Rb=Jn?Object.getPrototypeOf:function(e){return e=Wa(e),P(e,Kn)?e[Kn]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?Yu:null},$a=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,t={};try{var n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set;n.call(t,[]),e=t instanceof Array}catch(e){}return function(t,r){if(qa(t),!ea(r)&&null!==r)throw TypeError("Can't set "+String(r)+" as a prototype");return e?n.call(t,r):t.__proto__=r,t}}():void 0),Zu=Ma.f,zf=B.Int8Array,cj=zf&&zf.prototype,Ln=B.Uint8ClampedArray,Mn=Ln&&Ln.prototype,Ac=zf&&Rb(zf),Xb=cj&&Rb(cj),Nn=Object.prototype,On=Nn.isPrototypeOf,Pn=oa("toStringTag"),dj=ie("TYPED_ARRAY_TAG"),Bc=In&&!!$a&&"Opera"!==rf(B.opera),Qn=!1,zb,lc={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},$u={BigInt64Array:8,BigUint64Array:8},Lg=function(e){return!!ea(e)&&(e=rf(e),P(lc,e)||P($u,e))};for(zb in lc)B[zb]||(Bc=!1);if((!Bc||"function"!=typeof Ac||Ac===Function.prototype)&&(Ac=function(){throw TypeError("Incorrect invocation")},Bc))for(zb in lc)B[zb]&&$a(B[zb],Ac);if((!Bc||!Xb||Xb===Nn)&&(Xb=Ac.prototype,Bc))for(zb in lc)B[zb]&&$a(B[zb].prototype,Xb);if(Bc&&Rb(Mn)!==Xb&&$a(Mn,Xb),ja&&!P(Xb,Pn))for(zb in Qn=!0,Zu(Xb,Pn,{get:function(){return ea(this)?this[dj]:void 0}}),lc)B[zb]&&Ia(B[zb],dj,zb);var Af=Bc,Rn=Qn&&dj,Aa=function(e){if(Lg(e))return e;throw TypeError("Target is not a typed array")},ve=function(e){if($a){if(On.call(Ac,e))return e}else for(var t in lc)if(P(lc,zb)){var n=B[t];if(n&&(e===n||On.call(n,e)))return e}throw TypeError("Target is not a typed array constructor")},va=function(e,t,n){if(ja){if(n)for(var r in lc){var i=B[r];i&&P(i.prototype,e)&&delete i.prototype[e]}Xb[e]&&!n||Va(Xb,e,n?t:Bc&&cj[e]||t)}},Sn=function(e,t,n){var r,i;if(ja){if($a){if(n)for(r in lc)(i=B[r])&&P(i,e)&&delete i[e];if(Ac[e]&&!n)return;try{return Va(Ac,e,n?t:Bc&&zf[e]||t)}catch(e){}}for(r in lc)!(i=B[r])||i[e]&&!n||Va(i,e,t)}},Tn=Ac,Bf=Xb,av=B.ArrayBuffer,Ad=B.Int8Array,ej=!Af||!O((function(){Ad(1)}))||!O((function(){new Ad(-1)}))||!Dg((function(e){new Ad,new Ad(null),new Ad(1.5),new Ad(e)}),!0)||O((function(){return 1!==new Ad(new av(2),1,void 0).length})),we=function(e){if(void 0===e)return 0;e=ic(e);var t=za(e);if(e!==t)throw RangeError("Wrong length or index");return t},bv=Math.abs,Cc=Math.pow,cv=Math.floor,dv=Math.log,ev=Math.LN2,fj=function(e){var t=Wa(this),n=za(t.length),r=arguments.length,i=xb(1<r?arguments[1]:void 0,n);for(n=void 0===(r=2<r?arguments[2]:void 0)?n:xb(r,n);n>i;)t[i++]=e;return t},fv=wd.f,gv=Ma.f,xe=Ua.get,Un=Ua.set,Yb=B.ArrayBuffer,Ab=Yb,Zb=B.DataView,Mg=Zb&&Zb.prototype,Vn=Object.prototype,Ng=B.RangeError,Wn=function(e,t,n){var r,i=Array(n),o=(1<<(n=8*n-t-1))-1,s=o>>1,a=23===t?Cc(2,-24)-Cc(2,-77):0,u=0>e||0===e&&0>1/e?1:0,c=0;if((e=bv(e))!=e||1/0===e){e=e!=e?1:0;var l=o}else l=cv(dv(e)/ev),1>e*(r=Cc(2,-l))&&(l--,r*=2),2<=(e=1<=l+s?e+a/r:e+a*Cc(2,1-s))*r&&(l++,r/=2),l+s>=o?(e=0,l=o):1<=l+s?(e=(e*r-1)*Cc(2,t),l+=s):(e=e*Cc(2,s-1)*Cc(2,t),l=0);for(;8<=t;i[c++]=255&e,e/=256,t-=8);for(l=l<<t|e,n+=t;0<n;i[c++]=255&l,l/=256,n-=8);return i[--c]|=128*u,i},Xn=function(e,t){var n=e.length,r=8*n-t-1,i=(1<<r)-1,o=i>>1;r-=7,--n;var s=e[n--],a=127&s;for(s>>=7;0<r;a=256*a+e[n],n--,r-=8);var u=a&(1<<-r)-1;for(a>>=-r,r+=t;0<r;u=256*u+e[n],n--,r-=8);if(0===a)a=1-o;else{if(a===i)return u?NaN:s?-1/0:1/0;u+=Cc(2,t),a-=o}return(s?-1:1)*u*Cc(2,a-t)},Yn=function(e){return[255&e]},Zn=function(e){return[255&e,e>>8&255]},$n=function(e){return[255&e,e>>8&255,e>>16&255,e>>24&255]},ao=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},hv=function(e){return Wn(e,23,4)},iv=function(e){return Wn(e,52,8)},Og=function(e,t){gv(e.prototype,t,{get:function(){return xe(this)[t]}})},Zc=function(e,t,n,r){n=we(n);var i=xe(e);if(n+t>i.byteLength)throw Ng("Wrong index");return e=xe(i.buffer).bytes,n+=i.byteOffset,t=e.slice(n,n+t),r?t:t.reverse()},$c=function(e,t,n,r,i,o){n=we(n);var s=xe(e);if(n+t>s.byteLength)throw Ng("Wrong index");for(e=xe(s.buffer).bytes,n+=s.byteOffset,r=r(+i),i=0;i<t;i++)e[n+i]=r[o?i:t-i-1]};if(In){if(!O((function(){Yb(1)}))||!O((function(){new Yb(-1)}))||O((function(){return new Yb,new Yb(1.5),new Yb(NaN),"ArrayBuffer"!=Yb.name}))){Ab=function(e){return zc(this,Ab),new Yb(we(e))};for(var jv=Ab.prototype=Yb.prototype,bo=fv(Yb),co=0,gj;bo.length>co;)(gj=bo[co++])in Ab||Ia(Ab,gj,Yb[gj]);jv.constructor=Ab}$a&&Rb(Mg)!==Vn&&$a(Mg,Vn);var Pg=new Zb(new Ab(2)),eo=Mg.setInt8;Pg.setInt8(0,2147483648),Pg.setInt8(1,2147483649),!Pg.getInt8(0)&&Pg.getInt8(1)||of(Mg,{setInt8:function(e,t){eo.call(this,e,t<<24>>24)},setUint8:function(e,t){eo.call(this,e,t<<24>>24)}},{unsafe:!0})}else Ab=function(e){zc(this,Ab,"ArrayBuffer"),e=we(e),Un(this,{bytes:fj.call(Array(e),0),byteLength:e}),ja||(this.byteLength=e)},Zb=function(e,t,n){zc(this,Zb,"DataView"),zc(e,Ab,"DataView");var r=xe(e).byteLength;if(0>(t=ic(t))||t>r)throw Ng("Wrong offset");if(t+(n=void 0===n?r-t:za(n))>r)throw Ng("Wrong length");Un(this,{buffer:e,byteLength:n,byteOffset:t}),ja||(this.buffer=e,this.byteLength=n,this.byteOffset=t)},ja&&(Og(Ab,"byteLength"),Og(Zb,"buffer"),Og(Zb,"byteLength"),Og(Zb,"byteOffset")),of(Zb.prototype,{getInt8:function(e){return Zc(this,1,e)[0]<<24>>24},getUint8:function(e){return Zc(this,1,e)[0]},getInt16:function(e){var t=Zc(this,2,e,1<arguments.length?arguments[1]:void 0);return(t[1]<<8|t[0])<<16>>16},getUint16:function(e){var t=Zc(this,2,e,1<arguments.length?arguments[1]:void 0);return t[1]<<8|t[0]},getInt32:function(e){return ao(Zc(this,4,e,1<arguments.length?arguments[1]:void 0))},getUint32:function(e){return ao(Zc(this,4,e,1<arguments.length?arguments[1]:void 0))>>>0},getFloat32:function(e){return Xn(Zc(this,4,e,1<arguments.length?arguments[1]:void 0),23)},getFloat64:function(e){return Xn(Zc(this,8,e,1<arguments.length?arguments[1]:void 0),52)},setInt8:function(e,t){$c(this,1,e,Yn,t)},setUint8:function(e,t){$c(this,1,e,Yn,t)},setInt16:function(e,t){$c(this,2,e,Zn,t,2<arguments.length?arguments[2]:void 0)},setUint16:function(e,t){$c(this,2,e,Zn,t,2<arguments.length?arguments[2]:void 0)},setInt32:function(e,t){$c(this,4,e,$n,t,2<arguments.length?arguments[2]:void 0)},setUint32:function(e,t){$c(this,4,e,$n,t,2<arguments.length?arguments[2]:void 0)},setFloat32:function(e,t){$c(this,4,e,hv,t,2<arguments.length?arguments[2]:void 0)},setFloat64:function(e,t){$c(this,8,e,iv,t,2<arguments.length?arguments[2]:void 0)}});yc(Ab,"ArrayBuffer"),yc(Zb,"DataView");var Cf={ArrayBuffer:Ab,DataView:Zb},Qg=function(e,t){if(0>(e=ic(e)))throw RangeError("The argument can't be less than 0");if(e%t)throw RangeError("Wrong offset");return e},Dc=Object.keys||function(e){return Qm(e,Ag)},kv=ja?Object.defineProperties:function(e,t){qa(e);for(var n,r=Dc(t),i=r.length,o=0;i>o;)Ma.f(e,n=r[o++],t[n]);return e},fo=yg("IE_PROTO"),hj=function(){},ij,Rg=function(){try{ij=document.domain&&new ActiveXObject("htmlfile")}catch(e){}if(ij){var e=ij;e.write("<script><\/script>"),e.close(),e=e.parentWindow.Object}else(e=xg?he.createElement("iframe"):{}).style.display="none",Ji.appendChild(e),e.src="javascript:",(e=e.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),e=e.F;for(Rg=e,e=Ag.length;e--;)delete Rg.prototype[Ag[e]];return Rg()};je[fo]=!0;var $b=Object.create||function(e,t){if(null!==e){hj.prototype=qa(e);var n=new hj;hj.prototype=null,n[fo]=e}else n=Rg();return void 0===t?n:kv(n,t)},jj=function(e){var t=Wa(e),n=arguments.length,r=1<n?arguments[1]:void 0,i=void 0!==r,o=Hi(t);if(null!=o&&!Fi(o)){var s=o.call(t),a=s.next;for(t=[];!(o=a.call(s)).done;)t.push(o.value)}for(i&&2<n&&(r=ne(r,arguments[2],2)),o=za(t.length),s=new(ve(this))(o),n=0;o>n;n++)s[n]=i?r(t[n],n):t[n];return s},lv=oa("species"),kj=function(e,t){if(zd(e)){var n=e.constructor;"function"!=typeof n||n!==Array&&!zd(n.prototype)?ea(n)&&(null===(n=n[lv])&&(n=void 0)):n=void 0}return new(void 0===n?Array:n)(0===t?0:t)},go=[].push,ad=function(e){var t=1==e,n=2==e,r=3==e,i=4==e,o=6==e,s=7==e,a=5==e||o;return function(u,c,l,f){var h=Wa(u),p=lf(h);c=ne(c,l,3),l=za(p.length);var d,v=0;for(f=f||kj,u=t?f(u,l):n||s?f(u,0):void 0;l>v;v++)if((a||v in p)&&(d=c(f=p[v],v,h),e))if(t)u[v]=d;else if(d)switch(e){case 3:return!0;case 5:return f;case 6:return v;case 2:go.call(u,f)}else switch(e){case 4:return!1;case 7:go.call(u,f)}return o?-1:r||i?i:u}},Bd=ad(0),ho=ad(1),io=ad(2),mv=ad(3),nv=ad(4),ov=ad(5),jo=ad(6);ad(7);var Sg=function(e,t,n){var r,i;return $a&&"function"==typeof(r=t.constructor)&&r!==n&&ea(i=r.prototype)&&i!==n.prototype&&$a(e,i),e},Df=Xa((function(e){var t=wd.f,n=Ua.get,r=Ua.set,i=Ma.f,o=Db.f,s=Math.round,a=B.RangeError,u=Cf.ArrayBuffer,c=Cf.DataView,l=function(e,t){var n=0,r=t.length;for(e=new(ve(e))(r);r>n;)e[n]=t[n++];return e},f=function(e,t){i(e,t,{get:function(){return n(this)[t]}})},h=function(e){var t;return e instanceof u||"ArrayBuffer"==(t=rf(e))||"SharedArrayBuffer"==t},p=function(e,t){return Lg(e)&&"symbol"!=typeof t&&t in e&&String(+t)==String(t)},d=function(e,t){return p(e,t=hc(t,!0))?Xc(2,e[t]):o(e,t)},v=function(e,t,n){return!(p(e,t=hc(t,!0))&&ea(n)&&P(n,"value"))||P(n,"get")||P(n,"set")||n.configurable||P(n,"writable")&&!n.writable||P(n,"enumerable")&&!n.enumerable?i(e,t,n):(e[t]=n.value,e)};ja?(Af||(Db.f=d,Ma.f=v,f(Bf,"buffer"),f(Bf,"byteOffset"),f(Bf,"byteLength"),f(Bf,"length")),N({target:"Object",stat:!0,forced:!Af},{getOwnPropertyDescriptor:d,defineProperty:v}),e.exports=function(e,o,f){var p=e.match(/\d+$/)[0]/8,d=e+(f?"Clamped":"")+"Array",v="get"+e,b="set"+e,g=B[d],y=g;e=y&&y.prototype;var E={},m=function(e,t){i(e,t,{get:function(){var e=n(this);return e.view[v](t*p+e.byteOffset,!0)},set:function(e){var r=n(this);f&&(e=0>(e=s(e))?0:255<e?255:255&e),r.view[b](t*p+r.byteOffset,e,!0)},enumerable:!0})};Af?ej&&(y=o((function(e,t,n,r){return zc(e,y,d),Sg(ea(t)?h(t)?void 0!==r?new g(t,Qg(n,p),r):void 0!==n?new g(t,Qg(n,p)):new g(t):Lg(t)?l(y,t):jj.call(y,t):new g(we(t)),e,y)})),$a&&$a(y,Tn),Bd(t(g),(function(e){e in y||Ia(y,e,g[e])})),y.prototype=e):(y=o((function(e,t,n,i){zc(e,y,d);var o=0,s=0;if(ea(t)){if(!h(t))return Lg(t)?l(y,t):jj.call(y,t);var f=t;if(s=Qg(n,p),t=t.byteLength,void 0===i){if(t%p)throw a("Wrong length");if(0>(i=t-s))throw a("Wrong length")}else if((i=za(i)*p)+s>t)throw a("Wrong length");t=i/p}else t=we(t),f=new u(i=t*p);for(r(e,{buffer:f,byteOffset:s,byteLength:i,length:t,view:new c(f)});o<t;)m(e,o++)})),$a&&$a(y,Tn),e=y.prototype=$b(Bf)),e.constructor!==y&&Ia(e,"constructor",y),Rn&&Ia(e,Rn,d),E[d]=y,N({global:!0,forced:y!=g,sham:!Af},E),"BYTES_PER_ELEMENT"in y||Ia(y,"BYTES_PER_ELEMENT",p),"BYTES_PER_ELEMENT"in e||Ia(e,"BYTES_PER_ELEMENT",p),qf(d)}):e.exports=function(){}}));Df("Uint8",(function(e){return function(t,n,r){return e(this,t,n,r)}}));var pv=Math.min,qv=[].copyWithin||function(e,t){var n=Wa(this),r=za(n.length),i=xb(e,r),o=xb(t,r),s=2<arguments.length?arguments[2]:void 0;for(r=pv((void 0===s?r:xb(s,r))-o,r-i),s=1,o<i&&i<o+r&&(s=-1,o+=r-1,i+=r-1);0<r--;)o in n?n[i]=n[o]:delete n[i],i+=s,o+=s;return n};va("copyWithin",(function(e,t){return qv.call(Aa(this),e,t,2<arguments.length?arguments[2]:void 0)})),va("every",(function(e){return nv(Aa(this),e,1<arguments.length?arguments[1]:void 0)})),va("fill",(function(e){return fj.apply(Aa(this),arguments)})),va("filter",(function(e){var t=io(Aa(this),e,1<arguments.length?arguments[1]:void 0),n=Yc(this,this.constructor),r=0,i=t.length;for(n=new(ve(n))(i);i>r;)n[r]=t[r++];return n})),va("find",(function(e){return ov(Aa(this),e,1<arguments.length?arguments[1]:void 0)})),va("findIndex",(function(e){return jo(Aa(this),e,1<arguments.length?arguments[1]:void 0)})),va("forEach",(function(e){Bd(Aa(this),e,1<arguments.length?arguments[1]:void 0)})),va("includes",(function(e){return Pm(Aa(this),e,1<arguments.length?arguments[1]:void 0)})),va("indexOf",(function(e){return Ei(Aa(this),e,1<arguments.length?arguments[1]:void 0)}));var lj=oa("unscopables"),mj=Array.prototype;null==mj[lj]&&Ma.f(mj,lj,{configurable:!0,value:$b(null)});var ye=function(e){mj[lj][e]=!0},nj=oa("iterator"),ko=!1,rv=function(){return this},Cd;if([].keys){var lo=[].keys();if("next"in lo){var mo=Rb(Rb(lo));mo!==Object.prototype&&(Cd=mo)}else ko=!0}(null==Cd||O((function(){var e={};return Cd[nj].call(e)!==e})))&&(Cd={}),P(Cd,nj)||Ia(Cd,nj,rv);var Tg=Cd,sv=function(){return this},tv=function(e,t,n){return t+=" Iterator",e.prototype=$b(Tg,{next:Xc(1,n)}),yc(e,t,!1),me[t]=sv,e},Ug=ko,Ef=oa("iterator"),uv=function(){return this},oj=function(e,t,n,r,i,o,s){tv(n,t,r),r=function(e){if(e===i&&h)return h;if(!Ug&&e in l)return l[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}};var a,u=t+" Iterator",c=!1,l=e.prototype,f=l[Ef]||l["@@iterator"]||i&&l[i],h=!Ug&&f||r(i),p="Array"==t&&l.entries||f;if(p&&(e=Rb(p.call(new e)),Tg!==Object.prototype&&e.next&&(Rb(e)!==Tg&&($a?$a(e,Tg):"function"!=typeof e[Ef]&&Ia(e,Ef,uv)),yc(e,u,!0))),"values"==i&&f&&"values"!==f.name&&(c=!0,h=function(){return f.call(this)}),l[Ef]!==h&&Ia(l,Ef,h),me[t]=h,i){var d={values:r("values"),keys:o?h:r("keys"),entries:r("entries")};if(s)for(a in d)!Ug&&!c&&a in l||Va(l,a,d[a]);else N({target:t,proto:!0,forced:Ug||c},d)}return d},vv=Ua.set,wv=Ua.getterFor("Array Iterator"),bd=oj(Array,"Array",(function(e,t){vv(this,{type:"Array Iterator",target:rb(e),index:0,kind:t})}),(function(){var e=wv(this),t=e.target,n=e.kind,r=e.index++;return!t||r>=t.length?(e.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:t[r],done:!1}:{value:[r,t[r]],done:!1}}),"values");me.Arguments=me.Array,ye("keys"),ye("values"),ye("entries");var no=oa("iterator"),oo=B.Uint8Array,xv=bd.values,yv=bd.keys,zv=bd.entries,pj=oo&&oo.prototype[no],po=!!pj&&("values"==pj.name||null==pj.name),qo=function(){return xv.call(Aa(this))};va("entries",(function(){return zv.call(Aa(this))})),va("keys",(function(){return yv.call(Aa(this))})),va("values",qo,!po),va(no,qo,!po);var Av=[].join;va("join",(function(e){return Av.apply(Aa(this),arguments)}));var Bv=Math.min,qj=[].lastIndexOf,ro=!!qj&&0>1/[1].lastIndexOf(1,-0),Cv=le("lastIndexOf"),Dv=ro||!Cv?function(e){if(ro)return qj.apply(this,arguments)||0;var t=rb(this),n=za(t.length),r=n-1;for(1<arguments.length&&(r=Bv(r,ic(arguments[1]))),0>r&&(r=n+r);0<=r;r--)if(r in t&&t[r]===e)return r||0;return-1}:qj;va("lastIndexOf",(function(e){return Dv.apply(Aa(this),arguments)})),va("map",(function(e){return ho(Aa(this),e,1<arguments.length?arguments[1]:void 0,(function(e,t){return new(ve(Yc(e,e.constructor)))(t)}))}));var so=function(e){return function(t,n,r,i){yb(n),t=Wa(t);var o=lf(t),s=za(t.length),a=e?s-1:0,u=e?-1:1;if(2>r)for(;;){if(a in o){i=o[a],a+=u;break}if(a+=u,e?0>a:s<=a)throw TypeError("Reduce of empty array with no initial value")}for(;e?0<=a:s>a;a+=u)a in o&&(i=n(i,o[a],a,t));return i}},to=so(!1),Ev=so(!0);va("reduce",(function(e){return to(Aa(this),e,arguments.length,1<arguments.length?arguments[1]:void 0)})),va("reduceRight",(function(e){return Ev(Aa(this),e,arguments.length,1<arguments.length?arguments[1]:void 0)}));var Fv=Math.floor;va("reverse",(function(){for(var e,t=Aa(this).length,n=Fv(t/2),r=0;r<n;)e=this[r],this[r++]=this[--t],this[t]=e;return this}));var Gv=O((function(){new Int8Array(1).set({})}));va("set",(function(e){Aa(this);var t=Qg(1<arguments.length?arguments[1]:void 0,1),n=this.length,r=Wa(e),i=za(r.length),o=0;if(i+t>n)throw RangeError("Wrong length");for(;o<i;)this[t+o]=r[o++]}),Gv);var Hv=[].slice,Iv=O((function(){new Int8Array(1).slice()}));va("slice",(function(e,t){e=Hv.call(Aa(this),e,t);var n=Yc(this,this.constructor);t=0;var r=e.length;for(n=new(ve(n))(r);r>t;)n[t]=e[t++];return n}),Iv),va("some",(function(e){return mv(Aa(this),e,1<arguments.length?arguments[1]:void 0)}));var Jv=[].sort;va("sort",(function(e){return Jv.call(Aa(this),e)})),va("subarray",(function(e,t){var n=Aa(this),r=n.length;return e=xb(e,r),new(Yc(n,n.constructor))(n.buffer,n.byteOffset+e*n.BYTES_PER_ELEMENT,za((void 0===t?r:xb(t,r))-e))}));var Vg=B.Int8Array,uo=[].toLocaleString,Kv=[].slice,Lv=!!Vg&&O((function(){uo.call(new Vg(1))})),Mv=O((function(){return[1,2].toLocaleString()!=new Vg([1,2]).toLocaleString()}))||!O((function(){Vg.prototype.toLocaleString.call([1,2])}));va("toLocaleString",(function(){return uo.apply(Lv?Kv.call(Aa(this)):Aa(this),arguments)}),Mv);var vo=B.Uint8Array,Nv=vo&&vo.prototype||{},Wg=[].toString,Ov=[].join;O((function(){Wg.call({})}))&&(Wg=function(){return Ov.call(this)}),va("toString",Wg,Nv.toString!=Wg);var rj=Cf.ArrayBuffer,wo=Cf.DataView,xo=rj.prototype.slice,Pv=O((function(){return!new rj(2).slice(1,void 0).byteLength}));N({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:Pv},{slice:function(e,t){if(void 0!==xo&&void 0===t)return xo.call(qa(this),e);var n=qa(this).byteLength;e=xb(e,n),t=xb(void 0===t?n:t,n),n=new(Yc(this,rj))(za(t-e));for(var r=new wo(this),i=new wo(n),o=0;e<t;)i.setUint8(o++,r.getUint8(e++));return n}});var yo=Cf.ArrayBuffer;N({global:!0,forced:B.ArrayBuffer!==yo},{ArrayBuffer:yo}),qf("ArrayBuffer");var Qv=Ma.f,sj=Function.prototype,Rv=sj.toString,Sv=/^\s*function ([^ (]*)/;!ja||"name"in sj||Qv(sj,"name",{configurable:!0,get:function(){try{return Rv.call(this).match(Sv)[1]}catch(e){return""}}});var zo=RegExp.prototype,Ao=zo.toString,Tv=O((function(){return"/a/b"!=Ao.call({source:"a",flags:"b"})})),Uv="toString"!=Ao.name;(Tv||Uv)&&Va(RegExp.prototype,"toString",(function(){var e=qa(this),t=String(e.source),n=e.flags;return"/"+t+"/"+(e=String(void 0===n&&e instanceof RegExp&&!("flags"in zo)?Zi.call(e):n))}),{unsafe:!0});var Vv=yf("splice"),Wv=Math.max,Xv=Math.min;N({target:"Array",proto:!0,forced:!Vv},{splice:function(e,t){var n,r,i=Wa(this),o=za(i.length),s=xb(e,o),a=arguments.length;if(0===a?a=n=0:1===a?(a=0,n=o-s):(a-=2,n=Xv(Wv(ic(t),0),o-s)),9007199254740991<o+a-n)throw TypeError("Maximum allowed length exceeded");var u=kj(i,n);for(r=0;r<n;r++){var c=s+r;c in i&&ue(u,r,i[c])}if(u.length=n,a<n){for(r=s;r<o-n;r++){var l=r+a;(c=r+n)in i?i[l]=i[c]:delete i[l]}for(r=o;r>o-n+a;r--)delete i[r-1]}else if(a>n)for(r=o-n;r>s;r--)l=r+a-1,(c=r+n-1)in i?i[l]=i[c]:delete i[l];for(r=0;r<a;r++)i[r+s]=arguments[r+2];return i.length=o-n+a,u}});var Yv=yf("filter");N({target:"Array",proto:!0,forced:!Yv},{filter:function(e){return io(this,e,1<arguments.length?arguments[1]:void 0)}});var Zv=Ua.set,$v=Ua.getterFor("String Iterator");oj(String,"String",(function(e){Zv(this,{type:"String Iterator",string:String(e),index:0})}),(function(){var e=$v(this),t=e.string,n=e.index;return n>=t.length?{value:void 0,done:!0}:(t=Hn(t,n),e.index+=t.length,{value:t,done:!1})}));var tj={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},uj=oa("iterator"),Bo=oa("toStringTag"),vj=bd.values,Xg;for(Xg in tj){var Co=B[Xg],Ec=Co&&Co.prototype;if(Ec){if(Ec[uj]!==vj)try{Ia(Ec,uj,vj)}catch(c){Ec[uj]=vj}if(Ec[Bo]||Ia(Ec,Bo,Xg),tj[Xg])for(var ze in bd)if(Ec[ze]!==bd[ze])try{Ia(Ec,ze,bd[ze])}catch(c){Ec[ze]=bd[ze]}}}var Do=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t};Kg("search",1,(function(e,t,n){return[function(t){var n=hb(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;e=qa(e);var i=String(this);return r=e.lastIndex,Do(r,0)||(e.lastIndex=0),i=te(e,i),Do(e.lastIndex,r)||(e.lastIndex=r),null===i?-1:i.index}]})),Xa((function(e){!function(t,n){e.exports?e.exports=n(t):n(t)}("undefined"!=typeof self?self:Ta,(function(e){function t(e){return btoa(e).replace(/=+$/,"").replace(/\+/g,"-").replace(/\//g,"_")}function n(e){return e=(e+="===").slice(0,-e.length%4),atob(e.replace(/-/g,"+").replace(/_/g,"/"))}function r(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function i(e){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),String.fromCharCode.apply(String,e)}function o(e){var t={name:(e.name||e||"").toUpperCase().replace("V","v")};switch(t.name){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;case"AES-CBC":case"AES-GCM":case"AES-KW":e.length&&(t.length=e.length);break;case"HMAC":e.hash&&(t.hash=o(e.hash)),e.length&&(t.length=e.length);break;case"RSAES-PKCS1-v1_5":e.publicExponent&&(t.publicExponent=new Uint8Array(e.publicExponent)),e.modulusLength&&(t.modulusLength=e.modulusLength);break;case"RSASSA-PKCS1-v1_5":case"RSA-OAEP":e.hash&&(t.hash=o(e.hash)),e.publicExponent&&(t.publicExponent=new Uint8Array(e.publicExponent)),e.modulusLength&&(t.modulusLength=e.modulusLength);break;default:throw new SyntaxError("Bad algorithm name")}return t}function s(e){return{HMAC:{"SHA-1":"HS1","SHA-256":"HS256","SHA-384":"HS384","SHA-512":"HS512"},"RSASSA-PKCS1-v1_5":{"SHA-1":"RS1","SHA-256":"RS256","SHA-384":"RS384","SHA-512":"RS512"},"RSAES-PKCS1-v1_5":{"":"RSA1_5"},"RSA-OAEP":{"SHA-1":"RSA-OAEP","SHA-256":"RSA-OAEP-256"},"AES-KW":{128:"A128KW",192:"A192KW",256:"A256KW"},"AES-GCM":{128:"A128GCM",192:"A192GCM",256:"A256GCM"},"AES-CBC":{128:"A128CBC",192:"A192CBC",256:"A256CBC"}}[e.name][(e.hash||{}).name||e.length||""]}function a(e){(e instanceof ArrayBuffer||e instanceof Uint8Array)&&(e=JSON.parse(decodeURIComponent(escape(i(e)))));var t={kty:e.kty,alg:e.alg,ext:e.ext||e.extractable};switch(t.kty){case"oct":t.k=e.k;case"RSA":"n e d p q dp dq qi oth".split(" ").forEach((function(n){n in e&&(t[n]=e[n])}));break;default:throw new TypeError("Unsupported key type")}return t}function u(e){return e=a(e),m&&(e.extractable=e.ext,delete e.ext),r(unescape(encodeURIComponent(JSON.stringify(e)))).buffer}function c(e){var n=l(e),r=!1;switch(2<n.length&&(r=!0,n.shift()),e={ext:!0},n[0][0]){case"1.2.840.113549.1.1.1":var o="n e d p q dp dq qi".split(" ");for(n=l(n[1]),r&&n.shift(),r=0;r<n.length;r++)n[r][0]||(n[r]=n[r].subarray(1)),e[o[r]]=t(i(n[r]));e.kty="RSA";break;default:throw new TypeError("Unsupported key type")}return e}function l(e,t){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),t||(t={pos:0,end:e.length}),2>t.end-t.pos||t.end>e.length)throw new RangeError("Malformed DER");var n=e[t.pos++],r=e[t.pos++];if(128<=r){if(r&=127,t.end-t.pos<r)throw new RangeError("Malformed DER");for(var o=0;r--;)o<<=8,o|=e[t.pos++];r=o}if(t.end-t.pos<r)throw new RangeError("Malformed DER");switch(n){case 2:n=e.subarray(t.pos,t.pos+=r);break;case 3:if(e[t.pos++])throw Error("Unsupported bit string");r--;case 4:n=new Uint8Array(e.subarray(t.pos,t.pos+=r)).buffer;break;case 5:n=null;break;case 6:if(!((e=btoa(i(e.subarray(t.pos,t.pos+=r))))in _))throw Error("Unsupported OBJECT ID "+e);n=_[e];break;case 48:for(n=[],r=t.pos+r;t.pos<r;)n.push(l(e,t));break;default:throw Error("Unsupported DER tag 0x"+n.toString(16))}return n}function f(e,t){t||(t=[]);var n=t.length+2;if(t.push(0,0),e instanceof Uint8Array)for(var i=2,o=e.length,s=0;s<o;s++)t.push(e[s]);else if(e instanceof ArrayBuffer)for(i=4,o=e.byteLength,e=new Uint8Array(e),s=0;s<o;s++)t.push(e[s]);else if(null===e)i=5,o=0;else if("string"==typeof e&&e in O)for(i=6,o=(e=r(atob(O[e]))).length,s=0;s<o;s++)t.push(e[s]);else if(e instanceof Array){for(s=0;s<e.length;s++)f(e[s],t);i=48,o=t.length-n}else{if(!("object"===R(e)&&3===e.tag&&e.value instanceof ArrayBuffer))throw Error("Unsupported DER value "+e);for(i=3,o=(e=new Uint8Array(e.value)).byteLength,t.push(0),s=0;s<o;s++)t.push(e[s]);o++}if(128<=o){for(s=o,o=4,t.splice(n,0,s>>24&255,s>>16&255,s>>8&255,255&s);1<o&&!(s>>24);)s<<=8,o--;4>o&&t.splice(n,4-o),o|=128}return t.splice(n-2,2,i,o),t}function h(e,t,n,r){Object.defineProperties(this,{_key:{value:e},type:{value:e.type,enumerable:!0},extractable:{value:void 0===n?e.extractable:n,enumerable:!0},algorithm:{value:void 0===t?e.algorithm:t,enumerable:!0},usages:{value:void 0===r?e.usages:r,enumerable:!0}})}function p(e){return"verify"===e||"encrypt"===e||"wrapKey"===e}function d(e){return"sign"===e||"decrypt"===e||"unwrapKey"===e}if("function"!=typeof Promise)throw"Promise support required";var v=e.crypto||e.msCrypto;if(v){var b=v.subtle||v.webkitSubtle;if(b){var g=e.Crypto||v.constructor||Object,y=e.SubtleCrypto||b.constructor||Object;e.CryptoKey||e.Key;var E=-1<e.navigator.userAgent.indexOf("Edge/"),m=!!e.msCrypto&&!E,w=!v.subtle&&!!v.webkitSubtle;if(m||w){var _={KoZIhvcNAQEB:"1.2.840.113549.1.1.1"},O={"1.2.840.113549.1.1.1":"KoZIhvcNAQEB"};if(["generateKey","importKey","unwrapKey"].forEach((function(e){var t=b[e];b[e]=function(i,l,f){var g=[].slice.call(arguments);switch(e){case"generateKey":var y=o(i),E=l,_=f;break;case"importKey":y=o(f),E=g[3],_=g[4],"jwk"===i&&((l=a(l)).alg||(l.alg=s(y)),l.key_ops||(l.key_ops="oct"!==l.kty?"d"in l?_.filter(d):_.filter(p):_.slice()),g[1]=u(l));break;case"unwrapKey":y=g[4],E=g[5],_=g[6],g[2]=f._key}if("generateKey"===e&&"HMAC"===y.name&&y.hash)return y.length=y.length||{"SHA-1":512,"SHA-256":512,"SHA-384":1024,"SHA-512":1024}[y.hash.name],b.importKey("raw",v.getRandomValues(new Uint8Array(y.length+7>>3)),y,E,_);if(w&&"generateKey"===e&&"RSASSA-PKCS1-v1_5"===y.name&&(!y.modulusLength||2048<=y.modulusLength))return(i=o(i)).name="RSAES-PKCS1-v1_5",delete i.hash,b.generateKey(i,!0,["encrypt","decrypt"]).then((function(e){return Promise.all([b.exportKey("jwk",e.publicKey),b.exportKey("jwk",e.privateKey)])})).then((function(e){return e[0].alg=e[1].alg=s(y),e[0].key_ops=_.filter(p),e[1].key_ops=_.filter(d),Promise.all([b.importKey("jwk",e[0],y,!0,e[0].key_ops),b.importKey("jwk",e[1],y,E,e[1].key_ops)])})).then((function(e){return{publicKey:e[0],privateKey:e[1]}}));if((w||m&&"SHA-1"===(y.hash||{}).name)&&"importKey"===e&&"jwk"===i&&"HMAC"===y.name&&"oct"===l.kty)return b.importKey("raw",r(n(l.k)),f,g[3],g[4]);if(w&&"importKey"===e&&("spki"===i||"pkcs8"===i))return b.importKey("jwk",c(l),f,g[3],g[4]);if(m&&"unwrapKey"===e)return b.decrypt(g[3],f,l).then((function(e){return b.importKey(i,e,g[4],g[5],g[6])}));try{var O=t.apply(b,g)}catch(e){return Promise.reject(e)}return m&&(O=new Promise((function(e,t){O.onabort=O.onerror=function(e){t(e)},O.oncomplete=function(t){e(t.target.result)}}))),O=O.then((function(e){return"HMAC"!==y.name||y.length||(y.length=8*e.algorithm.length),0==y.name.search("RSA")&&(y.modulusLength||(y.modulusLength=(e.publicKey||e).algorithm.modulusLength),y.publicExponent||(y.publicExponent=(e.publicKey||e).algorithm.publicExponent)),e.publicKey&&e.privateKey?{publicKey:new h(e.publicKey,y,E,_.filter(p)),privateKey:new h(e.privateKey,y,E,_.filter(d))}:new h(e,y,E,_)}))}})),["exportKey","wrapKey"].forEach((function(e){var o=b[e];b[e]=function(u,c,l){var h=[].slice.call(arguments);switch(e){case"exportKey":h[1]=c._key;break;case"wrapKey":h[1]=c._key,h[2]=l._key}if((w||m&&"SHA-1"===(c.algorithm.hash||{}).name)&&"exportKey"===e&&"jwk"===u&&"HMAC"===c.algorithm.name&&(h[0]="raw"),!w||"exportKey"!==e||"spki"!==u&&"pkcs8"!==u||(h[0]="jwk"),m&&"wrapKey"===e)return b.exportKey(u,c).then((function(e){return"jwk"===u&&(e=r(unescape(encodeURIComponent(JSON.stringify(a(e)))))),b.encrypt(h[3],l,e)}));try{var v=o.apply(b,h)}catch(e){return Promise.reject(e)}return m&&(v=new Promise((function(e,t){v.onabort=v.onerror=function(e){t(e)},v.oncomplete=function(t){e(t.target.result)}}))),"exportKey"===e&&"jwk"===u&&(v=v.then((function(e){return(w||m&&"SHA-1"===(c.algorithm.hash||{}).name)&&"HMAC"===c.algorithm.name?{kty:"oct",alg:s(c.algorithm),key_ops:c.usages.slice(),ext:!0,k:t(i(e))}:((e=a(e)).alg||(e.alg=s(c.algorithm)),e.key_ops||(e.key_ops="public"===c.type?c.usages.filter(p):"private"===c.type?c.usages.filter(d):c.usages.slice()),e)}))),!w||"exportKey"!==e||"spki"!==u&&"pkcs8"!==u||(v=v.then((function(e){var t=[["",null]],i=!1;switch((e=a(e)).kty){case"RSA":for(var o="n e d p q dp dq qi".split(" "),s=[],u=0;u<o.length&&o[u]in e;u++){var c=s[u]=r(n(e[o[u]]));128&c[0]&&(s[u]=new Uint8Array(c.length+1),s[u].set(c,1))}2<s.length&&(i=!0,s.unshift(new Uint8Array([0]))),t[0][0]="1.2.840.113549.1.1.1";break;default:throw new TypeError("Unsupported key type")}return t.push(new Uint8Array(f(s)).buffer),i?t.unshift(new Uint8Array([0])):t[1]={tag:3,value:t[1]},new Uint8Array(f(t)).buffer}))),v}})),["encrypt","decrypt","sign","verify"].forEach((function(e){var t=b[e];b[e]=function(n,r,i,s){if(m&&(!i.byteLength||s&&!s.byteLength))throw Error("Empy input is not allowed");var a=[].slice.call(arguments),u=o(n);!m||"sign"!==e&&"verify"!==e||"RSASSA-PKCS1-v1_5"!==n&&"HMAC"!==n||(a[0]={name:n}),m&&r.algorithm.hash&&(a[0].hash=a[0].hash||r.algorithm.hash),m&&"decrypt"===e&&"AES-GCM"===u.name&&(u=n.tagLength>>3,a[2]=(i.buffer||i).slice(0,i.byteLength-u),n.tag=(i.buffer||i).slice(i.byteLength-u)),a[1]=r._key;try{var c=t.apply(b,a)}catch(e){return Promise.reject(e)}return m&&(c=new Promise((function(t,n){c.onabort=c.onerror=function(e){n(e)},c.oncomplete=function(n){if(n=n.target.result,"encrypt"===e&&n instanceof AesGcmEncryptResult){var r=n.ciphertext,i=n.tag;(n=new Uint8Array(r.byteLength+i.byteLength)).set(new Uint8Array(r),0),n.set(new Uint8Array(i),r.byteLength),n=n.buffer}t(n)}}))),c}})),m){var I=b.digest;b.digest=function(e,t){if(!t.byteLength)throw Error("Empy input is not allowed");try{var n=I.call(b,e,t)}catch(e){return Promise.reject(e)}return n=new Promise((function(e,t){n.onabort=n.onerror=function(e){t(e)},n.oncomplete=function(t){e(t.target.result)}}))},e.crypto=Object.create(v,{getRandomValues:{value:function(e){return v.getRandomValues(e)}},subtle:{value:b}}),e.CryptoKey=h}w&&(v.subtle=b,e.Crypto=g,e.SubtleCrypto=y,e.CryptoKey=h)}}}}))}));var aw=oa("match"),wj=function(e){var t;return ea(e)&&(void 0!==(t=e[aw])?!!t:"RegExp"==Vb(e))},bw=[].push,cw=Math.min,Ae=!O((function(){return!RegExp(4294967295,"y")}));Kg("split",2,(function(e,t,n){var r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(e,n){var r=String(hb(this));if(0===(n=void 0===n?4294967295:n>>>0))return[];if(void 0===e)return[r];if(!wj(e))return t.call(r,e,n);var i,o,s,a=[],u=0;for(e=new RegExp(e.source,(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":"")+"g");(i=xf.call(e,r))&&!((o=e.lastIndex)>u&&(a.push(r.slice(u,i.index)),1<i.length&&i.index<r.length&&bw.apply(a,i.slice(1)),s=i[0].length,u=o,a.length>=n));)e.lastIndex===i.index&&e.lastIndex++;return u===r.length?(s||!e.test(""))&&a.push(""):a.push(r.slice(u)),a.length>n?a.slice(0,n):a}:"0".split(void 0,0).length?function(e,n){return void 0===e&&0===n?[]:t.call(this,e,n)}:t;return[function(t,n){var i=hb(this),o=null==t?void 0:t[e];return void 0!==o?o.call(t,i,n):r.call(String(i),t,n)},function(e,i){var o=n(r,e,this,i,r!==t);if(o.done)return o.value;var s=qa(e);e=String(this);var a=Yc(s,RegExp);if(o=s.unicode,s=new a(Ae?s:"^(?:"+s.source+")",(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(Ae?"y":"g")),0===(i=void 0===i?4294967295:i>>>0))return[];if(0===e.length)return null===te(s,e)?[e]:[];var u=0,c=0;for(a=[];c<e.length;){s.lastIndex=Ae?c:0;var l,f=te(s,Ae?e:e.slice(c));if(null===f||(l=cw(za(s.lastIndex+(Ae?0:c)),e.length))===u)c=bj(e,c,o);else{if(a.push(e.slice(u,c)),a.length===i)return a;for(u=1;u<=f.length-1;u++)if(a.push(f[u]),a.length===i)return a;c=u=l}}return a.push(e.slice(u)),a}]}),!Ae),function(e){e.console||(e.console={}),e=e.console;for(var t,n=function(){},r=["memory"],i="assert clear count debug dir dirxml error exception group groupCollapsed groupEnd info log markTimeline profile profiles profileEnd show table time timeEnd timeline timelineEnd timeStamp trace warn".split(" ");t=r.pop();)e[t]||(e[t]={});for(;t=i.pop();)e[t]||(e[t]=n)}("undefined"==typeof window?Ta:window),N({target:"Object",stat:!0},{setPrototypeOf:$a});var dw=O((function(){Rb(1)}));N({target:"Object",stat:!0,forced:dw,sham:!Jn},{getPrototypeOf:function(e){return Rb(Wa(e))}});var Eo=[].slice,xj={},ew=Function.bind||function(e){var t=yb(this),n=Eo.call(arguments,1),r=function(){var i=n.concat(Eo.call(arguments));if(this instanceof r){var o=i.length;if(!(o in xj)){for(var s=[],a=0;a<o;a++)s[a]="a["+a+"]";xj[o]=Function("C,a","return new C("+s.join(",")+")")}i=xj[o](t,i)}else i=t.apply(e,i);return i};return ea(t.prototype)&&(r.prototype=t.prototype),r},yj=Wb("Reflect","construct"),Fo=O((function(){function e(){}return!(yj((function(){}),[],e)instanceof e)})),Go=!O((function(){yj((function(){}))})),Ho=Fo||Go;N({target:"Reflect",stat:!0,forced:Ho,sham:Ho},{construct:function(e,t){yb(e),qa(t);var n=3>arguments.length?e:yb(arguments[2]);if(Go&&!Fo)return yj(e,t,n);if(e==n){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}return(n=[null]).push.apply(n,t),new(ew.apply(e,n))}n=n.prototype,n=$b(ea(n)?n:Object.prototype);var r=Function.apply.call(e,n,t);return ea(r)?r:n}}),N({target:"Reflect",stat:!0},{get:el});var Io=Db.f,fw=O((function(){Io(1)}));N({target:"Object",stat:!0,forced:!ja||fw,sham:!ja},{getOwnPropertyDescriptor:function(e,t){return Io(rb(e),t)}});var Jo=wd.f,gw={}.toString,Ko="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],zj=function(e){if(Ko&&"[object Window]"==gw.call(e))try{var t=Jo(e)}catch(e){t=Ko.slice()}else t=Jo(rb(e));return t},Lo={f:oa},hw=Ma.f,Yg=function(e){var t=B.Symbol||(B.Symbol={});P(t,e)||hw(t,e,{value:Lo.f(e)})},tb=yg("hidden"),Mo=oa("toPrimitive"),iw=Ua.set,No=Ua.getterFor("Symbol"),Kb=Object.prototype,ub=B.Symbol,Ff=Wb("JSON","stringify"),Oo=Db.f,cd=Ma.f,Po=zj,jw=kf,Fc=vd("symbols"),Gf=vd("op-symbols"),Aj=vd("string-to-symbol-registry"),Bj=vd("symbol-to-string-registry"),kw=vd("wks"),Cj=B.QObject,Dj=!Cj||!Cj.prototype||!Cj.prototype.findChild,Ej=ja&&O((function(){return 7!=$b(cd({},"a",{get:function(){return cd(this,"a",{value:7}).a}})).a}))?function(e,t,n){var r=Oo(Kb,t);r&&delete Kb[t],cd(e,t,n),r&&e!==Kb&&cd(Kb,t,r)}:cd,Fj=function(e,t){var n=Fc[e]=$b(ub.prototype);return iw(n,{type:"Symbol",tag:e,description:t}),ja||(n.description=t),n},Gj=Tm?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof ub},Zg=function(e,t,n){return e===Kb&&Zg(Gf,t,n),qa(e),t=hc(t,!0),qa(n),P(Fc,t)?(n.enumerable?(P(e,tb)&&e[tb][t]&&(e[tb][t]=!1),n=$b(n,{enumerable:Xc(0,!1)})):(P(e,tb)||cd(e,tb,Xc(1,{})),e[tb][t]=!0),Ej(e,t,n)):cd(e,t,n)},Qo=function(e,t){qa(e);var n=rb(t);return t=Dc(n).concat(Hj(n)),Bd(t,(function(t){ja&&!Ij.call(n,t)||Zg(e,t,n[t])})),e},Ij=function(e){e=hc(e,!0);var t=jw.call(this,e);return!(this===Kb&&P(Fc,e)&&!P(Gf,e))&&(!(t||!P(this,e)||!P(Fc,e)||P(this,tb)&&this[tb][e])||t)},Ro=function(e,t){if(e=rb(e),t=hc(t,!0),e!==Kb||!P(Fc,t)||P(Gf,t)){var n=Oo(e,t);return!n||!P(Fc,t)||P(e,tb)&&e[tb][t]||(n.enumerable=!0),n}},So=function(e){e=Po(rb(e));var t=[];return Bd(e,(function(e){P(Fc,e)||P(je,e)||t.push(e)})),t},Hj=function(e){var t=e===Kb;e=Po(t?Gf:rb(e));var n=[];return Bd(e,(function(e){!P(Fc,e)||t&&!P(Kb,e)||n.push(Fc[e])})),n};if(xc||(ub=function(){if(this instanceof ub)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=ie(e),n=function(e){this===Kb&&n.call(Gf,e),P(this,tb)&&P(this[tb],t)&&(this[tb][t]=!1),Ej(this,t,Xc(1,e))};return ja&&Dj&&Ej(Kb,t,{configurable:!0,set:n}),Fj(t,e)},Va(ub.prototype,"toString",(function(){return No(this).tag})),Va(ub,"withoutSetter",(function(e){return Fj(ie(e),e)})),kf=Ij,Ma.f=Zg,Db.f=Ro,wd.f=zj=So,nf.f=Hj,Lo.f=function(e){return Fj(oa(e),e)},ja&&(cd(ub.prototype,"description",{configurable:!0,get:function(){return No(this).description}}),Va(Kb,"propertyIsEnumerable",Ij,{unsafe:!0}))),N({global:!0,wrap:!0,forced:!xc,sham:!xc},{Symbol:ub}),Bd(Dc(kw),(function(e){Yg(e)})),N({target:"Symbol",stat:!0,forced:!xc},{for:function(e){if(e=String(e),P(Aj,e))return Aj[e];var t=ub(e);return Aj[e]=t,Bj[t]=e,t},keyFor:function(e){if(!Gj(e))throw TypeError(e+" is not a symbol");if(P(Bj,e))return Bj[e]},useSetter:function(){Dj=!0},useSimple:function(){Dj=!1}}),N({target:"Object",stat:!0,forced:!xc,sham:!ja},{create:function(e,t){return void 0===t?$b(e):Qo($b(e),t)},defineProperty:Zg,defineProperties:Qo,getOwnPropertyDescriptor:Ro}),N({target:"Object",stat:!0,forced:!xc},{getOwnPropertyNames:So,getOwnPropertySymbols:Hj}),N({target:"Object",stat:!0,forced:O((function(){nf.f(1)}))},{getOwnPropertySymbols:function(e){return nf.f(Wa(e))}}),Ff){var lw=!xc||O((function(){var e=ub();return"[null]"!=Ff([e])||"{}"!=Ff({a:e})||"{}"!=Ff(Object(e))}));N({target:"JSON",stat:!0,forced:lw},{stringify:function(e,t,n){for(var r,i=[e],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=t,(ea(t)||void 0!==e)&&!Gj(e))return zd(t)||(t=function(e,t){if("function"==typeof r&&(t=r.call(this,e,t)),!Gj(t))return t}),i[1]=t,Ff.apply(null,i)}})}ub.prototype[Mo]||Ia(ub.prototype,Mo,ub.prototype.valueOf),yc(ub,"Symbol"),je[tb]=!0;var mw=Ma.f,Gc=B.Symbol;if(ja&&"function"==typeof Gc&&(!("description"in Gc.prototype)||void 0!==Gc().description)){var To={},Hf=function(){var e=1>arguments.length||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof Hf?new Gc(e):void 0===e?Gc():Gc(e);return""===e&&(To[t]=!0),t};Sm(Hf,Gc);var Jj=Hf.prototype=Gc.prototype;Jj.constructor=Hf;var nw=Jj.toString,ow="Symbol(test)"==String(Gc("test")),pw=/^Symbol\((.*)\)[^)]+$/;mw(Jj,"description",{configurable:!0,get:function(){var e=ea(this)?this.valueOf():this,t=nw.call(e);return P(To,e)?"":""===(e=ow?t.slice(7,-1):t.replace(pw,"$1"))?void 0:e}}),N({global:!0,forced:!0},{Symbol:Hf})}Yg("toStringTag"),yc(Math,"Math",!0),yc(B.JSON,"JSON",!0),function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n=i(e);if(t){var r=i(this).constructor;n=Reflect.construct(n,arguments,r)}else n=n.apply(this,arguments);return n=!n||"object"!==R(n)&&"function"!=typeof n?s(this):n}}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););if(e)return(t=Object.getOwnPropertyDescriptor(e,t)).get?t.get.call(n):t.value})(e,t,n||e)}var c=function(){function t(){e(this,t),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return n(t,[{key:"addEventListener",value:function(e,t,n){e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push({callback:t,options:n})}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners)for(var n=0,r=(e=this.listeners[e]).length;n<r;n++)if(e[n].callback===t){e.splice(n,1);break}}},{key:"dispatchEvent",value:function(e){if(e.type in this.listeners){for(var t=this.listeners[e.type].slice(),n=0,r=t.length;n<r;n++){var i=t[n];try{i.callback.call(this,e)}catch(e){Promise.resolve().then((function(){throw e}))}i.options&&i.options.once&&this.removeEventListener(e.type,i.callback)}return!e.defaultPrevented}}}]),t}(),l=function(t){function o(){e(this,o);var t=l.call(this);return t.listeners||c.call(s(t)),Object.defineProperty(s(t),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(s(t),"onabort",{value:null,writable:!0,configurable:!0}),t}r(o,t);var l=a(o);return n(o,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(e){"abort"===e.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,e)),u(i(o.prototype),"dispatchEvent",this).call(this,e)}}]),o}(c),f=function(){function t(){e(this,t),Object.defineProperty(this,"signal",{value:new l,writable:!0,configurable:!0})}return n(t,[{key:"abort",value:function(){try{var e=new Event("abort")}catch(t){"undefined"!=typeof document?document.createEvent?(e=document.createEvent("Event")).initEvent("abort",!1,!1):(e=document.createEventObject()).type="abort":e={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(e)}},{key:"toString",value:function(){return"[object AbortController]"}}]),t}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(f.prototype[Symbol.toStringTag]="AbortController",l.prototype[Symbol.toStringTag]="AbortSignal"),function(e){if(e.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL){console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill");var t=!0}else t="function"==typeof e.Request&&!e.Request.prototype.hasOwnProperty("signal")||!e.AbortController;t&&(e.AbortController=f,e.AbortSignal=l)}("undefined"!=typeof self?self:Ta)}();var qw=Math.floor,rw=Math.log,sw=Math.LOG2E;N({target:"Math",stat:!0},{clz32:function(e){return(e>>>=0)?31-qw(rw(e+.5)*sw):32}});var tw=Math.log,uw=Math.LN2,Or=Math.clz32||function(e){return 31-tw(e>>>0)/uw|0},ld=String.fromCharCode,Uo={}.toString,Kj=window.Uint8Array,Lj=Kj||Array,vw=Uo.call((window.ArrayBuffer||Lj).prototype),Mj;fl.prototype.decode=function(e){if(e=e&&e.buffer||e,Uo.call(e)!==vw)throw Error("Failed to execute 'decode' on 'TextDecoder': The provided value is not of type '(ArrayBuffer or ArrayBufferView)'");for(var t="",n=0,r=0|(e=Kj?new Lj(e):e).length;n<r;n=n+32768|0)t+=ld.apply(0,e[Kj?"slice":"subarray"](n,n+32768|0));return t.replace(/[\xc0-\xff][\x80-\xbf]*/g,Nr)},window.TextDecoder||(window.TextDecoder=fl),gl.prototype.encode=function(e){for(var t=0|(e=void 0===e?"":(""+e).replace(/[\x80-\uD7ff\uDC00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]?/g,Pr)).length,n=new Lj(t),r=0;r<t;r=r+1|0)n[r]=e.charCodeAt(r);return n},window.TextEncoder||(window.TextEncoder=gl),function(e){var t,n,r,i,o,s,a,u,c,l;!function(e){e.LOGIN="LOGIN",e.LOGIN_SUCCESS="LOGIN_SUCCESS",e.LOGIN_FAILURE="LOGIN_FAILURE",e.LOGIN_TIMEOUT="LOGIN_TIMEOUT",e.INTERRUPTED="INTERRUPTED",e.LOGOUT="LOGOUT",e.BANNED_BY_SERVER="BANNED_BY_SERVER",e.REMOTE_LOGIN="REMOTE_LOGIN"}(t||(t={})),e.ConnectionChangeReason=t,function(e){e.DISCONNECTED="DISCONNECTED",e.CONNECTING="CONNECTING",e.CONNECTED="CONNECTED",e.RECONNECTING="RECONNECTING",e.ABORTED="ABORTED"}(n||(n={})),e.ConnectionState=n,function(e){e.IDLE="IDLE",e.SENT_TO_REMOTE="SENT_TO_REMOTE",e.RECEIVED_BY_REMOTE="RECEIVED_BY_REMOTE",e.ACCEPTED_BY_REMOTE="ACCEPTED_BY_REMOTE",e.REFUSED_BY_REMOTE="REFUSED_BY_REMOTE",e.CANCELED="CANCELED",e.FAILURE="FAILURE"}(r||(r={})),e.LocalInvitationState=r,function(e){e.INVITATION_RECEIVED="INVITATION_RECEIVED",e.ACCEPT_SENT_TO_LOCAL="ACCEPT_SENT_TO_LOCAL",e.REFUSED="REFUSED",e.ACCEPTED="ACCEPTED",e.CANCELED="CANCELED",e.FAILURE="FAILURE"}(i||(i={})),e.RemoteInvitationState=i,function(e){e.UNKNOWN="UNKNOWN",e.PEER_NO_RESPONSE="PEER_NO_RESPONSE",e.INVITATION_EXPIRE="INVITATION_EXPIRE",e.PEER_OFFLINE="PEER_OFFLINE",e.NOT_LOGGEDIN="NOT_LOGGEDIN"}(o||(o={})),e.LocalInvitationFailureReason=o,function(e){e.UNKNOWN="UNKNOWN",e.PEER_OFFLINE="PEER_OFFLINE",e.ACCEPT_FAILURE="ACCEPT_FAILURE",e.INVITATION_EXPIRE="INVITATION_EXPIRE"}(s||(s={})),e.RemoteInvitationFailureReason=s,function(e){e.ONLINE="ONLINE",e.UNREACHABLE="UNREACHABLE",e.OFFLINE="OFFLINE"}(a||(a={})),e.PeerOnlineState=a,(u||(u={})).ONLINE_STATUS="ONLINE_STATUS",e.PeerSubscriptionOption=u,function(e){e.TEXT="TEXT",e.RAW="RAW",e.IMAGE="IMAGE",e.FILE="FILE"}(c||(c={})),e.MessageType=c,function(e){e.CN="CN",e.NA="NA",e.EU="EU",e.AS="AS",e.JP="JP",e.IN="IN",e.GLOB="GLOB",e.OC="OC",e.SA="SA",e.AF="AF",e.OVS="OVS"}(l||(l={})),e.AreaCode=l}(Mj||(Mj={}));var S=Mj;N({target:"Array",proto:!0},{includes:function(e){return Pm(this,e,1<arguments.length?arguments[1]:void 0)}}),ye("includes");var Nj=function(e){if(wj(e))throw TypeError("The method doesn't accept regular expressions");return e},ww=oa("match"),Oj=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[ww]=!1,"/./"[e](t)}catch(e){}}return!1};N({target:"String",proto:!0,forced:!Oj("includes")},{includes:function(e){return!!~String(hb(this)).indexOf(Nj(e),1<arguments.length?arguments[1]:void 0)}});var xw=O((function(){Dc(1)}));N({target:"Object",stat:!0,forced:xw},{keys:function(e){return Dc(Wa(e))}});var dd={RECONNECTING_AP_INTERVAL:2e3,RECONNECTING_AP_NUM:2,DISABLE_MESSAGE_COMPRESSION:!1,LOG_UPLOAD_INTERVAL:3e3,LOG_HANDLER:void 0};Yg("iterator"),Yg("asyncIterator");var Pj=le("forEach")?[].forEach:function(e){return Bd(this,e,1<arguments.length?arguments[1]:void 0)},Vo;for(Vo in tj){var Wo=B[Vo],$g=Wo&&Wo.prototype;if($g&&$g.forEach!==Pj)try{Ia($g,"forEach",Pj)}catch(c){$g.forEach=Pj}}var yw=[].reverse,Xo=[1,2];N({target:"Array",proto:!0,forced:String(Xo)===String(Xo.reverse())},{reverse:function(){return zd(this)&&(this.length=this.length),yw.call(this)}});var w=Xa((function(e){e=function(e){function t(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}function n(e,t,n,o){return t=Object.create((t&&t.prototype instanceof i?t:i).prototype),o=new h(o||[]),t._invoke=function(e,t,n){var i=_;return function(o,s){if(i===I)throw Error("Generator is already running");if(i===k){if("throw"===o)throw s;return d()}for(n.method=o,n.arg=s;;){if((o=n.delegate)&&(o=c(o,n))){if(o===A)continue;return o}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===_)throw i=k,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);if(i=I,"normal"===(o=r(e,t,n)).type){if(i=n.done?k:O,o.arg===A)continue;return{value:o.arg,done:n.done}}"throw"===o.type&&(i=k,n.method="throw",n.arg=o.arg)}}}(e,n,o),t}function r(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function i(){}function o(){}function s(){}function a(e){["next","throw","return"].forEach((function(n){t(e,n,(function(e){return this._invoke(n,e)}))}))}function u(e,t){function n(i,o,s,a){if("throw"!==(i=r(e[i],e,o)).type){var u=i.arg;return(i=u.value)&&"object"===R(i)&&g.call(i,"__await")?t.resolve(i.__await).then((function(e){n("next",e,s,a)}),(function(e){n("throw",e,s,a)})):t.resolve(i).then((function(e){u.value=e,s(u)}),(function(e){return n("throw",e,s,a)}))}a(i.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function c(e,t){var n=e.iterator[t.method];if(n===v){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=v,c(e,t),"throw"===t.method))return A;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}return"throw"===(n=r(n,e.iterator,t.arg)).type?(t.method="throw",t.arg=n.arg,t.delegate=null,A):(n=n.arg)?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=v),t.delegate=null,A):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,A)}function l(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function f(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function h(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(l,this),this.reset(!0)}function p(e){if(e){var t=e[E];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1;return(t=function t(){for(;++n<e.length;)if(g.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=v,t.done=!0,t}).next=t}}return{next:d}}function d(){return{value:v,done:!0}}var v,b=Object.prototype,g=b.hasOwnProperty,y="function"==typeof Symbol?Symbol:{},E=y.iterator||"@@iterator",m=y.asyncIterator||"@@asyncIterator",w=y.toStringTag||"@@toStringTag";try{t({},"")}catch(e){t=function(e,t,n){return e[t]=n}}e.wrap=n;var _="suspendedStart",O="suspendedYield",I="executing",k="completed",A={};(y={})[E]=function(){return this};var T=Object.getPrototypeOf;(T=T&&T(T(p([]))))&&T!==b&&g.call(T,E)&&(y=T);var N=s.prototype=i.prototype=Object.create(y);return o.prototype=N.constructor=s,s.constructor=o,o.displayName=t(s,w,"GeneratorFunction"),e.isGeneratorFunction=function(e){return!!(e="function"==typeof e&&e.constructor)&&(e===o||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,t(e,w,"GeneratorFunction")),e.prototype=Object.create(N),e},e.awrap=function(e){return{__await:e}},a(u.prototype),u.prototype[m]=function(){return this},e.AsyncIterator=u,e.async=function(t,r,i,o,s){void 0===s&&(s=Promise);var a=new u(n(t,r,i,o),s);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},a(N),t(N,w,"Generator"),N[E]=function(){return this},N.toString=function(){return"[object Generator]"},e.keys=function(e){var t,n=[];for(t in e)n.push(t);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=p,h.prototype={constructor:h,reset:function(e){if(this.next=this.prev=0,this.sent=this._sent=v,this.done=!1,this.delegate=null,this.method="next",this.arg=v,this.tryEntries.forEach(f),!e)for(var t in this)"t"===t.charAt(0)&&g.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=v)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){function t(t,r){return o.type="throw",o.arg=e,n.next=t,r&&(n.method="next",n.arg=v),!!r}if(this.done)throw e;for(var n=this,r=this.tryEntries.length-1;0<=r;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var s=g.call(i,"catchLoc"),a=g.call(i,"finallyLoc");if(s&&a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!a)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&g.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}return i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null),(n=i?i.completion:{}).type=e,n.arg=t,i?(this.method="next",this.next=i.finallyLoc,A):this.complete(n)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),A},finish:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),f(n),A}},catch:function(e){for(var t=this.tryEntries.length-1;0<=t;--t){var n=this.tryEntries[t];if(n.tryLoc===e){if("throw"===(e=n.completion).type){var r=e.arg;f(n)}return r}}throw Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:p(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=v),A}},e}(e.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}})),Yo=!O((function(){return Object.isExtensible(Object.preventExtensions({}))})),Qj=Xa((function(e){var t=Ma.f,n=ie("meta"),r=0,i=Object.isExtensible||function(){return!0},o=function(e){t(e,n,{value:{objectID:"O"+ ++r,weakData:{}}})},s=e.exports={REQUIRED:!1,fastKey:function(e,t){if(!ea(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!P(e,n)){if(!i(e))return"F";if(!t)return"E";o(e)}return e[n].objectID},getWeakData:function(e,t){if(!P(e,n)){if(!i(e))return!0;if(!t)return!1;o(e)}return e[n].weakData},onFreeze:function(e){return Yo&&s.REQUIRED&&i(e)&&!P(e,n)&&o(e),e}};je[n]=!0})),Zo=function(e,t,n){var r=-1!==e.indexOf("Map"),i=-1!==e.indexOf("Weak"),o=r?"set":"add",s=B[e],a=s&&s.prototype,u=s,c={},l=function(e){var t=a[e];Va(a,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(i&&!ea(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return i&&!ea(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(i&&!ea(e))&&t.call(this,0===e?0:e)}:function(e,n){return t.call(this,0===e?0:e,n),this})};if(jc(e,"function"!=typeof s||!(i||a.forEach&&!O((function(){(new s).entries().next()})))))u=n.getConstructor(t,e,r,o),Qj.REQUIRED=!0;else if(jc(e,!0)){var f=new u,h=f[o](i?{}:-0,1)!=f,p=O((function(){f.has(1)})),d=Dg((function(e){new s(e)})),v=!i&&O((function(){for(var e=new s,t=5;t--;)e[o](t,t);return!e.has(-0)}));d||((u=t((function(t,n){return zc(t,u,e),t=Sg(new s,t,u),null!=n&&Cg(n,t[o],{that:t,AS_ENTRIES:r}),t}))).prototype=a,a.constructor=u),(p||v)&&(l("delete"),l("has"),r&&l("get")),(v||h)&&l(o),i&&a.clear&&delete a.clear}return c[e]=u,N({global:!0,forced:u!=s},c),yc(u,e),i||n.setStrong(u,e,r),u},zw=Ma.f,$o=Qj.fastKey,ap=Ua.set,Rj=Ua.getterFor,bp={getConstructor:function(e,t,n,r){var i=e((function(e,o){zc(e,i,t),ap(e,{type:t,index:$b(null),first:void 0,last:void 0,size:0}),ja||(e.size=0),null!=o&&Cg(o,e[r],{that:e,AS_ENTRIES:n})})),o=Rj(t),s=function(e,t,n){var r,i=o(e),s=a(e,t);return s?s.value=n:(i.last=s={index:r=$o(t,!0),key:t,value:n,previous:t=i.last,next:void 0,removed:!1},i.first||(i.first=s),t&&(t.next=s),ja?i.size++:e.size++,"F"!==r&&(i.index[r]=s)),e},a=function(e,t){e=o(e);var n=$o(t);if("F"!==n)return e.index[n];for(e=e.first;e;e=e.next)if(e.key==t)return e};return of(i.prototype,{clear:function(){for(var e=o(this),t=e.index,n=e.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete t[n.index],n=n.next;e.first=e.last=void 0,ja?e.size=0:this.size=0},delete:function(e){var t=o(this);if(e=a(this,e)){var n=e.next,r=e.previous;delete t.index[e.index],e.removed=!0,r&&(r.next=n),n&&(n.previous=r),t.first==e&&(t.first=n),t.last==e&&(t.last=r),ja?t.size--:this.size--}return!!e},forEach:function(e){for(var t,n=o(this),r=ne(e,1<arguments.length?arguments[1]:void 0,3);t=t?t.next:n.first;)for(r(t.value,t.key,this);t&&t.removed;)t=t.previous},has:function(e){return!!a(this,e)}}),of(i.prototype,n?{get:function(e){return(e=a(this,e))&&e.value},set:function(e,t){return s(this,0===e?0:e,t)}}:{add:function(e){return s(this,e=0===e?0:e,e)}}),ja&&zw(i.prototype,"size",{get:function(){return o(this).size}}),i},setStrong:function(e,t,n){var r=t+" Iterator",i=Rj(t),o=Rj(r);oj(e,t,(function(e,t){ap(this,{type:r,target:e,state:i(e),kind:t,last:void 0})}),(function(){for(var e=o(this),t=e.kind,n=e.last;n&&n.removed;)n=n.previous;return e.target&&(e.last=n=n?n.next:e.state.first)?"keys"==t?{value:n.key,done:!1}:"values"==t?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),qf(t)}};Zo("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),bp);var Aw=yf("map");N({target:"Array",proto:!0,forced:!Aw},{map:function(e){return ho(this,e,1<arguments.length?arguments[1]:void 0)}});var Bw=/^[\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff][\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]*/,Cw=/[\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff][\t\n\x0B\f\r \u00a0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff]*$/,Sj=function(e){return function(t){return t=String(hb(t)),1&e&&(t=t.replace(Bw,"")),2&e&&(t=t.replace(Cw,"")),t}};Sj(1),Sj(2);var Tj=Sj(3),ah=B.parseInt,Dw=/^[+-]?0[Xx]/,cp=8!==ah("\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff08")||22!==ah("\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff0x16")?function(e,t){return e=Tj(String(e)),ah(e,t>>>0||(Dw.test(e)?16:10))}:ah;N({global:!0,forced:parseInt!=cp},{parseInt:cp});var Ew=Math.floor,dp=function(e){return!ea(e)&&isFinite(e)&&Ew(e)===e},Fw=Math.abs;N({target:"Number",stat:!0},{isSafeInteger:function(e){return dp(e)&&9007199254740991>=Fw(e)}});var Gw=wd.f,Hw=Db.f,Iw=Ma.f,ed=B.Number,bh=ed.prototype,Jw="Number"==Vb($b(bh)),ep=function(e){var t,n=hc(e,!1);if("string"==typeof n&&2<n.length)if(43===(e=(n=Tj(n)).charCodeAt(0))||45===e){if(88===(e=n.charCodeAt(2))||120===e)return NaN}else if(48===e){switch(n.charCodeAt(1)){case 66:case 98:e=2;var r=49;break;case 79:case 111:e=8,r=55;break;default:return+n}var i=(n=n.slice(2)).length;for(t=0;t<i;t++){var o=n.charCodeAt(t);if(48>o||o>r)return NaN}return parseInt(n,e)}return+n};if(jc("Number",!ed(" 0o1")||!ed("0b1")||ed("+0x1"))){for(var Dd=function(e){var t=1>arguments.length?0:e,n=this;return n instanceof Dd&&(Jw?O((function(){bh.valueOf.call(n)})):"Number"!=Vb(n))?Sg(new ed(ep(t)),n,Dd):ep(t)},fp=ja?Gw(ed):"MAX_VALUE MIN_VALUE NaN NEGATIVE_INFINITY POSITIVE_INFINITY EPSILON isFinite isInteger isNaN isSafeInteger MAX_SAFE_INTEGER MIN_SAFE_INTEGER parseFloat parseInt isInteger fromString range".split(" "),Uj=0,ch;fp.length>Uj;Uj++)P(ed,ch=fp[Uj])&&!P(Dd,ch)&&Iw(Dd,ch,Hw(ed,ch));Dd.prototype=bh,bh.constructor=Dd,Va(B,"Number",Dd)}var gp=oa("isConcatSpreadable"),Kw=51<=pe||!O((function(){var e=[];return e[gp]=!1,e.concat()[0]!==e})),Lw=yf("concat");N({target:"Array",proto:!0,forced:!Kw||!Lw},{concat:function(e){var t,n=Wa(this),r=kj(n,0),i=0,o=-1;for(t=arguments.length;o<t;o++){var s=-1===o?n:arguments[o],a=s;if(ea(a)){var u=a[gp];a=void 0!==u?!!u:zd(a)}else a=!1;if(a){if(9007199254740991<i+(u=za(s.length)))throw TypeError("Maximum allowed index exceeded");for(a=0;a<u;a++,i++)a in s&&ue(r,i,s[a])}else{if(9007199254740991<=i)throw TypeError("Maximum allowed index exceeded");ue(r,i++,s)}}return r.length=i,r}});var Mw=!Dg((function(e){Array.from(e)}));N({target:"Array",stat:!0,forced:Mw},{from:function(e){var t,n=Wa(e),r="function"==typeof this?this:Array,i=arguments.length,o=1<i?arguments[1]:void 0,s=void 0!==o,a=Hi(n),u=0;if(s&&(o=ne(o,2<i?arguments[2]:void 0,2)),null==a||r==Array&&Fi(a)){var c=za(n.length);for(r=new r(c);c>u;u++)a=s?o(n[u],u):n[u],ue(r,u,a)}else for(i=(n=a.call(n)).next,r=new r;!(t=i.call(n)).done;u++){if(s){a=n;var l=o;t=[t.value,u];try{c=l(qa(t)[0],t[1])}catch(e){throw Ii(a),e}}else c=t.value;ue(r,u,a=c)}return r.length=u,r}});var Vj=Wb("Reflect","apply"),Nw=Function.apply,Ow=!O((function(){Vj((function(){}))}));N({target:"Reflect",stat:!0,forced:Ow},{apply:function(e,t,n){return yb(e),qa(n),Vj?Vj(e,t,n):Nw.call(e,t,n)}}),N({target:"Reflect",stat:!0},{ownKeys:Rm});var Pw=zj,Qw=O((function(){return!Object.getOwnPropertyNames(1)}));N({target:"Object",stat:!0,forced:Qw},{getOwnPropertyNames:Pw});var Be="object"===("undefined"==typeof Reflect?"undefined":R(Reflect))?Reflect:null,hp=Be&&"function"==typeof Be.apply?Be.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)},Rw=Be&&"function"==typeof Be.ownKeys?Be.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)},ip=Number.isNaN||function(e){return e!=e};aa.EventEmitter=aa,aa.prototype._events=void 0,aa.prototype._eventsCount=0,aa.prototype._maxListeners=void 0;var jp=10;Object.defineProperty(aa,"defaultMaxListeners",{enumerable:!0,get:function(){return jp},set:function(e){if("number"!=typeof e||0>e||ip(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");jp=e}}),aa.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},aa.prototype.setMaxListeners=function(e){if("number"!=typeof e||0>e||ip(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},aa.prototype.getMaxListeners=function(){return void 0===this._maxListeners?aa.defaultMaxListeners:this._maxListeners},aa.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);n="error"===e;var r=this._events;if(void 0!==r)n=n&&void 0===r.error;else if(!n)return!1;if(n){var i;if(0<t.length&&(i=t[0]),i instanceof Error)throw i;throw(t=Error("Unhandled error."+(i?" ("+i.message+")":""))).context=i,t}if(void 0===(n=r[e]))return!1;if("function"==typeof n)hp(n,this,t);else for(r=kl(n,i=n.length),n=0;n<i;++n)hp(r[n],this,t);return!0},aa.prototype.addListener=function(e,t){return hl(this,e,t,!1)},aa.prototype.on=aa.prototype.addListener,aa.prototype.prependListener=function(e,t){return hl(this,e,t,!0)},aa.prototype.once=function(e,t){return Zf(t),this.on(e,il(this,e,t)),this},aa.prototype.prependOnceListener=function(e,t){return Zf(t),this.prependListener(e,il(this,e,t)),this},aa.prototype.removeListener=function(e,t){var n;Zf(t);var r=this._events;if(void 0===r)return this;var i=r[e];if(void 0===i)return this;if(i===t||i.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||t));else if("function"!=typeof i){var o=-1;for(n=i.length-1;0<=n;n--)if(i[n]===t||i[n].listener===t){var s=i[n].listener;o=n;break}if(0>o)return this;if(0===o)i.shift();else{for(;o+1<i.length;o++)i[o]=i[o+1];i.pop()}1===i.length&&(r[e]=i[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},aa.prototype.off=aa.prototype.removeListener,aa.prototype.removeAllListeners=function(e){var t=this._events;if(void 0===t)return this;if(void 0===t.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==t[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete t[e]),this;if(0===arguments.length){var n=Object.keys(t);for(t=0;t<n.length;++t){var r=n[t];"removeListener"!==r&&this.removeAllListeners(r)}return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(n=t[e]))this.removeListener(e,n);else if(void 0!==n)for(t=n.length-1;0<=t;t--)this.removeListener(e,n[t]);return this},aa.prototype.listeners=function(e){return jl(this,e,!0)},aa.prototype.rawListeners=function(e){return jl(this,e,!1)},aa.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):ll.call(e,t)},aa.prototype.listenerCount=ll,aa.prototype.eventNames=function(){return 0<this._eventsCount?Rw(this._events):[]},aa.once=function(e,t){return new Promise((function(n,r){function i(){void 0!==o&&e.removeListener("error",o),n([].slice.call(arguments))}if("error"!==t){var o=function(n){e.removeListener(t,i),r(n)};e.once("error",o)}e.once(t,i)}))};var Ce=Object.assign,kp=Object.defineProperty,lp=!Ce||O((function(){if(ja&&1!==Ce({b:1},Ce(kp({},"a",{enumerable:!0,get:function(){kp(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol();return e[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(e){t[e]=e})),7!=Ce({},e)[n]||"abcdefghijklmnopqrst"!=Dc(Ce({},t)).join("")}))?function(e,t){for(var n=Wa(e),r=arguments.length,i=1,o=nf.f,s=kf;r>i;)for(var a,u=lf(arguments[i++]),c=o?Dc(u).concat(o(u)):Dc(u),l=c.length,f=0;l>f;)a=c[f++],(!ja||s.call(u,a))&&(n[a]=u[a]);return n}:Ce;N({target:"Object",stat:!0,forced:Object.assign!==lp},{assign:lp}),Zo("Map",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),bp);var Sw=Math.log,Tw=Math.LN2;N({target:"Math",stat:!0},{log2:function(e){return Sw(e)/Tw}}),Df("Float32",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Df("Float64",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Df("Uint16",(function(e){return function(t,n,r){return e(this,t,n,r)}})),Df("Uint32",(function(e){return function(t,n,r){return e(this,t,n,r)}}));var Gh=Symbol(),Fh=function(){};e:{try{var mp="1"===process.env.UMBRELLA_ASSERTS;break e}catch(c){}mp=!1}var Uw=mp?function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"assertion failed";if("function"==typeof e&&!e()||!e)throw Error("function"==typeof t?t():t)}:Fh,Vw=Qj.onFreeze,Wj=Object.freeze,Ww=O((function(){Wj(1)}));N({target:"Object",stat:!0,forced:Ww,sham:!Yo},{freeze:function(e){return Wj&&ea(e)?Wj(Vw(e)):e}});var Xw=Ma.f,Yw=wd.f,Zw=Ua.set,$w=oa("match"),mc=B.RegExp,Xj=mc.prototype,If=/a/g,Yj=/a/g,Zj=new mc(If)!==If;if(ja&&jc("RegExp",!Zj||Ig||O((function(){return Yj[$w]=!1,mc(If)!=If||mc(Yj)==Yj||"/a/i"!=mc(If,"i")})))){for(var Hc=function(e,t){var n,r=this instanceof Hc,i=wj(e),o=void 0===t;return!r&&i&&e.constructor===Hc&&o||(Zj?i&&!o&&(e=e.source):e instanceof Hc&&(o&&(t=Zi.call(e)),e=e.source),Ig&&(n=!!t&&-1<t.indexOf("y"))&&(t=t.replace(/y/g,"")),e=Sg(Zj?new mc(e,t):mc(e,t),r?this:Xj,Hc),Ig&&n&&Zw(e,{sticky:n})),e},ax=function(e){e in Hc||Xw(Hc,e,{configurable:!0,get:function(){return mc[e]},set:function(t){mc[e]=t}})},np=Yw(mc),op=0;np.length>op;)ax(np[op++]);Xj.constructor=Hc,Hc.prototype=Xj,Va(B,"RegExp",Hc)}qf("RegExp");var ak=function(e,t){return e===t?0:null==e?null==t?0:-1:null==t?null==e?0:1:"function"==typeof e.compare?e.compare(t):"function"==typeof t.compare?-t.compare(e):e<t?-1:e>t?1:0},bk=[],pp=bk.sort,bx=O((function(){bk.sort(void 0)})),cx=O((function(){bk.sort(null)})),dx=le("sort");N({target:"Array",proto:!0,forced:bx||!cx||!dx},{sort:function(e){return void 0===e?pp.call(Wa(this)):pp.call(Wa(this),yb(e))}});var qp=Object.getPrototypeOf({}),Jf=function(e,t){var n;return e===t||(null==e?e==t:"function"===R(e.equiv)?e.equiv(t):null==t?e==t:"function"===R(t.equiv)?t.equiv(e):"string"!==R(e)&&"string"!==R(t)&&(null!=(n=Object.getPrototypeOf(e))&&n!==qp||null!=(n=Object.getPrototypeOf(t))&&n!==qp?"function"!==R(e)&&void 0!==e.length&&"function"!==R(t)&&void 0!==t.length?fx(e,t):e instanceof Set&&t instanceof Set?gx(e,t):e instanceof Map&&t instanceof Map?hx(e,t):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e instanceof RegExp&&t instanceof RegExp?e.toString()===t.toString():e!=e&&t!=t:ex(e,t)))},fx=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Jf,r=e.length;if(r===t.length)for(;0<=--r&&n(e[r],t[r]););return 0>r},gx=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Jf;return e.size===t.size&&n(I(e.keys()).sort(),I(t.keys()).sort())},hx=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Jf;return e.size===t.size&&n(I(e).sort(),I(t).sort())},ex=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Jf;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(!t.hasOwnProperty(r)||!n(e[r],t[r]))return!1;return!0},ix=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(e){return void 0!==e?": "+e:""};return function(n){function r(n){return W(this,r),i.call(this,e(n)+t(n))}ka(r,n);var i=la(r);return r}(Re(Error))}((function(){return"illegal argument(s)"})),dh=function(e){throw new ix(e)},rp=1/4294967295,jx=function(){function e(){W(this,e)}return Ea(e,[{key:"float",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return this.int()*rp*e}},{key:"norm",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return 2*(this.int()*rp-.5)*e}},{key:"minmax",value:function(e,t){return this.float()*(t-e)+e}}]),e}(),ck=Math.random,kx=new(function(e){function t(){return W(this,t),n.apply(this,arguments)}ka(t,e);var n=la(t);return Ea(t,[{key:"int",value:function(){return 4294967296*ck()>>>0}},{key:"float",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return ck()*e}},{key:"norm",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return 2*(ck()-.5)*e}}]),t}(jx)),lx=le("reduce"),mx=!kc&&79<pe&&83>pe;N({target:"Array",proto:!0,forced:!lx||mx},{reduce:function(e){return to(this,e,arguments.length,1<arguments.length?arguments[1]:void 0)}});var nl=function(e){return null!=e&&"function"==typeof e.xform?e.xform():e},$f=function(){function e(t){W(this,e),this.value=t}return Ea(e,[{key:"deref",value:function(){return this.value}}]),e}(),Hh=function(e){return e instanceof $f?e.deref():e},Sr=function(e,t){return[e,function(e){return e},t]},nx=w.mark((function(e,t){var n,r,i,o,s,a;return w.wrap((function(u){for(;;)switch(u.prev=u.next){case 0:n=nl(e)(Rr()),r=n[1],i=n[2],o=0;case 4:if(!(o<t.length)){u.next=15;break}if(s=t[o],!((a=i([],s))instanceof $f)){u.next=10;break}return u.delegateYield(Hh(r(a.deref())),"t0",9);case 9:return u.abrupt("return");case 10:if(!a.length){u.next=12;break}return u.delegateYield(a,"t1",12);case 12:o++,u.next=4;break;case 15:return u.delegateYield(Hh(r([])),"t2",16);case 16:case"end":return u.stop()}}),nx)})),Tr=w.mark(ml),Ur=function(e,t){return[e[0],e[1],t]},sp=!0;"findIndex"in[]&&Array(1).findIndex((function(){sp=!1})),N({target:"Array",proto:!0,forced:sp},{findIndex:function(e){return jo(this,e,1<arguments.length?arguments[1]:void 0)}}),ye("findIndex"),N({target:"Array",proto:!0},{fill:fj}),ye("fill");var ox=function(){function e(t){W(this,e),this._length=0,t&&this.into(t)}return Ea(e,[{key:"length",get:function(){return this._length}},{key:"copy",value:function(){return new e(this)}},{key:"empty",value:function(){return new e}},{key:"clear",value:function(){this.release()}},{key:"release",value:function(){for(var e,t=this.head;t;)e=t.next,delete t.value,delete t.prev,delete t.next,t=e;return delete this.head,delete this.tail,this._length=0,!0}},{key:"compare",value:function(e){var t=this._length;if(t<e._length)return-1;if(t>e._length)return 1;if(0===t)return 0;t=this.head,e=e.head;for(var n=0;t&&0==n;)n=ak(t.value,e.value),t=t.next,e=e.next;return n}},{key:"equiv",value:function(t){if(!(t instanceof e||null!=t&&"function"!=typeof t&&void 0!==t.length)||this._length!==t.length)return!1;if(!this._length||this===t)return!0;for(var n=this.head,r=0;r<t.length;r++){if(!Jf(n.value,t[r]))return!1;n=n.next}return!0}},{key:Symbol.iterator,value:w.mark((function e(){var t;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.head;case 1:if(!t){e.next=7;break}return e.next=4,t.value;case 4:t=t.next,e.next=1;break;case 7:case"end":return e.stop()}}),e,this)}))},{key:"seq",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length;if(!(e>=t||0>e)){e=this.nthCell(e);var n=this.nthCell(t-1);return t=function e(t){return{first:function(){return t.value},next:function(){return t!==n&&t.next?e(t.next):void 0}}},e?t(e):void 0}}},{key:"cycle",value:w.mark((function e(){return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(this,"t0",2);case 2:e.next=0;break;case 4:case"end":return e.stop()}}),e,this)}))},{key:"$reduce",value:function(e,t){for(var n=this.head;n&&!(t instanceof $f);)t=e(t,n.value),n=n.next;return t}},{key:"drop",value:function(){var e=this.head;if(e)return(this.head=e.next)?delete this.head.prev:delete this.tail,this._length--,e.value}},{key:"cons",value:function(e){return e={value:e,next:this.head},this.head?this.head.prev=e:this.tail=e,this.head=e,this._length++,this}},{key:"insertBefore",value:function(e,t){return e||dh("cell is undefined"),t={value:t,next:e,prev:e.prev},e.prev?e.prev.next=t:this.head=t,e.prev=t,this._length++,this}},{key:"insertAfter",value:function(e,t){return e||dh("cell is undefined"),t={value:t,next:e.next,prev:e},e.next?e.next.prev=t:this.tail=t,e.next=t,this._length++,this}},{key:"insertBeforeNth",value:function(e,t){return 0>e&&(e+=this._length),0>=e?this.cons(t):(this.ensureIndex(e),this.insertBefore(this.nthCellUnsafe(e),t))}},{key:"insertAfterNth",value:function(e,t){return 0>e&&(e+=this._length),e>=this._length-1?this.push(t):(this.ensureIndex(e),this.insertAfter(this.nthCellUnsafe(e),t))}},{key:"insertSorted",value:function(e,t){t=t||ak;for(var n=this.head;n;){if(0>=t(e,n.value))return this.insertBefore(n,e);n=n.next}return this.push(e)}},{key:"find",value:function(e){for(var t=this.head;t;){if(t.value===e)return t;t=t.next}}},{key:"findWith",value:function(e){for(var t=this.head;t;){if(e(t.value))return t;t=t.next}}},{key:"concat",value:function(){for(var e=this.copy(),t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];for(t=0;t<n.length;t++)e.into(n[t]);return e}},{key:"into",value:function(e){for(var t=0;t<e.length;t++)this.push(e[t])}},{key:"slice",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.length;t=0>t?t+this._length:t,n=0>n?n+this._length:n,(0>t||0>n)&&dh("invalid indices: ${from} / ${to}");for(var r=new e,i=this.nthCell(t);i&&++t<=n;)r.push(i.value),i=i.next;return r}},{key:"splice",value:function(t){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length?arguments[2]:void 0;if("number"==typeof t){0>t&&(t+=this._length),this.ensureIndex(t);var i=this.nthCellUnsafe(t)}else i=t;var o=new e;if(0<n)for(;i&&0<n--;)this.remove(i),o.push(i.value),i=i.next;else i&&(i=i.next);if(r)if(i)for(n=0;n<r.length;n++)this.insertBefore(i,r[n]);else for(i=0;i<r.length;i++)this.push(r[i]);return o}},{key:"remove",value:function(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,this._length--,this}},{key:"swap",value:function(e,t){if(e!==t){var n=e.value;e.value=t.value,t.value=n}return this}},{key:"push",value:function(e){return this.tail?(e={value:e,prev:this.tail},this.tail=this.tail.next=e,this._length++,this):this.cons(e)}},{key:"pop",value:function(){var e=this.tail;if(e)return(this.tail=e.prev)?delete this.tail.next:delete this.head,this._length--,e.value}},{key:"first",value:function(){return this.head&&this.head.value}},{key:"peek",value:function(){return this.tail&&this.tail.value}},{key:"setHead",value:function(e){return this.head?(this.head.value=e,this):this.cons(e)}},{key:"setTail",value:function(e){return this.tail?(this.tail.value=e,this):this.push(e)}},{key:"setNth",value:function(e,t){var n=this.nthCell(e);return!n&&dh("index out of bounds: ".concat(e)),n.value=t,this}},{key:"nth",value:function(e,t){return(e=this.nthCell(e))?e.value:t}},{key:"nthCell",value:function(e){if(0>e&&(e+=this._length),!(0>e||e>=this._length))return this.nthCellUnsafe(e)}},{key:"rotateLeft",value:function(){switch(this._length){case 0:case 1:return this;case 2:return this.swap(this.head,this.tail);default:return this.push(this.drop())}}},{key:"rotateRight",value:function(){switch(this._length){case 0:case 1:return this;case 2:return this.swap(this.head,this.tail);default:var e=this.peek();return this.pop(),this.cons(e)}}},{key:"map",value:function(t){for(var n=new e,r=this.head;r;)n.push(t(r.value)),r=r.next;return n}},{key:"filter",value:function(t){for(var n=new e,r=this.head;r;)t(r.value)&&n.push(r.value),r=r.next;return n}},{key:"reduce",value:function(e,t){for(var n=this.head;n;)t=e(t,n.value),n=n.next;return t}},{key:"shuffle",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:kx;if(2>this._length)return this;for(e=null!=e?e:Math.ceil(1.5*Math.log2(this._length));0<e;e--)for(var n=this.head;n;){var r=n.next;.5>t.float()?this.asHead(n):this.asTail(n),n=r}return this}},{key:"sort",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:ak;if(!this._length)return this;for(var t=1;;){var n=this.head;this.tail=this.head=void 0;for(var r=0;n;){r++;for(var i=n,o=0,s=0;s<t&&(o++,i=i.next);s++);for(s=t;0<o||0<s&&i;){if(0===o){var a=i;i=i.next,s--}else i&&0!==s?0>=e(n.value,i.value)?(a=n,n=n.next,o--):(a=i,i=i.next,s--):(a=n,n=n.next,o--);this.tail?this.tail.next=a:this.head=a,a.prev=this.tail,this.tail=a}n=i}if(this.tail.next=void 0,1>=r)return this;t*=2}}},{key:"reverse",value:function(){for(var e=this.head,t=this.tail,n=(this._length>>>1)+(1&this._length);e&&t&&0<n;){var r=e.value;e.value=t.value,t.value=r,e=e.next,t=t.prev,n--}return this}},{key:"asHead",value:function(e){return e===this.head||(this.remove(e),this.head.prev=e,e.next=this.head,e.prev=void 0,this.head=e,this._length++),this}},{key:"asTail",value:function(e){return e===this.tail||(this.remove(e),this.tail.next=e,e.prev=this.tail,e.next=void 0,this.tail=e,this._length++),this}},{key:"toString",value:function(){for(var e=[],t=this.head;t;)e.push(String(t.value)),t=t.next;return e.join(", ")}},{key:"toJSON",value:function(){return I(this)}},{key:"ensureIndex",value:function(e){Uw(0<=e&&e<this._length,"index out of range: ".concat(e))}},{key:"nthCellUnsafe",value:function(e){if(e<=this._length>>1)var t=this.head,n="next";else t=this.tail,n="prev",e=this._length-e-1;for(;0<e--&&t;)t=t[n];return t}}]),e}(),nc=function(){function e(t,n){W(this,e),n=Object.assign({maxlen:1/0,maxsize:1/0,map:function(){return new Map},ksize:function(){return 0},vsize:function(){return 0}},n),this.map=n.map(),this.items=new ox,this._size=0,this.opts=n,t&&this.into(t)}return Ea(e,[{key:"length",get:function(){return this.items.length}},{key:"size",get:function(){return this._size}},{key:Symbol.iterator,value:function(){return this.entries()}},{key:"entries",value:function(){return ag((function(e){return[e.k,e]}),this.items)}},{key:"keys",value:function(){return ag((function(e){return e.k}),this.items)}},{key:"values",value:function(){return ag((function(e){return e.v}),this.items)}},{key:"copy",value:function(){var e=this.empty();e.items=this.items.copy();for(var t=e.items.head;t;)e.map.set(t.value.k,t),t=t.next;return e}},{key:"empty",value:function(){return new e(null,this.opts)}},{key:"release",value:function(){this._size=0,this.map.clear();var e=this.opts.release;if(e){for(var t;t=this.items.drop();)e(t.k,t.v);return!0}return this.items.release()}},{key:"has",value:function(e){return this.map.has(e)}},{key:"get",value:function(e,t){return(e=this.map.get(e))?this.resetEntry(e):t}},{key:"set",value:function(e,t){var n=this.opts.ksize(e)+this.opts.vsize(t),r=this.map.get(e);return this._size+=Math.max(0,n-(r?r.value.s:0)),this.ensureSize()&&this.doSetEntry(r,e,t,n),t}},{key:"into",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];this.set(n[0],n[1])}return this}},{key:"getSet",value:function(e,t){var n=this,r=this.map.get(e);return r?Promise.resolve(this.resetEntry(r)):t().then((function(t){return n.set(e,t)}))}},{key:"delete",value:function(e){return!!(e=this.map.get(e))&&(this.removeEntry(e),!0)}},{key:"resetEntry",value:function(e){return this.items.asTail(e),e.value.v}},{key:"ensureSize",value:function(){for(var e=this.opts.release,t=this.opts.maxsize,n=this.opts.maxlen;this._size>t||this.length>=n;){var r=this.items.drop();if(!r)return!1;this.map.delete(r.k),e&&e(r.k,r.v),this._size-=r.s}return!0}},{key:"removeEntry",value:function(e){var t=e.value;this.map.delete(t.k),this.items.remove(e),this.opts.release&&this.opts.release(t.k,t.v),this._size-=t.s}},{key:"doSetEntry",value:function(e,t,n,r){e?(e.value.v=n,e.value.s=r,this.items.asTail(e)):(this.items.push({k:t,v:n,s:r}),this.map.set(t,this.items.tail))}}]),e}(),px=function(e){function t(e,r){return W(this,t),r=Object.assign({ttl:36e5},r),n.call(this,e,r)}ka(t,e);var n=la(t);return Ea(t,[{key:"empty",value:function(){return new t(null,this.opts)}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"get",value:function(e,t){if(e=this.map.get(e)){if(e.value.t>=Date.now())return this.resetEntry(e);this.removeEntry(e)}return t}},{key:"set",value:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.opts.ttl,r=this.opts.ksize(e)+this.opts.vsize(t),i=this.map.get(e);return this._size+=Math.max(0,r-(i?i.value.s:0)),this.ensureSize()&&(n=Date.now()+n,i?(i.value.v=t,i.value.s=r,i.value.t=n,this.items.asTail(i)):(this.items.push({k:e,v:t,s:r,t:n}),this.map.set(e,this.items.tail))),t}},{key:"getSet",value:function(e,t){var n=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this.opts.ttl,i=this.get(e);return i?Promise.resolve(i):t().then((function(t){return n.set(e,t,r)}))}},{key:"prune",value:function(){for(var e=Date.now(),t=this.items.head;t;)t.value.t<e&&this.removeEntry(t),t=t.next}},{key:"ensureSize",value:function(){for(var e=this.opts.maxsize,n=this.opts.maxlen,r=Date.now(),i=this.items.head;i&&(this._size>e||this.length>=n);)i.value.t<r&&this.removeEntry(i),i=i.next;return Dh(kd(t.prototype),"ensureSize",this).call(this)}}]),t}(nc),tp="object"==R(Ta)&&Ta&&Ta.Object===Object&&Ta,qx="object"==("undefined"==typeof self?"undefined":R(self))&&self&&self.Object===Object&&self,Bb=tp||qx||Function("return this")(),Lb=Bb.Symbol,up=Object.prototype,rx=up.hasOwnProperty,sx=up.toString,Kf=Lb?Lb.toStringTag:void 0,tx=Object.prototype.toString,vp=Lb?Lb.toStringTag:void 0,Ed=function(e){if(null==e)e=void 0===e?"[object Undefined]":"[object Null]";else if(vp&&vp in Object(e)){var t=rx.call(e,Kf),n=e[Kf];try{e[Kf]=void 0;var r=!0}catch(e){}var i=sx.call(e);r&&(t?e[Kf]=n:delete e[Kf]),e=i}else e=tx.call(e);return e},jb=function(e){var t=R(e);return null!=e&&("object"==t||"function"==t)},ci=function(e){return!!jb(e)&&("[object Function]"==(e=Ed(e))||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e)},dk=Bb["__core-js_shared__"],wp=function(){var e=/[^.]+$/.exec(dk&&dk.keys&&dk.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ux=Function.prototype.toString,Fd=function(e){if(null!=e){try{return ux.call(e)}catch(e){}return e+""}return""},vx=/^\[object .+?Constructor\]$/,wx=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Gd=function(e,t){return e=null==e?void 0:e[t],!jb(e)||wp&&wp in e||!(ci(e)?wx:vx).test(Fd(e))?void 0:e},Lf=Gd(Object,"create"),xx=Object.prototype.hasOwnProperty,yx=Object.prototype.hasOwnProperty;nd.prototype.clear=function(){this.__data__=Lf?Lf(null):{},this.size=0},nd.prototype.delete=function(e){return e=this.has(e)&&delete this.__data__[e],this.size-=e?1:0,e},nd.prototype.get=function(e){var t=this.__data__;return Lf?"__lodash_hash_undefined__"===(e=t[e])?void 0:e:xx.call(t,e)?t[e]:void 0},nd.prototype.has=function(e){var t=this.__data__;return Lf?void 0!==t[e]:yx.call(t,e)},nd.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Lf&&void 0===t?"__lodash_hash_undefined__":t,this};var Mf=function(e,t){return e===t||e!=e&&t!=t},eh=function(e,t){for(var n=e.length;n--;)if(Mf(e[n][0],t))return n;return-1},zx=Array.prototype.splice;Qd.prototype.clear=function(){this.__data__=[],this.size=0},Qd.prototype.delete=function(e){var t=this.__data__;return!(0>(e=eh(t,e)))&&(e==t.length-1?t.pop():zx.call(t,e,1),--this.size,!0)},Qd.prototype.get=function(e){var t=this.__data__;return 0>(e=eh(t,e))?void 0:t[e][1]},Qd.prototype.has=function(e){return-1<eh(this.__data__,e)},Qd.prototype.set=function(e,t){var n=this.__data__,r=eh(n,e);return 0>r?(++this.size,n.push([e,t])):n[r][1]=t,this};var cg=Qd,Nf=Gd(Bb,"Map"),fh=function(e,t){e=e.__data__;var n=R(t);return("string"==n||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t)?e["string"==typeof t?"string":"hash"]:e.map};Rd.prototype.clear=function(){this.size=0,this.__data__={hash:new nd,map:new(Nf||cg),string:new nd}},Rd.prototype.delete=function(e){return e=fh(this,e).delete(e),this.size-=e?1:0,e},Rd.prototype.get=function(e){return fh(this,e).get(e)},Rd.prototype.has=function(e){return fh(this,e).has(e)},Rd.prototype.set=function(e,t){var n=fh(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var bg=Rd;Te.prototype.add=Te.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Te.prototype.has=function(e){return this.__data__.has(e)};var xp=function(e,t,n,r){var i=e.length;for(n+=r?1:-1;r?n--:++n<i;)if(t(e[n],n,e))return n;return-1},Ax=function(e){return e!=e},Bx=function(e,t){var n;if(n=!(null==e||!e.length)){if(t==t)e:{n=-1;for(var r=e.length;++n<r;)if(e[n]===t){e=n;break e}e=-1}else e=xp(e,Ax,0);n=-1<e}return n},Cx=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1},Dx=function(e,t){return e.has(t)},De=Gd(Bb,"Set"),Ex=function(){},ek=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},Fx=1/0,Gx=De&&1/ek(new De([,-0]))[1]==Fx?function(e){return new De(e)}:Ex,fk=function(e,t,n){var r=-1,i=Bx,o=e.length,s=!0,a=[],u=a;if(n)s=!1,i=Cx;else if(200<=o){if(i=t?null:Gx(e))return ek(i);s=!1,i=Dx,u=new Te}else u=t?[]:a;e:for(;++r<o;){var c=e[r],l=t?t(c):c;if(c=n||0!==c?c:0,s&&l==l){for(var f=u.length;f--;)if(u[f]===l)continue e;t&&u.push(l),a.push(c)}else i(u,l,n)||(u!==a&&u.push(l),a.push(c))}return a},yp=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r},Ud=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i};Sd.prototype.clear=function(){this.__data__=new cg,this.size=0},Sd.prototype.delete=function(e){var t=this.__data__;return e=t.delete(e),this.size=t.size,e},Sd.prototype.get=function(e){return this.__data__.get(e)},Sd.prototype.has=function(e){return this.__data__.has(e)},Sd.prototype.set=function(e,t){var n=this.__data__;if(n instanceof cg){var r=n.__data__;if(!Nf||199>r.length)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new bg(r)}return n.set(e,t),this.size=n.size,this};var Td=Sd,cs=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},gh=function(){try{var e=Gd(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Of=function(e,t,n){"__proto__"==t&&gh?gh(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},Hx=Object.prototype.hasOwnProperty,rl=function(e,t,n){var r=e[t];Hx.call(e,t)&&Mf(r,n)&&(void 0!==n||t in e)||Of(e,t,n)},de=function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,s=t.length;++o<s;){var a=t[o],u=r?r(n[a],e[a],a,n,e):void 0;void 0===u&&(u=e[a]),i?Of(n,a,u):rl(n,a,u)}return n},cc=function(e){return null!=e&&"object"==R(e)},zp=function(e){return cc(e)&&"[object Arguments]"==Ed(e)},Ap=Object.prototype,Ix=Ap.hasOwnProperty,Jx=Ap.propertyIsEnumerable,cf=zp(function(){return arguments}())?zp:function(e){return cc(e)&&Ix.call(e,"callee")&&!Jx.call(e,"callee")},Ya=Array.isArray,Kx=function(){return!1},Ve=Xa((function(e,t){var n=(t=t&&!t.nodeType&&t)&&e&&!e.nodeType&&e;t=n&&n.exports===t?Bb.Buffer:void 0,e.exports=(t?t.isBuffer:void 0)||Kx})),Lx=/^(?:0|[1-9]\d*)$/,gk=function(e,t){var n=R(e);return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Lx.test(e))&&-1<e&&0==e%1&&e<t},hk=function(e){return"number"==typeof e&&-1<e&&0==e%1&&9007199254740991>=e},Ba={};Ba["[object Float32Array]"]=Ba["[object Float64Array]"]=Ba["[object Int8Array]"]=Ba["[object Int16Array]"]=Ba["[object Int32Array]"]=Ba["[object Uint8Array]"]=Ba["[object Uint8ClampedArray]"]=Ba["[object Uint16Array]"]=Ba["[object Uint32Array]"]=!0,Ba["[object Arguments]"]=Ba["[object Array]"]=Ba["[object ArrayBuffer]"]=Ba["[object Boolean]"]=Ba["[object DataView]"]=Ba["[object Date]"]=Ba["[object Error]"]=Ba["[object Function]"]=Ba["[object Map]"]=Ba["[object Number]"]=Ba["[object Object]"]=Ba["[object RegExp]"]=Ba["[object Set]"]=Ba["[object String]"]=Ba["[object WeakMap]"]=!1;var Mx=function(e){return cc(e)&&hk(e.length)&&!!Ba[Ed(e)]},hh=function(e){return function(t){return e(t)}},Ee=Xa((function(e,t){var n=t&&!t.nodeType&&t;n=(t=n&&e&&!e.nodeType&&e)&&t.exports===n&&tp.process;e:{try{var r=t&&t.require&&t.require("util").types;if(r){var i=r;break e}i=n&&n.binding&&n.binding("util");break e}catch(e){}i=void 0}e.exports=i})),Bp=Ee&&Ee.isTypedArray,Nh=Bp?hh(Bp):Mx,Nx=Object.prototype.hasOwnProperty,Cp=function(e,t){var n=Ya(e),r=!n&&cf(e),i=!n&&!r&&Ve(e),o=!n&&!r&&!i&&Nh(e);if(n=n||r||i||o){r=e.length;for(var s=String,a=-1,u=Array(r);++a<r;)u[a]=s(a);r=u}else r=[];for(var c in s=r.length,e)!t&&!Nx.call(e,c)||n&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||gk(c,s))||r.push(c);return r},Ox=Object.prototype,ik=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ox)},Dp=function(e,t){return function(n){return e(t(n))}},Px=Dp(Object.keys,Object),Qx=Object.prototype.hasOwnProperty,sd=function(e){return null!=e&&hk(e.length)&&!ci(e)},Rc=function(e){if(sd(e))e=Cp(e);else if(ik(e)){var t,n=[];for(t in Object(e))Qx.call(e,t)&&"constructor"!=t&&n.push(t);e=n}else e=Px(e);return e},Zr=function(e,t){return e&&de(t,Rc(t),e)},Rx=Object.prototype.hasOwnProperty,We=function(e){if(sd(e))e=Cp(e,!0);else if(jb(e)){var t=ik(e),n=[];for(r in e)("constructor"!=r||!t&&Rx.call(e,r))&&n.push(r);e=n}else{var r=[];if(null!=e)for(t in Object(e))r.push(t);e=r}return e},Xr=function(e,t){return e&&de(t,We(t),e)},ol=Xa((function(e,t){var n=(t=t&&!t.nodeType&&t)&&e&&!e.nodeType&&e,r=(t=n&&n.exports===t?Bb.Buffer:void 0)?t.allocUnsafe:void 0;e.exports=function(e,t){return t?e.slice():(t=e.length,t=r?r(t):new e.constructor(t),e.copy(t),t)}})),Ih=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},Sx=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o},Ep=function(){return[]},Tx=Object.prototype.propertyIsEnumerable,Fp=Object.getOwnPropertySymbols,jk=Fp?function(e){return null==e?[]:(e=Object(e),Sx(Fp(e),(function(t){return Tx.call(e,t)})))}:Ep,Yr=function(e,t){return de(e,jk(e),t)},Mh=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},kk=Dp(Object.getPrototypeOf,Object),Gp=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Mh(t,jk(e)),e=kk(e);return t}:Ep,Wr=function(e,t){return de(e,Gp(e),t)},Hp=function(e,t,n){return t=t(e),Ya(e)?t:Mh(t,n(e))},Jh=function(e){return Hp(e,Rc,jk)},ql=function(e){return Hp(e,We,Gp)},lk=Gd(Bb,"DataView"),mk=Gd(Bb,"Promise"),nk=Gd(Bb,"WeakMap"),Ux=Fd(lk),Vx=Fd(Nf),Wx=Fd(mk),Xx=Fd(De),Yx=Fd(nk),Hd=Ed;(lk&&"[object DataView]"!=Hd(new lk(new ArrayBuffer(1)))||Nf&&"[object Map]"!=Hd(new Nf)||mk&&"[object Promise]"!=Hd(mk.resolve())||De&&"[object Set]"!=Hd(new De)||nk&&"[object WeakMap]"!=Hd(new nk))&&(Hd=function(e){var t=Ed(e);if(e=(e="[object Object]"==t?e.constructor:void 0)?Fd(e):"")switch(e){case Ux:return"[object DataView]";case Vx:return"[object Map]";case Wx:return"[object Promise]";case Xx:return"[object Set]";case Yx:return"[object WeakMap]"}return t});var Ue=Hd,Zx=Object.prototype.hasOwnProperty,Vr=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&Zx.call(e,"index")&&(n.index=e.index,n.input=e.input),n},ih=Bb.Uint8Array,ok=function(e){var t=new e.constructor(e.byteLength);return new ih(t).set(new ih(e)),t},$x=/\w*$/,Ip=Lb?Lb.prototype:void 0,Jp=Ip?Ip.valueOf:void 0,am=function(e,t){return t=t?ok(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.length)},$r=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return ok(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return t=n?ok(e.buffer):e.buffer,new e.constructor(t,e.byteOffset,e.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return am(e,n);case"[object Map]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return(t=new e.constructor(e.source,$x.exec(e))).lastIndex=e.lastIndex,t;case"[object Set]":return new r;case"[object Symbol]":return Jp?Object(Jp.call(e)):{}}},Kp=Object.create,ay=function(){function e(){}return function(t){return jb(t)?Kp?Kp(t):(e.prototype=t,t=new e,e.prototype=void 0,t):{}}}(),pl=function(e){return"function"!=typeof e.constructor||ik(e)?{}:ay(kk(e))},by=function(e){return cc(e)&&"[object Map]"==Ue(e)},Lp=Ee&&Ee.isMap,bs=Lp?hh(Lp):by,cy=function(e){return cc(e)&&"[object Set]"==Ue(e)},Mp=Ee&&Ee.isSet,as=Mp?hh(Mp):cy,ra={};ra["[object Arguments]"]=ra["[object Array]"]=ra["[object ArrayBuffer]"]=ra["[object DataView]"]=ra["[object Boolean]"]=ra["[object Date]"]=ra["[object Float32Array]"]=ra["[object Float64Array]"]=ra["[object Int8Array]"]=ra["[object Int16Array]"]=ra["[object Int32Array]"]=ra["[object Map]"]=ra["[object Number]"]=ra["[object Object]"]=ra["[object RegExp]"]=ra["[object Set]"]=ra["[object String]"]=ra["[object Symbol]"]=ra["[object Uint8Array]"]=ra["[object Uint8ClampedArray]"]=ra["[object Uint16Array]"]=ra["[object Uint32Array]"]=!0,ra["[object Error]"]=ra["[object Function]"]=ra["[object WeakMap]"]=!1;var Vd=function(e){return"symbol"==R(e)||cc(e)&&"[object Symbol]"==Ed(e)},dy=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ey=/^\w*$/,pk=function(e,t){if(Ya(e))return!1;var n=R(e);return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Vd(e))||(ey.test(e)||!dy.test(e)||null!=t&&e in Object(t))};Kh.Cache=bg;var fy=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,gy=/\\(\\)?/g,hy=function(e){var t=(e=Kh(e,(function(e){return 500===t.size&&t.clear(),e}))).cache;return e}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(fy,(function(e,n,r,i){t.push(r?i.replace(gy,"$1"):n||e)})),t})),ds=1/0,Np=Lb?Lb.prototype:void 0,tl=Np?Np.toString:void 0,jh=function(e,t){return Ya(e)?e:pk(e,t)?[e]:hy(null==e?"":sl(e))},iy=1/0,Pf=function(e){if("string"==typeof e||Vd(e))return e;var t=e+"";return"0"==t&&1/e==-iy?"-0":t},kh=function(e,t){for(var n=0,r=(t=jh(t,e)).length;null!=e&&n<r;)e=e[Pf(t[n++])];return n&&n==r?e:void 0},jy=function(e,t){if(!(2>(t=jh(t,e)).length)){var n=t,r=0,i=-1,o=-1,s=n.length;for(0>r&&(r=-r>s?0:s+r),0>(i=i>s?s:i)&&(i+=s),s=r>i?0:i-r>>>0,r>>>=0,i=Array(s);++o<s;)i[o]=n[o+r];e=kh(e,i)}return(n=null==e)||(n=null==t?0:t.length,n=delete e[Pf(n?t[n-1]:void 0)]),n},Op=Function.prototype.toString,ky=Object.prototype.hasOwnProperty,ly=Op.call(Object),bm=function(e){return!(!cc(e)||"[object Object]"!=Ed(e))&&(null===(e=kk(e))||"function"==typeof(e=ky.call(e,"constructor")&&e.constructor)&&e instanceof e&&Op.call(e)==ly)},my=function(e){return bm(e)?void 0:e},Pp=Lb?Lb.isConcatSpreadable:void 0,es=function(e){return Ya(e)||cf(e)||!!(Pp&&e&&e[Pp])},ny=function(e){return null!=e&&e.length?Lh(e,1):[]},oy=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},Qp=Math.max,Rp=function(e,t,n){return t=Qp(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=Qp(r.length-t,0),s=Array(o);++i<o;)s[i]=r[t+i];for(i=-1,o=Array(t+1);++i<t;)o[i]=r[i];return o[t]=n(s),oy(e,this,o)}},py=function(e){return function(){return e}},lh=function(e){return e},qy=Date.now,Sp=function(e){var t=0,n=0;return function(){var r=qy(),i=16-(r-n);if(n=r,0<i){if(800<=++t)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(gh?function(e,t){return gh(e,"toString",{configurable:!0,enumerable:!1,value:py(t),writable:!0})}:lh),rg=function(e){return Sp(Rp(e,void 0,ny),e+"")}((function(e,t){var n={};if(null==e)return n;var r=!1;t=Ud(t,(function(t){return t=jh(t,e),r||(r=1<t.length),t})),de(e,ql(e),n),r&&(n=dg(n,7,my));for(var i=t.length;i--;)jy(n,t[i]);return n})),ry=function(e,t,n,r){for(var i=-1,o=null==e?0:e.length;++i<o;){var s=e[i];t(r,s,n(s),e)}return r},$l=function(e,t,n){for(var r=-1,i=Object(e),o=(n=n(e)).length;o--;){var s=n[++r];if(!1===t(i[s],s,i))break}return e},Tp=function(e,t){return e&&$l(e,t,Rc)},qk=function(e,t){return function(t,n){if(null==t)return t;if(!sd(t))return e(t,n);for(var r=t.length,i=-1,o=Object(t);++i<r&&!1!==n(o[i],i,o););return t}}(Tp),sy=function(e,t,n,r){return qk(e,(function(e,i,o){t(r,e,n(e),o)})),r},Up=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1},ul=function(e,t,n,r,i,o){var s=1&n,a=e.length,u=t.length;if(a!=u&&!(s&&u>a))return!1;u=o.get(e);var c=o.get(t);if(u&&c)return u==t&&c==e;u=-1,c=!0;var l=2&n?new Te:void 0;for(o.set(e,t),o.set(t,e);++u<a;){var f=e[u],h=t[u];if(r)var p=s?r(h,f,u,t,e,o):r(f,h,u,e,t,o);if(void 0!==p){if(p)continue;c=!1;break}if(l){if(!Up(t,(function(e,t){if(!l.has(t)&&(f===e||i(f,e,n,r,o)))return l.push(t)}))){c=!1;break}}else if(f!==h&&!i(f,h,n,r,o)){c=!1;break}}return o.delete(e),o.delete(t),c},ty=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n},Vp=Lb?Lb.prototype:void 0,rk=Vp?Vp.valueOf:void 0,fs=function(e,t,n,r,i,o,s){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!o(new ih(e),new ih(t)))break;return!0;case"[object Boolean]":case"[object Date]":case"[object Number]":return Mf(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=ty;case"[object Set]":if(a||(a=ek),e.size!=t.size&&!(1&r))break;return(n=s.get(e))?n==t:(r|=2,s.set(e,t),t=ul(a(e),a(t),r,i,o,s),s.delete(e),t);case"[object Symbol]":if(rk)return rk.call(e)==rk.call(t)}return!1},gs=Object.prototype.hasOwnProperty,vl=Object.prototype.hasOwnProperty,uy=function(e,t,n,r){var i=n.length,o=i,s=!r;if(null==e)return!o;for(e=Object(e);i--;){var a=n[i];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){var u=(a=n[i])[0],c=e[u],l=a[1];if(s&&a[2]){if(void 0===c&&!(u in e))return!1}else{if(a=new Td,r)var f=r(c,l,u,e,t,a);if(void 0===f?!Wd(l,c,3,r,a):!f)return!1}}return!0},vy=function(e){for(var t=Rc(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,i==i&&!jb(i)]}return t},Wp=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}},wy=function(e){var t=vy(e);return 1==t.length&&t[0][2]?Wp(t[0][0],t[0][1]):function(n){return n===e||uy(n,e,t)}},xy=function(e,t){return pk(e)&&t==t&&!jb(t)?Wp(Pf(e),t):function(n){var r=null==n?void 0:kh(n,e);if(void 0===(r=void 0===r?void 0:r)&&r===t){if(r=null!=n){for(var i=-1,o=(r=jh(r=e,n)).length,s=!1;++i<o;){var a=Pf(r[i]);if(!(s=null!=n&&null!=n&&a in Object(n)))break;n=n[a]}s||++i!=o?r=s:r=!!(o=null==n?0:n.length)&&hk(o)&&gk(a,o)&&(Ya(n)||cf(n))}a=r}else a=Wd(t,r,3);return a}},yy=function(e){return function(t){return null==t?void 0:t[e]}},zy=function(e){return function(t){return kh(t,e)}},Fe=function(e){return"function"==typeof e?e:null==e?lh:"object"==R(e)?Ya(e)?xy(e[0],e[1]):wy(e):pk(e)?yy(Pf(e)):zy(e)},sk=function(e,t){return function(t,n){var r={};return(Ya(t)?ry:sy)(t,e,Fe(n),r)}}((function(e,t,n){Of(e,n,t)})),oc=function(e,t){var n={};return t=Fe(t),Tp(e,(function(e,r,i){Of(n,r,t(e,r,i))})),n};N({target:"String",proto:!0,forced:O((function(){var e="".sub('"');return e!==e.toLowerCase()||3<e.split('"').length}))},{sub:function(){return"<sub>"+String(hb(this))+"</sub>"}});var U=sa,Mb=null;try{Mb=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(c){}sa.prototype.__isLong__,Object.defineProperty(sa.prototype,"__isLong__",{value:!0}),sa.isLong=kb;var xl={},wl={};sa.fromInt=od,sa.fromNumber=Eb,sa.fromBits=ta;var eg=Math.pow;sa.fromString=Oh,sa.fromValue=Sb;var Xd=4294967296,yl=Xd*Xd,Al=yl/2,Xp=od(16777216),Fb=od(0);sa.ZERO=Fb;var pd=od(0,!0);sa.UZERO=pd;var Ge=od(1);sa.ONE=Ge;var Yp=od(1,!0);sa.UONE=Yp;var tk=od(-1);sa.NEG_ONE=tk;var Bl=ta(-1,2147483647,!1);sa.MAX_VALUE=Bl;var zl=ta(-1,-1,!0);sa.MAX_UNSIGNED_VALUE=zl;var lb=ta(0,-2147483648,!1);sa.MIN_VALUE=lb;var E=sa.prototype;E.toInt=function(){return this.unsigned?this.low>>>0:this.low},E.toNumber=function(){return this.unsigned?(this.high>>>0)*Xd+(this.low>>>0):this.high*Xd+(this.low>>>0)},E.toString=function(e){if(2>(e=e||10)||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(lb)){var t=Eb(e),n=this.div(t);return t=n.mul(t).sub(this),n.toString(e)+t.toInt().toString(e)}return"-"+this.neg().toString(e)}n=Eb(eg(e,6),this.unsigned),t=this;for(var r="";;){var i=t.div(n),o=(t.sub(i.mul(n)).toInt()>>>0).toString(e);if((t=i).isZero())return o+r;for(;6>o.length;)o="0"+o;r=""+o+r}},E.getHighBits=function(){return this.high},E.getHighBitsUnsigned=function(){return this.high>>>0},E.getLowBits=function(){return this.low},E.getLowBitsUnsigned=function(){return this.low>>>0},E.getNumBitsAbs=function(){if(this.isNegative())return this.eq(lb)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;0<t&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},E.isZero=function(){return 0===this.high&&0===this.low},E.eqz=E.isZero,E.isNegative=function(){return!this.unsigned&&0>this.high},E.isPositive=function(){return this.unsigned||0<=this.high},E.isOdd=function(){return 1==(1&this.low)},E.isEven=function(){return 0==(1&this.low)},E.equals=function(e){return kb(e)||(e=Sb(e)),(this.unsigned===e.unsigned||1!=this.high>>>31||1!=e.high>>>31)&&(this.high===e.high&&this.low===e.low)},E.eq=E.equals,E.notEquals=function(e){return!this.eq(e)},E.neq=E.notEquals,E.ne=E.notEquals,E.lessThan=function(e){return 0>this.comp(e)},E.lt=E.lessThan,E.lessThanOrEqual=function(e){return 0>=this.comp(e)},E.lte=E.lessThanOrEqual,E.le=E.lessThanOrEqual,E.greaterThan=function(e){return 0<this.comp(e)},E.gt=E.greaterThan,E.greaterThanOrEqual=function(e){return 0<=this.comp(e)},E.gte=E.greaterThanOrEqual,E.ge=E.greaterThanOrEqual,E.compare=function(e){if(kb(e)||(e=Sb(e)),this.eq(e))return 0;var t=this.isNegative(),n=e.isNegative();return t&&!n?-1:!t&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},E.comp=E.compare,E.negate=function(){return!this.unsigned&&this.eq(lb)?lb:this.not().add(Ge)},E.neg=E.negate,E.add=function(e){kb(e)||(e=Sb(e));var t=this.high>>>16,n=65535&this.high,r=this.low>>>16,i=e.high>>>16,o=65535&e.high,s=e.low>>>16;return r=(s=((e=(65535&this.low)+(65535&e.low))>>>16)+(r+s))>>>16,ta((65535&s)<<16|65535&e,(t=((r+=n+o)>>>16)+(t+i)&65535)<<16|65535&r,this.unsigned)},E.subtract=function(e){return kb(e)||(e=Sb(e)),this.add(e.neg())},E.sub=E.subtract,E.multiply=function(e){if(this.isZero())return Fb;if(kb(e)||(e=Sb(e)),Mb){var t=Mb.mul(this.low,this.high,e.low,e.high);return ta(t,Mb.get_high(),this.unsigned)}if(e.isZero())return Fb;if(this.eq(lb))return e.isOdd()?lb:Fb;if(e.eq(lb))return this.isOdd()?lb:Fb;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(Xp)&&e.lt(Xp))return Eb(this.toNumber()*e.toNumber(),this.unsigned);t=this.high>>>16;var n=65535&this.high,r=this.low>>>16,i=65535&this.low,o=e.high>>>16,s=65535&e.high,a=e.low>>>16,u=i*(e=65535&e.low),c=(u>>>16)+r*e,l=c>>>16;l+=(c=(65535&c)+i*a)>>>16;var f=(l+=n*e)>>>16;return ta((65535&c)<<16|65535&u,(f=(f+=(l=(65535&l)+r*a)>>>16)+((l=(65535&l)+i*s)>>>16)+(t*e+n*a+r*s+i*o)&65535)<<16|65535&l,this.unsigned)},E.mul=E.multiply,E.divide=function(e){if(kb(e)||(e=Sb(e)),e.isZero())throw Error("division by zero");if(Mb)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?ta(e=(this.unsigned?Mb.div_u:Mb.div_s)(this.low,this.high,e.low,e.high),Mb.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?pd:Fb;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return pd;if(e.gt(this.shru(1)))return Yp;var t=pd}else{if(this.eq(lb)){if(e.eq(Ge)||e.eq(tk))return lb;if(e.eq(lb))return Ge;var n=this.shr(1).div(e).shl(1);if(n.eq(Fb))return e.isNegative()?Ge:tk;var r=this.sub(e.mul(n));return n.add(r.div(e))}if(e.eq(lb))return this.unsigned?pd:Fb;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();t=Fb}for(r=this;r.gte(e);){n=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));var i=Math.ceil(Math.log(n)/Math.LN2);i=48>=i?1:eg(2,i-48);for(var o=Eb(n),s=o.mul(e);s.isNegative()||s.gt(r);)s=(o=Eb(n-=i,this.unsigned)).mul(e);o.isZero()&&(o=Ge),t=t.add(o),r=r.sub(s)}return t},E.div=E.divide,E.modulo=function(e){return kb(e)||(e=Sb(e)),Mb?ta(e=(this.unsigned?Mb.rem_u:Mb.rem_s)(this.low,this.high,e.low,e.high),Mb.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},E.mod=E.modulo,E.rem=E.modulo,E.not=function(){return ta(~this.low,~this.high,this.unsigned)},E.and=function(e){return kb(e)||(e=Sb(e)),ta(this.low&e.low,this.high&e.high,this.unsigned)},E.or=function(e){return kb(e)||(e=Sb(e)),ta(this.low|e.low,this.high|e.high,this.unsigned)},E.xor=function(e){return kb(e)||(e=Sb(e)),ta(this.low^e.low,this.high^e.high,this.unsigned)},E.shiftLeft=function(e){return kb(e)&&(e=e.toInt()),0==(e&=63)?this:32>e?ta(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):ta(0,this.low<<e-32,this.unsigned)},E.shl=E.shiftLeft,E.shiftRight=function(e){return kb(e)&&(e=e.toInt()),0==(e&=63)?this:32>e?ta(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):ta(this.high>>e-32,0<=this.high?0:-1,this.unsigned)},E.shr=E.shiftRight,E.shiftRightUnsigned=function(e){if(kb(e)&&(e=e.toInt()),0===(e&=63))return this;var t=this.high;return 32>e?ta(this.low>>>e|t<<32-e,t>>>e,this.unsigned):ta(32===e?t:t>>>e-32,0,this.unsigned)},E.shru=E.shiftRightUnsigned,E.shr_u=E.shiftRightUnsigned,E.toSigned=function(){return this.unsigned?ta(this.low,this.high,!1):this},E.toUnsigned=function(){return this.unsigned?this:ta(this.low,this.high,!0)},E.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},E.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},E.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},sa.fromBytes=function(e,t,n){return n?sa.fromBytesLE(e,t):sa.fromBytesBE(e,t)},sa.fromBytesLE=function(e,t){return new sa(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},sa.fromBytesBE=function(e,t){return new sa(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var Ph=function(e,t){return(Ph=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},uk=!1,Gb={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e?console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+Error().stack):uk&&console.log("RxJS: Back to a better error behavior. Thank you. <3"),uk=e},get useDeprecatedSynchronousErrorHandling(){return uk}},mh={closed:!0,next:function(e){},error:function(e){if(Gb.useDeprecatedSynchronousErrorHandling)throw e;Zd(e)},complete:function(){}},Hb=Array.isArray||function(e){return e&&"number"==typeof e.length},Xe=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),Ka=function(){function e(e){this.closed=!1,this._subscriptions=this._parentOrParents=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){if(!this.closed){var t=this._parentOrParents,n=this._ctorUnsubscribe,r=this._unsubscribe,i=this._subscriptions;if(this.closed=!0,this._subscriptions=this._parentOrParents=null,t instanceof e)t.remove(this);else if(null!==t)for(var o=0;o<t.length;++o)t[o].remove(this);if(Yd(r)){n&&(this._unsubscribe=void 0);try{r.call(this)}catch(e){var s=e instanceof Xe?Cl(e.errors):[e]}}if(Hb(i))for(o=-1,t=i.length;++o<t;)if(Qh(n=i[o]))try{n.unsubscribe()}catch(e){s=s||[],e instanceof Xe?s=s.concat(Cl(e.errors)):s.push(e)}if(s)throw new Xe(s)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(R(t)){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;n instanceof e||(t=n,(n=new e)._subscriptions=[t]);break;default:throw Error("unrecognized teardown "+t+" added to Subscription.")}if(null===(t=n._parentOrParents))n._parentOrParents=this;else if(t instanceof e){if(t===this)return n;n._parentOrParents=[t,this]}else{if(-1!==t.indexOf(this))return n;t.push(this)}return null===(t=this._subscriptions)?this._subscriptions=[n]:t.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;t&&(-1!==(e=t.indexOf(e))&&t.splice(e,1))},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}(),nh="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),fa=function(e){function t(n,r,i){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=mh;break;case 1:if(!n){o.destination=mh;break}if("object"===R(n)){n instanceof t?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new Zp(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new Zp(o,n,r,i)}return o}return M(t,e),t.prototype[nh]=function(){return this},t.create=function(e,n,r){return(e=new t(e,n,r)).syncErrorThrowable=!1,e},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.isStopped=this.closed=!1,this._parentOrParents=e,this},t}(Ka),Zp=function(e){function t(t,n,r,i){var o=e.call(this)||this;if(o._parentSubscriber=t,t=o,Yd(n))var s=n;else n&&(s=n.next,r=n.error,i=n.complete,n!==mh&&(Yd((t=Object.create(n)).unsubscribe)&&o.add(t.unsubscribe.bind(t)),t.unsubscribe=o.unsubscribe.bind(o)));return o._context=t,o._next=s,o._error=r,o._complete=i,o}return M(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;Gb.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=Gb.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?this.__tryOrSetError(t,this._error,e):this.__tryOrUnsub(this._error,e),this.unsubscribe();else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Zd(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Zd(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};Gb.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,n):this.__tryOrUnsub(n)}this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),Gb.useDeprecatedSynchronousErrorHandling)throw e;Zd(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!Gb.useDeprecatedSynchronousErrorHandling)throw Error("bad call");try{t.call(this._context,n)}catch(t){return Gb.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0):Zd(t),!0}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._parentSubscriber=this._context=null,e.unsubscribe()},t}(fa),$d="function"==typeof Symbol&&Symbol.observable||"@@observable",V=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator;e:{if(e){if(e instanceof fa)break e;if(e[nh]){e=e[nh]();break e}}e=e||t||n?new fa(e,t,n):new fa(mh)}if(r?e.add(r.call(e,this.source)):e.add(this.source||Gb.useDeprecatedSynchronousErrorHandling&&!e.syncErrorThrowable?this._subscribe(e):this._trySubscribe(e)),Gb.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable&&(e.syncErrorThrowable=!1,e.syncErrorThrown))throw e.syncErrorValue;return e},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){Gb.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),Rh(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=El(t))((function(t,r){var i=n.subscribe((function(t){try{e(t)}catch(e){r(e),i&&i.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[$d]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:Dl(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=El(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}(),fd=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),$p=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return M(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;this.subject=null,!t||0===t.length||e.isStopped||e.closed||-1!==(e=t.indexOf(this.subscriber))&&t.splice(e,1)}},t}(Ka),aq=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return M(t,e),t}(fa),La=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return M(t,e),t.prototype[nh]=function(){return new aq(this)},t.prototype.lift=function(e){var t=new bq(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new fd;if(!this.isStopped){var t=this.observers,n=t.length;t=t.slice();for(var r=0;r<n;r++)t[r].next(e)}},t.prototype.error=function(e){if(this.closed)throw new fd;this.hasError=!0,this.thrownError=e,this.isStopped=!0;var t=this.observers,n=t.length;t=t.slice();for(var r=0;r<n;r++)t[r].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new fd;this.isStopped=!0;var e=this.observers,t=e.length;e=e.slice();for(var n=0;n<t;n++)e[n].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.closed=this.isStopped=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new fd;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new fd;return this.hasError?(e.error(this.thrownError),Ka.EMPTY):this.isStopped?(e.complete(),Ka.EMPTY):(this.observers.push(e),new $p(this,e))},t.prototype.asObservable=function(){var e=new V;return e.source=this,e},t.create=function(e,t){return new bq(e,t)},t}(V),bq=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return M(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):Ka.EMPTY},t}(La),hs=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;return n._refCount++,e=new Ay(e,n),t=t.subscribe(e),e.closed||(e.connection=n.connect()),t},e}(),Ay=function(e){function t(t,n){return(t=e.call(this,t)||this).connectable=n,t}return M(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;0>=t?this.connection=null:(e._refCount=t-1,1<t?this.connection=null:(t=this.connection,e=e._connection,this.connection=null,!e||t&&e!==t||e.unsubscribe()))}else this.connection=null},t}(fa),cq=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return M(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new Ka).add(this.source.subscribe(new By(this.getSubject(),this))),e.closed&&(this._connection=null,e=Ka.EMPTY)),e},t.prototype.refCount=function(){return Fl()(this)},t}(V),Vs=function(){var e=cq.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}}(),By=function(e){function t(t,n){return(t=e.call(this,t)||this).connectable=n,t}return M(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(aq);!function(e){function t(t,n){return(t=e.call(this,t)||this).connectable=n,t}M(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;0>=t?this.connection=null:(e._refCount=t-1,1<t?this.connection=null:(t=this.connection,e=e._connection,this.connection=null,!e||t&&e!==t||e.unsubscribe()))}else this.connection=null}}(fa),function(e){function t(t,n,r,i,o){return(t=e.call(this,t)||this).keySelector=n,t.elementSelector=r,t.durationSelector=i,t.subjectSelector=o,t.groups=null,t.attemptedToUnsubscribe=!1,t.count=0,t}M(t,e),t.prototype._next=function(e){try{var t=this.keySelector(e)}catch(e){return void this.error(e)}this._group(e,t)},t.prototype._group=function(e,t){var n=this.groups;n||(n=this.groups=new Map);var r=n.get(t);if(this.elementSelector)try{var i=this.elementSelector(e)}catch(e){this.error(e)}else i=e;if(!r&&(r=this.subjectSelector?this.subjectSelector():new La,n.set(t,r),e=new vk(t,r,this),this.destination.next(e),this.durationSelector)){e=void 0;try{e=this.durationSelector(new vk(t,r))}catch(e){return void this.error(e)}this.add(e.subscribe(new Cy(t,r,this)))}r.closed||r.next(i)},t.prototype._error=function(e){var t=this.groups;t&&(t.forEach((function(t,n){t.error(e)})),t.clear()),this.destination.error(e)},t.prototype._complete=function(){var e=this.groups;e&&(e.forEach((function(e,t){e.complete()})),e.clear()),this.destination.complete()},t.prototype.removeGroup=function(e){this.groups.delete(e)},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&e.prototype.unsubscribe.call(this))}}(fa);var Cy=function(e){function t(t,n,r){var i=e.call(this,n)||this;return i.key=t,i.group=n,i.parent=r,i}return M(t,e),t.prototype._next=function(e){this.complete()},t.prototype._unsubscribe=function(){var e=this.parent,t=this.key;this.key=this.parent=null,e&&e.removeGroup(t)},t}(fa),vk=function(e){function t(t,n,r){var i=e.call(this)||this;return i.key=t,i.groupSubject=n,i.refCountSubscription=r,i}return M(t,e),t.prototype._subscribe=function(e){var t=new Ka,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&t.add(new Dy(n)),t.add(r.subscribe(e)),t},t}(V),Dy=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,t.count++,n}return M(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),--t.count,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(Ka),Ey=function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}return M(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return n&&!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new fd;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(La),Qf=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return M(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e,e=this.id;var n=this.scheduler;return null!=e&&(this.id=this.recycleAsyncId(n,e,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(n,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){return this.closed?Error("executing a cancelled action"):(this.pending=!1,(e=this._execute(e,t))?e:void(!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))))},t.prototype._execute=function(e,t){t=!1;var n=void 0;try{this.work(e)}catch(e){t=!0,n=!!e&&e||Error(e)}if(t)return this.unsubscribe(),n},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.state=this.work=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,n){return e.call(this)||this}return M(t,e),t.prototype.schedule=function(e,t){return this},t}(Ka)),Fy=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return M(t,e),t.prototype.schedule=function(t,n){return void 0===n&&(n=0),0<n?e.prototype.schedule.call(this,t,n):(this.delay=n,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,n){return 0<n||this.closed?e.prototype.execute.call(this,t,n):this._execute(t,n)},t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay?e.prototype.requestAsyncId.call(this,t,n,r):t.flush(this)},t}(Qf),wk=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}(),Rf=function(e){function t(n,r){void 0===r&&(r=wk.now);var i=e.call(this,n,(function(){return t.delegate&&t.delegate!==i?t.delegate.now():r()}))||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return M(t,e),t.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,i):e.prototype.schedule.call(this,n,r,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(wk),oh=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),t}(Rf))(Fy),dc=new V((function(e){return e.complete()})),Gl=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}},xk;!function(e){e.NEXT="N",e.ERROR="E",e.COMPLETE="C"}(xk||(xk={}));var He=function(){function e(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}},e.prototype.accept=function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)},e.prototype.toObservable=function(){switch(this.kind){case"N":return mb(this.value);case"E":return ba(this.error);case"C":return Ye()}throw Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}(),ls=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new dq(e,this.scheduler,this.delay))},e}(),dq=function(e){function t(t,n,r){return void 0===r&&(r=0),(t=e.call(this,t)||this).scheduler=n,t.delay=r,t}return M(t,e),t.dispatch=function(e){e.notification.observe(e.destination),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new Gy(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(He.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(He.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(He.createComplete()),this.unsubscribe()},t}(fa),Gy=function(e,t){this.notification=e,this.destination=t},ce=function(e){function t(t,n,r){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=e.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=1>t?1:t,i._windowTime=1>n?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return M(t,e),t.prototype.nextInfiniteTimeWindow=function(t){if(!this.isStopped){var n=this._events;n.push(t),n.length>this._bufferSize&&n.shift()}e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this.isStopped||(this._events.push(new Hy(this._getNow(),t)),this._trimBufferThenGetEvents()),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t=this._infiniteTimeWindow,n=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;if(this.closed)throw new fd;if(this.isStopped||this.hasError)var o=Ka.EMPTY;else this.observers.push(e),o=new $p(this,e);if(r&&e.add(e=new dq(e,r)),t)for(t=0;t<i&&!e.closed;t++)e.next(n[t]);else for(t=0;t<i&&!e.closed;t++)e.next(n[t].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),o},t.prototype._getNow=function(){return(this.scheduler||oh).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(e-r[o].time<n);)o++;return i>t&&(o=Math.max(o,i-t)),0<o&&r.splice(0,o),r},t}(La),Hy=function(e,t){this.time=e,this.value=t},$e=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return M(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),Ka.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),Ka.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(La),Iy=1,Jy=Promise.resolve(),Uh={},eq={setImmediate:function(e){var t=Iy++;return Uh[t]=!0,Jy.then((function(){return Hl(t)&&e()})),t},clearImmediate:function(e){Hl(e)}},Ky=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return M(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&0<r?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=eq.setImmediate(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(eq.clearImmediate(n),t.scheduled=void 0)},t}(Qf),di=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(Rf))(Ky),Ly=di,yk=new Rf(Qf),Vc=yk,My=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r}return M(t,e),t.prototype.requestAsyncId=function(t,n,r){return void 0===r&&(r=0),null!==r&&0<r?e.prototype.requestAsyncId.call(this,t,n,r):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame((function(){return t.flush(null)}))))},t.prototype.recycleAsyncId=function(t,n,r){if(void 0===r&&(r=0),null!==r&&0<r||null===r&&0<this.delay)return e.prototype.recycleAsyncId.call(this,t,n,r);0===t.actions.length&&(cancelAnimationFrame(n),t.scheduled=void 0)},t}(Qf),fq=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}},t}(Rf))(My),Ny=function(e){function t(t,n){void 0===t&&(t=gq),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=e.call(this,t,(function(){return r.frame}))||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return M(t,e),t.prototype.flush=function(){for(var e,t,n=this.actions,r=this.maxFrames;(t=n[0])&&t.delay<=r&&(n.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=n.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(Rf),gq=function(e){function t(t,n,r){void 0===r&&(r=t.index+=1);var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.index=r,i.active=!0,i.index=t.index=r,i}return M(t,e),t.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return e.prototype.schedule.call(this,n,r);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(n,r)},t.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),this.delay=e.frame+r,(e=e.actions).push(this),e.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,n){},t.prototype._execute=function(t,n){if(!0===this.active)return e.prototype._execute.call(this,t,n)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(Qf),zk=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}(),gg=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),pb=function(){function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e}(),ms=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Oy(e,this.project,this.thisArg))},e}(),Oy=function(e){function t(t,n,r){return(t=e.call(this,t)||this).project=n,t.count=0,t.thisArg=r||t,t}return M(t,e),t.prototype._next=function(e){try{var t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(fa),Ak=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(fa),rs=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parent=t,i.outerValue=n,i.outerIndex=r,i.index=0,i}return M(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(fa),Py=function(e){return function(t){return e.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,Zd),t}},Uc="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",Qy=function(e){return function(t){for(var n=e[Uc]();;){var r=void 0;try{r=n.next()}catch(e){return t.error(e),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add((function(){n.return&&n.return()})),t}},Ry=function(e){return function(t){var n=e[$d]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)}},Nl=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e},af=function(e){if(e&&"function"==typeof e[$d])return Ry(e);if(Nl(e))return Gl(e);if(Ll(e))return Py(e);if(e&&"function"==typeof e[Uc])return Qy(e);throw e=Qh(e)?"an invalid object":"'"+e+"'",new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")},hq={},Ty=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new Sy(e,this.resultSelector))},e}(),Sy=function(e){function t(t,n){return(t=e.call(this,t)||this).resultSelector=n,t.active=0,t.values=[],t.observables=[],t}return M(t,e),t.prototype._next=function(e){this.values.push(hq),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.toRespond=this.active=t;for(var n=0;n<t;n++)this.add(Vh(this,e[n],void 0,n))}},t.prototype.notifyComplete=function(e){0==--this.active&&this.destination.complete()},t.prototype.notifyNext=function(e,t,n){var r=(e=this.values)[n];r=this.toRespond?r===hq?--this.toRespond:this.toRespond:0,e[n]=t,0===r&&(this.resultSelector?this._tryResultSelector(e):this.destination.next(e.slice()))},t.prototype._tryResultSelector=function(e){try{var t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(Ak),pc=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,n}return M(t,e),t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(fa);!function(e){function t(t,n,r){var i=e.call(this)||this;return i.parent=t,i.outerValue=n,i.outerIndex=r,i}M(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()}}(fa);var qc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(fa);!function(e){function t(){return null!==e&&e.apply(this,arguments)||this}M(t,e),t.prototype.notifyNext=function(e,t,n,r){this.destination.next(t)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()}}(fa);var vs=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new Uy(e,this.project,this.concurrent))},e}(),Uy=function(e){function t(t,n,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),(t=e.call(this,t)||this).project=n,t.concurrent=r,t.hasCompleted=!1,t.buffer=[],t.active=0,t.index=0,t}return M(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t=this.index++;try{var n=this.project(e,t)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(n)},t.prototype._innerSub=function(e){var t=new pc(this),n=this.destination;n.add(t),(e=fc(e,t))!==t&&n.add(e)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,0<e.length?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(qc),Bk=B.parseFloat,iq=-1/0!=1/Bk("\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff-0")?function(e){e=Tj(String(e));var t=Bk(e);return 0===t&&"-"==e.charAt(0)?-0:t}:Bk;N({global:!0,forced:parseFloat!=iq},{parseFloat:iq});var Ck=new V(ec),As=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Vy(e,this.predicate,this.thisArg))},e}(),Vy=function(e){function t(t,n,r){return(t=e.call(this,t)||this).predicate=n,t.thisArg=r,t.count=0,t}return M(t,e),t.prototype._next=function(e){try{var t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(fa),Bs=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new Wy(e))},e}(),Wy=function(e){function t(t){return(t=e.call(this,t)||this).hasFirst=!1,t.observables=[],t.subscriptions=[],t}return M(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var r=Vh(this,e[n],void 0,n);this.subscriptions&&this.subscriptions.push(r),this.add(r)}this.observables=null}},t.prototype.notifyNext=function(e,t,n){if(!this.hasFirst){for(this.hasFirst=!0,e=0;e<this.subscriptions.length;e++)if(e!==n){var r=this.subscriptions[e];r.unsubscribe(),this.remove(r)}this.subscriptions=null}this.destination.next(t)},t}(Ak),Es=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new Xy(e,this.resultSelector))},e}(),Xy=function(e){function t(t,n,r){return(t=e.call(this,t)||this).resultSelector=n,t.iterators=[],t.active=0,t.resultSelector="function"==typeof n?n:void 0,t}return M(t,e),t.prototype._next=function(e){var t=this.iterators;Hb(e)?t.push(new Yy(e)):"function"==typeof e[Uc]?t.push(new Zy(e[Uc]())):t.push(new $y(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0===t)this.destination.complete();else{this.active=t;for(var n=0;n<t;n++){var r=e[n];r.stillUnsubscribed?this.destination.add(r.subscribe()):this.active--}}},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,n=this.destination,r=0;r<t;r++){var i=e[r];if("function"==typeof i.hasValue&&!i.hasValue())return}var o=!1,s=[];for(r=0;r<t;r++){var a=(i=e[r]).next();if(i.hasCompleted()&&(o=!0),a.done)return void n.complete();s.push(a.value)}this.resultSelector?this._tryresultSelector(s):n.next(s),o&&n.complete()},t.prototype._tryresultSelector=function(e){try{var t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(fa),Zy=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return!(!e||!e.done)},e}(),Yy=function(){function e(e){this.array=e,this.length=this.index=0,this.length=e.length}return e.prototype[Uc]=function(){return this},e.prototype.next=function(e){e=this.index++;var t=this.array;return e<this.length?{value:t[e],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),$y=function(e){function t(t,n,r){return(t=e.call(this,t)||this).parent=n,t.observable=r,t.stillUnsubscribed=!0,t.buffer=[],t.isComplete=!1,t}return M(t,e),t.prototype[Uc]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return 0<this.buffer.length},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){0<this.buffer.length?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e){this.buffer.push(e),this.parent.checkIterators()},t.prototype.subscribe=function(){return fc(this.observable,new pc(this))},t}(qc),az=Object.freeze({__proto__:null,Observable:V,ConnectableObservable:cq,GroupedObservable:vk,observable:$d,Subject:La,BehaviorSubject:Ey,ReplaySubject:ce,AsyncSubject:$e,asap:Ly,asapScheduler:di,async:Vc,asyncScheduler:yk,queue:oh,queueScheduler:oh,animationFrame:fq,animationFrameScheduler:fq,VirtualTimeScheduler:Ny,VirtualAction:gq,Scheduler:wk,Subscription:Ka,Subscriber:fa,Notification:He,get NotificationKind(){return xk},pipe:Sh,noop:ec,identity:Sc,isObservable:function(e){return!!e&&(e instanceof V||"function"==typeof e.lift&&"function"==typeof e.subscribe)},ArgumentOutOfRangeError:zk,EmptyError:gg,ObjectUnsubscribedError:fd,UnsubscriptionError:Xe,TimeoutError:pb,bindCallback:Il,bindNodeCallback:Jl,combineLatest:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=t=void 0;return Tc(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&Hb(e[0])&&(e=e[0]),Ze(e,n).lift(new Ty(t))},concat:Ol,defer:qd,empty:Ye,forkJoin:Pl,from:Ib,fromEvent:fb,fromEventPattern:Rl,generate:function(e,t,n,r,i){if(1==arguments.length){var o=e.initialState;t=e.condition,n=e.iterate;var s=e.resultSelector||Sc;i=e.scheduler}else void 0===r||Tc(r)?(o=e,s=Sc,i=r):(o=e,s=r);return new V((function(e){var r=o;if(i)return i.schedule(ws,0,{subscriber:e,iterate:n,condition:t,resultSelector:s,state:r});for(;;){if(t){var a=void 0;try{a=t(r)}catch(t){e.error(t);break}if(!a){e.complete();break}}a=void 0;try{a=s(r)}catch(t){e.error(t);break}if(e.next(a),e.closed)break;try{r=n(r)}catch(t){e.error(t);break}}}))},iif:function(e,t,n){return void 0===t&&(t=dc),void 0===n&&(n=dc),qd((function(){return e()?t:n}))},interval:Sl,merge:Tb,never:function(){return Ck},of:mb,onErrorResumeNext:Yh,pairs:function(e,t){return new V(t?function(n){var r=Object.keys(e),i=new Ka;return i.add(t.schedule(ys,0,{keys:r,index:0,subscriber:n,subscription:i,obj:e})),i}:function(t){for(var n=Object.keys(e),r=0;r<n.length&&!t.closed;r++){var i=n[r];e.hasOwnProperty(i)&&t.next([i,e[i]])}t.complete()})},partition:function(e,t,n){return[nb(t,n)(new V(af(e))),nb(zs(t,n))(new V(af(e)))]},race:ya,range:function(e,t,n){return void 0===e&&(e=0),new V((function(r){void 0===t&&(t=e,e=0);var i=0,o=e;if(n)return n.schedule(Cs,0,{index:i,count:t,start:e,subscriber:r});for(;;){if(i++>=t){r.complete();break}if(r.next(o++),r.closed)break}}))},throwError:ba,timer:uc,using:function(e,t){return new V((function(n){try{var r=e()}catch(e){return void n.error(e)}try{var i=t(r)}catch(e){return void n.error(e)}var o=(i?Ib(i):dc).subscribe(n);return function(){o.unsubscribe(),r&&r.unsubscribe()}}))},zip:Zh,scheduled:Ml,EMPTY:dc,NEVER:Ck,config:Gb}),Fs=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new bz(e,this.selector,this.caught))},e}(),bz=function(e){function t(t,n,r){return(t=e.call(this,t)||this).selector=n,t.caught=r,t}return M(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=void 0;try{n=this.selector(t,this.caught)}catch(t){return void e.prototype.error.call(this,t)}this._unsubscribeAndRecycle(),t=new pc(this),this.add(t),(n=fc(n,t))!==t&&this.add(n)}},t}(qc),Gs=function(){function e(e){this.defaultValue=e}return e.prototype.call=function(e,t){return t.subscribe(new cz(e,this.defaultValue))},e}(),cz=function(e){function t(t,n){return(t=e.call(this,t)||this).defaultValue=n,t.isEmpty=!0,t}return M(t,e),t.prototype._next=function(e){this.isEmpty=!1,this.destination.next(e)},t.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},t}(fa),Hs=function(){function e(e,t){this.delay=e,this.scheduler=t}return e.prototype.call=function(e,t){return t.subscribe(new dz(e,this.delay,this.scheduler))},e}(),dz=function(e){function t(t,n,r){return(t=e.call(this,t)||this).delay=n,t.scheduler=r,t.queue=[],t.active=!1,t.errored=!1,t}return M(t,e),t.dispatch=function(e){for(var t=e.source,n=t.queue,r=e.scheduler,i=e.destination;0<n.length&&0>=n[0].time-r.now();)n.shift().notification.observe(i);0<n.length?(t=Math.max(0,n[0].time-r.now()),this.schedule(e,t)):(this.unsubscribe(),t.active=!1)},t.prototype._schedule=function(e){this.active=!0,this.destination.add(e.schedule(t.dispatch,this.delay,{source:this,destination:this.destination,scheduler:e}))},t.prototype.scheduleNotification=function(e){if(!0!==this.errored){var t=this.scheduler;e=new ez(t.now()+this.delay,e),this.queue.push(e),!1===this.active&&this._schedule(t)}},t.prototype._next=function(e){this.scheduleNotification(He.createNext(e))},t.prototype._error=function(e){this.errored=!0,this.queue=[],this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.scheduleNotification(He.createComplete()),this.unsubscribe()},t}(fa),ez=function(e,t){this.time=e,this.notification=t},Is=function(){function e(e,t){this.keySelector=e,this.flushes=t}return e.prototype.call=function(e,t){return t.subscribe(new fz(e,this.keySelector,this.flushes))},e}(),fz=function(e){function t(t,n,r){return(t=e.call(this,t)||this).keySelector=n,t.values=new Set,r&&t.add(fc(r,new pc(t))),t}return M(t,e),t.prototype.notifyNext=function(){this.values.clear()},t.prototype.notifyError=function(e){this._error(e)},t.prototype._next=function(e){this.keySelector?this._useKeySelector(e):this._finalizeNext(e,e)},t.prototype._useKeySelector=function(e){var t=this.destination;try{var n=this.keySelector(e)}catch(e){return void t.error(e)}this._finalizeNext(n,e)},t.prototype._finalizeNext=function(e,t){var n=this.values;n.has(e)||(n.add(e),this.destination.next(t))},t}(qc),Ks=function(){function e(e){this.errorFactory=e}return e.prototype.call=function(e,t){return t.subscribe(new gz(e,this.errorFactory))},e}(),gz=function(e){function t(t,n){return(t=e.call(this,t)||this).errorFactory=n,t.hasValue=!1,t}return M(t,e),t.prototype._next=function(e){this.hasValue=!0,this.destination.next(e)},t.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var e=void 0;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)},t}(fa),Ls=function(){function e(e){if(this.total=e,0>this.total)throw new zk}return e.prototype.call=function(e,t){return t.subscribe(new hz(e,this.total))},e}(),hz=function(e){function t(t,n){return(t=e.call(this,t)||this).total=n,t.count=0,t}return M(t,e),t.prototype._next=function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))},t}(fa),Ms=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new iz(e,this.project))},e}(),iz=function(e){function t(t,n){return(t=e.call(this,t)||this).project=n,t.hasSubscription=!1,t.hasCompleted=!1,t.index=0,t}return M(t,e),t.prototype._next=function(e){this.hasSubscription||this.tryNext(e)},t.prototype.tryNext=function(e){var t=this.index++;try{var n=this.project(e,t)}catch(e){return void this.destination.error(e)}this.hasSubscription=!0,this._innerSub(n)},t.prototype._innerSub=function(e){var t=new pc(this),n=this.destination;n.add(t),(e=fc(e,t))!==t&&n.add(e)},t.prototype._complete=function(){this.hasCompleted=!0,this.hasSubscription||this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.hasSubscription=!1,this.hasCompleted&&this.destination.complete()},t}(qc),Ns=function(){function e(e){this.callback=e}return e.prototype.call=function(e,t){return t.subscribe(new jz(e,this.callback))},e}(),jz=function(e){function t(t,n){return(t=e.call(this,t)||this).add(new Ka(n)),t}return M(t,e),t}(fa),Ps=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new kz(e))},e}(),kz=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return M(t,e),t.prototype._next=function(e){},t}(fa),Qs=function(){function e(e){if(this.total=e,0>this.total)throw new zk}return e.prototype.call=function(e,t){return t.subscribe(new lz(e,this.total))},e}(),lz=function(e){function t(t,n){return(t=e.call(this,t)||this).total=n,t.ring=[],t.count=0,t}return M(t,e),t.prototype._next=function(e){var t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e},t.prototype._complete=function(){var e=this.destination,t=this.count;if(0<t)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=t++%n;e.next(r[o])}e.complete()},t}(fa),Rs=function(){function e(e){this.value=e}return e.prototype.call=function(e,t){return t.subscribe(new mz(e,this.value))},e}(),mz=function(e){function t(t,n){return(t=e.call(this,t)||this).value=n,t}return M(t,e),t.prototype._next=function(e){this.destination.next(this.value)},t}(fa),Ss=function(){function e(e,t,n){void 0===n&&(n=!1),this.accumulator=e,this.seed=t,this.hasSeed=n}return e.prototype.call=function(e,t){return t.subscribe(new nz(e,this.accumulator,this.seed,this.hasSeed))},e}(),nz=function(e){function t(t,n,r,i){return(t=e.call(this,t)||this).accumulator=n,t._seed=r,t.hasSeed=i,t.index=0,t}return M(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t=this.index++;try{var n=this.accumulator(this.seed,e,t)}catch(e){this.destination.error(e)}this.seed=n,this.destination.next(n)},t}(fa),Us=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var n=this.selector,r=this.subjectFactory();return(e=n(r).subscribe(e)).add(t.subscribe(r)),e},e}(),Ws=function(){function e(e,t){this.notifier=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new oz(e,this.notifier,this.source))},e}(),oz=function(e){function t(t,n,r){return(t=e.call(this,t)||this).notifier=n,t.source=r,t}return M(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=this.errors,r=this.retries,i=this.retriesSubscription;if(r)this.retriesSubscription=this.errors=void 0;else{n=new La;try{r=(0,this.notifier)(n)}catch(t){return e.prototype.error.call(this,t)}i=fc(r,new pc(this))}this._unsubscribeAndRecycle(),this.errors=n,this.retries=r,this.retriesSubscription=i,n.next(t)}},t.prototype._unsubscribe=function(){var e=this.errors,t=this.retriesSubscription;e&&(e.unsubscribe(),this.errors=void 0),t&&(t.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},t.prototype.notifyNext=function(){var e=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=e,this.source.subscribe(this)},t}(qc),Zs=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new pz(e,this.project))},e}(),pz=function(e){function t(t,n){return(t=e.call(this,t)||this).project=n,t.index=0,t}return M(t,e),t.prototype._next=function(e){var t=this.index++;try{var n=this.project(e,t)}catch(e){return void this.destination.error(e)}this._innerSub(n)},t.prototype._innerSub=function(e){var t=this.innerSubscription;t&&t.unsubscribe(),t=new pc(this);var n=this.destination;n.add(t),this.innerSubscription=fc(e,t),this.innerSubscription!==t&&n.add(this.innerSubscription)},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=void 0},t.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e){this.destination.next(e)},t}(qc),$s=function(){function e(e){this.notifier=e}return e.prototype.call=function(e,t){e=new qz(e);var n=fc(this.notifier,new pc(e));return n&&!e.seenValue?(e.add(n),t.subscribe(e)):e},e}(),qz=function(e){function t(t){return(t=e.call(this,t)||this).seenValue=!1,t}return M(t,e),t.prototype.notifyNext=function(){this.seenValue=!0,this.complete()},t.prototype.notifyComplete=function(){},t}(qc),bt=function(){function e(e,t){this.predicate=e,this.inclusive=t}return e.prototype.call=function(e,t){return t.subscribe(new rz(e,this.predicate,this.inclusive))},e}(),rz=function(e){function t(t,n,r){return(t=e.call(this,t)||this).predicate=n,t.inclusive=r,t.index=0,t}return M(t,e),t.prototype._next=function(e){var t=this.destination;try{var n=this.predicate(e,this.index++)}catch(e){return void t.error(e)}this.nextOrComplete(e,n)},t.prototype.nextOrComplete=function(e,t){var n=this.destination;t?n.next(e):(this.inclusive&&n.next(e),n.complete())},t}(fa),ct=function(){function e(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}return e.prototype.call=function(e,t){return t.subscribe(new sz(e,this.nextOrObserver,this.error,this.complete))},e}(),sz=function(e){function t(t,n,r,i){return(t=e.call(this,t)||this)._tapNext=ec,t._tapError=ec,t._tapComplete=ec,t._tapError=r||ec,t._tapComplete=i||ec,Yd(n)?(t._context=t,t._tapNext=n):n&&(t._context=n,t._tapNext=n.next||ec,t._tapError=n.error||ec,t._tapComplete=n.complete||ec),t}return M(t,e),t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},t}(fa),et={leading:!0,trailing:!1};!function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.destination=t,o.durationSelector=n,o._leading=r,o._trailing=i,o._hasValue=!1,o}M(t,e),t.prototype._next=function(e){this._hasValue=!0,this._sendValue=e,this._throttled||(this._leading?this.send():this.throttle(e))},t.prototype.send=function(){var e=this._sendValue;this._hasValue&&(this.destination.next(e),this.throttle(e)),this._hasValue=!1,this._sendValue=void 0},t.prototype.throttle=function(e){(e=this.tryDurationSelector(e))&&this.add(this._throttled=fc(e,new pc(this)))},t.prototype.tryDurationSelector=function(e){try{return this.durationSelector(e)}catch(e){return this.destination.error(e),null}},t.prototype.throttlingDone=function(){var e=this._throttled,t=this._trailing;e&&e.unsubscribe(),this._throttled=void 0,t&&this.send()},t.prototype.notifyNext=function(){this.throttlingDone()},t.prototype.notifyComplete=function(){this.throttlingDone()}}(qc);for(var ft=function(){function e(e,t,n,r){this.duration=e,this.scheduler=t,this.leading=n,this.trailing=r}return e.prototype.call=function(e,t){return t.subscribe(new tz(e,this.duration,this.scheduler,this.leading,this.trailing))},e}(),tz=function(e){function t(t,n,r,i,o){return(t=e.call(this,t)||this).duration=n,t.scheduler=r,t.leading=i,t.trailing=o,t._hasTrailingValue=!1,t._trailingValue=null,t}return M(t,e),t.prototype._next=function(e){this.throttled?this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(gt,this.duration,{subscriber:this})),this.leading?this.destination.next(e):this.trailing&&(this._trailingValue=e,this._hasTrailingValue=!0))},t.prototype._complete=function(){this._hasTrailingValue&&this.destination.next(this._trailingValue),this.destination.complete()},t.prototype.clearThrottle=function(){var e=this.throttled;e&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),e.unsubscribe(),this.remove(e),this.throttled=null)},t}(fa),it=function(){function e(e,t,n,r){this.waitFor=e,this.absoluteTimeout=t,this.withObservable=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new uz(e,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))},e}(),uz=function(e){function t(t,n,r,i,o){return(t=e.call(this,t)||this).absoluteTimeout=n,t.waitFor=r,t.withObservable=i,t.scheduler=o,t.scheduleTimeout(),t}return M(t,e),t.dispatchTimeout=function(e){var t=e.withObservable;e._unsubscribeAndRecycle(),e.add(fc(t,new pc(e)))},t.prototype.scheduleTimeout=function(){var e=this.action;e?this.action=e.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(t.dispatchTimeout,this.waitFor,this))},t.prototype._next=function(t){this.absoluteTimeout||this.scheduleTimeout(),e.prototype._next.call(this,t)},t.prototype._unsubscribe=function(){this.action=void 0,this.withObservable=this.scheduler=null},t}(qc),kt=function(){function e(e,t){this.observables=e,this.project=t}return e.prototype.call=function(e,t){return t.subscribe(new vz(e,this.observables,this.project))},e}(),vz=function(e){function t(t,n,r){(t=e.call(this,t)||this).observables=n,t.project=r,t.toRespond=[],r=n.length,t.values=Array(r);for(var i=0;i<r;i++)t.toRespond.push(i);for(i=0;i<r;i++)t.add(Vh(t,n[i],void 0,i));return t}return M(t,e),t.prototype.notifyNext=function(e,t,n){this.values[n]=t,0<(e=this.toRespond).length&&(-1!==(n=e.indexOf(n))&&e.splice(n,1))},t.prototype.notifyComplete=function(){},t.prototype._next=function(e){0===this.toRespond.length&&(e=[e].concat(this.values),this.project?this._tryProject(e):this.destination.next(e))},t.prototype._tryProject=function(e){try{var t=this.project.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(Ak),jq=Xa((function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=Array(16);e.exports=function(){for(var e,t=0;16>t;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}})),ab=[],ph=0;256>ph;++ph)ab[ph]=(ph+256).toString(16).substr(1);var kq=function(e,t){return t=t||0,[ab[e[t++]],ab[e[t++]],ab[e[t++]],ab[e[t++]],"-",ab[e[t++]],ab[e[t++]],"-",ab[e[t++]],ab[e[t++]],"-",ab[e[t++]],ab[e[t++]],"-",ab[e[t++]],ab[e[t++]],ab[e[t++]],ab[e[t++]],ab[e[t++]],ab[e[t++]]].join("")},Id=function(e,t,n){if(n=t&&n||0,"string"==typeof e&&(t="binary"===e?Array(16):null,e=null),(e=(e=e||{}).random||(e.rng||jq)())[6]=15&e[6]|64,e[8]=63&e[8]|128,t)for(var r=0;16>r;++r)t[n+r]=e[r];return t||kq(e)},Sf=Id(),Ic,gd,Dk,Ek,hd,Jd,ac,Ie,Nb,Fk,Jc,Kd,Kc,Lc,Mc,Je,Nc,Oc;!function(e){e[e.ATTRIBUTE_OPERATION_ERR_FAILURE=2]="ATTRIBUTE_OPERATION_ERR_FAILURE",e[e.ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT=3]="ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT",e[e.ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW=4]="ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW",e[e.ATTRIBUTE_OPERATION_ERR_TOO_OFTEN=5]="ATTRIBUTE_OPERATION_ERR_TOO_OFTEN",e[e.ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND=6]="ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND",e[e.ATTRIBUTE_OPERATION_ERR_TIMEOUT=7]="ATTRIBUTE_OPERATION_ERR_TIMEOUT",e[e.ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN=102]="ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN"}(Ic||(Ic={})),function(e){e[e.CHANNEL_MESSAGE_ERR_FAILURE=1]="CHANNEL_MESSAGE_ERR_FAILURE",e[e.CHANNEL_MESSAGE_ERR_TIMEOUT=2]="CHANNEL_MESSAGE_ERR_TIMEOUT",e[e.CHANNEL_MESSAGE_ERR_TOO_OFTEN=3]="CHANNEL_MESSAGE_ERR_TOO_OFTEN",e[e.CHANNEL_MESSAGE_ERR_INVALID_MESSAGE=4]="CHANNEL_MESSAGE_ERR_INVALID_MESSAGE",e[e.CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL=5]="CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL",e[e.CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN=102]="CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN"}(gd||(gd={})),function(e){e[e.CREATE_CHANNEL_ERR_INVALID_ARGUMENT=1]="CREATE_CHANNEL_ERR_INVALID_ARGUMENT"}(Dk||(Dk={})),function(e){e[e.CREATE_INSTANCE_ERR_INVALID_ARGUMENT=1]="CREATE_INSTANCE_ERR_INVALID_ARGUMENT"}(Ek||(Ek={})),function(e){e[e.GET_MEMBERS_ERR_FAILURE=1]="GET_MEMBERS_ERR_FAILURE",e[e.GET_MEMBERS_ERR_REJECTED=2]="GET_MEMBERS_ERR_REJECTED",e[e.GET_MEMBERS_ERR_TIMEOUT=3]="GET_MEMBERS_ERR_TIMEOUT",e[e.GET_MEMBERS_ERR_TOO_OFTEN=4]="GET_MEMBERS_ERR_TOO_OFTEN",e[e.GET_MEMBERS_ERR_NOT_IN_CHANNEL=5]="GET_MEMBERS_ERR_NOT_IN_CHANNEL",e[e.GET_MEMBERS_ERR_USER_NOT_LOGGED_IN=102]="GET_MEMBERS_ERR_USER_NOT_LOGGED_IN"}(hd||(hd={})),function(e){e[e.INVITATION_API_CALL_ERR_INVALID_ARGUMENT=1]="INVITATION_API_CALL_ERR_INVALID_ARGUMENT",e[e.INVITATION_API_CALL_ERR_NOT_STARTED=2]="INVITATION_API_CALL_ERR_NOT_STARTED",e[e.INVITATION_API_CALL_ERR_ALREADY_END=3]="INVITATION_API_CALL_ERR_ALREADY_END",e[e.INVITATION_API_CALL_ERR_ALREADY_ACCEPT=4]="INVITATION_API_CALL_ERR_ALREADY_ACCEPT",e[e.INVITATION_API_CALL_ERR_ALREADY_SENT=5]="INVITATION_API_CALL_ERR_ALREADY_SENT"}(Jd||(Jd={})),function(e){e[e.JOIN_CHANNEL_ERR_FAILURE=1]="JOIN_CHANNEL_ERR_FAILURE",e[e.JOIN_CHANNEL_ERR_REJECTED=2]="JOIN_CHANNEL_ERR_REJECTED",e[e.JOIN_CHANNEL_ERR_INVALID_ARGUMENT=3]="JOIN_CHANNEL_ERR_INVALID_ARGUMENT",e[e.JOIN_CHANNEL_TIMEOUT=4]="JOIN_CHANNEL_TIMEOUT",e[e.JOIN_CHANNEL_ERR_EXCEED_LIMIT=5]="JOIN_CHANNEL_ERR_EXCEED_LIMIT",e[e.JOIN_CHANNEL_ERR_ALREADY_JOINED=6]="JOIN_CHANNEL_ERR_ALREADY_JOINED",e[e.JOIN_CHANNEL_ERR_TOO_OFTEN=7]="JOIN_CHANNEL_ERR_TOO_OFTEN",e[e.JOIN_CHANNEL_ERR_JOIN_SAME_CHANNEL_TOO_OFTEN=8]="JOIN_CHANNEL_ERR_JOIN_SAME_CHANNEL_TOO_OFTEN",e[e.JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN=102]="JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN",e[e.JOIN_CHANNEL_ERR_ABORTED_BY_LEAVE=201]="JOIN_CHANNEL_ERR_ABORTED_BY_LEAVE",e[e.JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID=202]="JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID"}(ac||(ac={})),function(e){e[e.LEAVE_CHANNEL_ERR_FAILURE=1]="LEAVE_CHANNEL_ERR_FAILURE",e[e.LEAVE_CHANNEL_ERR_REJECTED=2]="LEAVE_CHANNEL_ERR_REJECTED",e[e.LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL=3]="LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL",e[e.LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN=102]="LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN"}(Ie||(Ie={})),function(e){e[e.LOGIN_ERR_UNKNOWN=1]="LOGIN_ERR_UNKNOWN",e[e.LOGIN_ERR_REJECTED=2]="LOGIN_ERR_REJECTED",e[e.LOGIN_ERR_INVALID_ARGUMENT=3]="LOGIN_ERR_INVALID_ARGUMENT",e[e.LOGIN_ERR_INVALID_APP_ID=4]="LOGIN_ERR_INVALID_APP_ID",e[e.LOGIN_ERR_INVALID_TOKEN=5]="LOGIN_ERR_INVALID_TOKEN",e[e.LOGIN_ERR_TOKEN_EXPIRED=6]="LOGIN_ERR_TOKEN_EXPIRED",e[e.LOGIN_ERR_NOT_AUTHORIZED=7]="LOGIN_ERR_NOT_AUTHORIZED",e[e.LOGIN_ERR_ALREADY_LOGIN=8]="LOGIN_ERR_ALREADY_LOGIN",e[e.LOGIN_ERR_TIMEOUT=9]="LOGIN_ERR_TIMEOUT",e[e.LOGIN_ERR_TOO_OFTEN=10]="LOGIN_ERR_TOO_OFTEN",e[e.LOGIN_ERR_ABORTED_BY_LOGOUT=201]="LOGIN_ERR_ABORTED_BY_LOGOUT"}(Nb||(Nb={})),function(e){e[e.LOGOUT_ERR_USER_NOT_LOGGED_IN=102]="LOGOUT_ERR_USER_NOT_LOGGED_IN"}(Fk||(Fk={})),function(e){e[e.PEER_MESSAGE_ERR_FAILURE=1]="PEER_MESSAGE_ERR_FAILURE",e[e.PEER_MESSAGE_ERR_TIMEOUT=2]="PEER_MESSAGE_ERR_TIMEOUT",e[e.PEER_MESSAGE_ERR_TOO_OFTEN=5]="PEER_MESSAGE_ERR_TOO_OFTEN",e[e.PEER_MESSAGE_ERR_INVALID_USERID=6]="PEER_MESSAGE_ERR_INVALID_USERID",e[e.PEER_MESSAGE_ERR_INVALID_MESSAGE=7]="PEER_MESSAGE_ERR_INVALID_MESSAGE",e[e.PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE=8]="PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE",e[e.PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN=102]="PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN"}(Jc||(Jc={})),function(e){e[e.QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT=2]="QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT",e[e.QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED=3]="QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED",e[e.QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT=4]="QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT",e[e.QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN=5]="QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN",e[e.QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN=102]="QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN"}(Kd||(Kd={})),function(e){e[e.RENEW_TOKEN_ERR_FAILURE=1]="RENEW_TOKEN_ERR_FAILURE",e[e.RENEW_TOKEN_ERR_INVALID_ARGUMENT=2]="RENEW_TOKEN_ERR_INVALID_ARGUMENT",e[e.RENEW_TOKEN_ERR_REJECTED=3]="RENEW_TOKEN_ERR_REJECTED",e[e.RENEW_TOKEN_ERR_TOO_OFTEN=4]="RENEW_TOKEN_ERR_TOO_OFTEN",e[e.RENEW_TOKEN_ERR_TOKEN_EXPIRED=5]="RENEW_TOKEN_ERR_TOKEN_EXPIRED",e[e.RENEW_TOKEN_ERR_INVALID_TOKEN=6]="RENEW_TOKEN_ERR_INVALID_TOKEN",e[e.RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN=102]="RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN",e[e.RENEW_TOKEN_ERR_ABORTED_BY_LOGOUT=201]="RENEW_TOKEN_ERR_ABORTED_BY_LOGOUT"}(Kc||(Kc={})),function(e){e[e.GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE=1]="GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT=2]="GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN=3]="GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT=4]="GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT=5]="GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED=101]="GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED",e[e.GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN=102]="GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN"}(Lc||(Lc={})),function(e){e[e.PEER_SUBSCRIPTION_STATUS_ERR_FAILURE=1]="PEER_SUBSCRIPTION_STATUS_ERR_FAILURE",e[e.PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT=2]="PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT",e[e.PEER_SUBSCRIPTION_STATUS_ERR_REJECTED=3]="PEER_SUBSCRIPTION_STATUS_ERR_REJECTED",e[e.PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT=4]="PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT",e[e.PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN=5]="PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN",e[e.PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW=6]="PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW",e[e.PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN=102]="PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN"}(Mc||(Mc={})),function(e){e[e.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE=1]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE",e[e.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT=2]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT",e[e.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN=3]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN",e[e.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN=102]="QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN"}(Je||(Je={})),function(e){e[e.UPLOAD_MEDIA_ERR_FAILURE=1]="UPLOAD_MEDIA_ERR_FAILURE",e[e.UPLOAD_MEDIA_ERR_INVALID_ARGUMENT=2]="UPLOAD_MEDIA_ERR_INVALID_ARGUMENT",e[e.UPLOAD_MEDIA_ERR_TIMEOUT=3]="UPLOAD_MEDIA_ERR_TIMEOUT",e[e.UPLOAD_MEDIA_ERR_SIZE_OVERFLOW=4]="UPLOAD_MEDIA_ERR_SIZE_OVERFLOW",e[e.UPLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED=5]="UPLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED",e[e.UPLOAD_MEDIA_ERR_INTERRUPTED=6]="UPLOAD_MEDIA_ERR_INTERRUPTED",e[e.UPLOAD_MEDIA_ERR_NOT_LOGGED_IN=102]="UPLOAD_MEDIA_ERR_NOT_LOGGED_IN"}(Nc||(Nc={})),function(e){e[e.DOWNLOAD_MEDIA_ERR_FAILURE=1]="DOWNLOAD_MEDIA_ERR_FAILURE",e[e.DOWNLOAD_MEDIA_ERR_INVALID_ARGUMENT=2]="DOWNLOAD_MEDIA_ERR_INVALID_ARGUMENT",e[e.DOWNLOAD_MEDIA_ERR_TIMEOUT=3]="DOWNLOAD_MEDIA_ERR_TIMEOUT",e[e.DOWNLOAD_MEDIA_ERR_NOT_EXIST=4]="DOWNLOAD_MEDIA_ERR_NOT_EXIST",e[e.DOWNLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED=5]="DOWNLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED",e[e.DOWNLOAD_MEDIA_ERR_INTERRUPTED=6]="DOWNLOAD_MEDIA_ERR_INTERRUPTED",e[e.DOWNLOAD_MEDIA_ERR_NOT_LOGGED_IN=102]="DOWNLOAD_MEDIA_ERR_NOT_LOGGED_IN"}(Oc||(Oc={}));var Ob=Ic.ATTRIBUTE_OPERATION_ERR_FAILURE,Fa=Ic.ATTRIBUTE_OPERATION_ERR_INVALID_ARGUMENT,ee=Ic.ATTRIBUTE_OPERATION_ERR_SIZE_OVERFLOW;Ic.ATTRIBUTE_OPERATION_ERR_TOO_OFTEN;var lq=Ic.ATTRIBUTE_OPERATION_ERR_USER_NOT_FOUND,Pb=Ic.ATTRIBUTE_OPERATION_ERR_TIMEOUT,Qb=Ic.ATTRIBUTE_OPERATION_ERR_USER_NOT_LOGGED_IN,Tf=gd.CHANNEL_MESSAGE_ERR_FAILURE,Gk=gd.CHANNEL_MESSAGE_ERR_TIMEOUT,mq=gd.CHANNEL_MESSAGE_ERR_TOO_OFTEN,qh=gd.CHANNEL_MESSAGE_ERR_INVALID_MESSAGE;gd.CHANNEL_MESSAGE_ERR_NOT_IN_CHANNEL;var Uf=gd.CHANNEL_MESSAGE_ERR_USER_NOT_LOGGED_IN,wz=Dk.CREATE_CHANNEL_ERR_INVALID_ARGUMENT,xz=Ek.CREATE_INSTANCE_ERR_INVALID_ARGUMENT;Lc.GET_CHANNEL_MEMBER_COUNT_ERR_FAILURE;var nq=Lc.GET_CHANNEL_MEMBER_COUNT_ERR_INVALID_ARGUMENT;Lc.GET_CHANNEL_MEMBER_COUNT_ERR_TOO_OFTEN;var oq=Lc.GET_CHANNEL_MEMBER_COUNT_ERR_TIMEOUT,yz=Lc.GET_CHANNEL_MEMBER_COUNT_ERR_EXCEED_LIMIT;Lc.GET_CHANNEL_MEMBER_COUNT_ERR_NOT_INITIALIZED;var zz=Lc.GET_CHANNEL_MEMBER_COUNT_ERR_USER_NOT_LOGGED_IN,Az=hd.GET_MEMBERS_ERR_FAILURE,Bz=hd.GET_MEMBERS_ERR_REJECTED;hd.GET_MEMBERS_ERR_TIMEOUT,hd.GET_MEMBERS_ERR_TOO_OFTEN;var Cz=hd.GET_MEMBERS_ERR_NOT_IN_CHANNEL,Dz=hd.GET_MEMBERS_ERR_USER_NOT_LOGGED_IN,rc=Jd.INVITATION_API_CALL_ERR_INVALID_ARGUMENT,Ez=Jd.INVITATION_API_CALL_ERR_NOT_STARTED,rh=Jd.INVITATION_API_CALL_ERR_ALREADY_END,pq=Jd.INVITATION_API_CALL_ERR_ALREADY_ACCEPT,Fz=Jd.INVITATION_API_CALL_ERR_ALREADY_SENT,qq=ac.JOIN_CHANNEL_ERR_FAILURE;ac.JOIN_CHANNEL_ERR_REJECTED;var Gz=ac.JOIN_CHANNEL_ERR_INVALID_ARGUMENT,rq=ac.JOIN_CHANNEL_TIMEOUT,sq=ac.JOIN_CHANNEL_ERR_EXCEED_LIMIT,tq=ac.JOIN_CHANNEL_ERR_ALREADY_JOINED;ac.JOIN_CHANNEL_ERR_TOO_OFTEN;var uq=ac.JOIN_CHANNEL_ERR_USER_NOT_LOGGED_IN,vq=ac.JOIN_CHANNEL_ERR_ALREADY_JOINED_CHANNEL_OF_SAME_ID,wq=Ie.LEAVE_CHANNEL_ERR_FAILURE,xq=Ie.LEAVE_CHANNEL_ERR_REJECTED,Hz=Ie.LEAVE_CHANNEL_ERR_NOT_IN_CHANNEL,Iz=Ie.LEAVE_CHANNEL_ERR_USER_NOT_LOGGED_IN,yq=Nb.LOGIN_ERR_UNKNOWN,sh=Nb.LOGIN_ERR_REJECTED,th=Nb.LOGIN_ERR_INVALID_ARGUMENT,zq=Nb.LOGIN_ERR_INVALID_APP_ID,Aq=Nb.LOGIN_ERR_INVALID_TOKEN,uh=Nb.LOGIN_ERR_TOKEN_EXPIRED;Nb.LOGIN_ERR_NOT_AUTHORIZED;var Jz=Nb.LOGIN_ERR_ALREADY_LOGIN,Kz=Nb.LOGIN_ERR_TIMEOUT,Lz=Nb.LOGIN_ERR_TOO_OFTEN,Bq=Fk.LOGOUT_ERR_USER_NOT_LOGGED_IN,Cq=Jc.PEER_MESSAGE_ERR_FAILURE,Hk=Jc.PEER_MESSAGE_ERR_TIMEOUT,Dq=Jc.PEER_MESSAGE_ERR_TOO_OFTEN,Ik=Jc.PEER_MESSAGE_ERR_INVALID_USERID,ge=Jc.PEER_MESSAGE_ERR_INVALID_MESSAGE,Jk=Jc.PEER_MESSAGE_ERR_USER_NOT_LOGGED_IN,Mz=Jc.PEER_MESSAGE_ERR_INCOMPATIBLE_MESSAGE,Eq=Kd.QUERY_PEERS_ONLINE_STATUS_ERR_INVALID_ARGUMENT;Kd.QUERY_PEERS_ONLINE_STATUS_ERR_REJECTED;var Nz=Kd.QUERY_PEERS_ONLINE_STATUS_ERR_TIMEOUT;Kd.QUERY_PEERS_ONLINE_STATUS_ERR_TOO_OFTEN;var Oz=Kd.QUERY_PEERS_ONLINE_STATUS_ERR_USER_NOT_LOGGED_IN,Pz=Kc.RENEW_TOKEN_ERR_FAILURE,Qz=Kc.RENEW_TOKEN_ERR_INVALID_ARGUMENT;Kc.RENEW_TOKEN_ERR_REJECTED,Kc.RENEW_TOKEN_ERR_TOO_OFTEN;var Rz=Kc.RENEW_TOKEN_ERR_TOKEN_EXPIRED,Sz=Kc.RENEW_TOKEN_ERR_INVALID_TOKEN,Tz=Kc.RENEW_TOKEN_ERR_USER_NOT_LOGGED_IN,Fq=Mc.PEER_SUBSCRIPTION_STATUS_ERR_FAILURE,Vf=Mc.PEER_SUBSCRIPTION_STATUS_ERR_INVALID_ARGUMENT;Mc.PEER_SUBSCRIPTION_STATUS_ERR_REJECTED;var Uz=Mc.PEER_SUBSCRIPTION_STATUS_ERR_TIMEOUT;Mc.PEER_SUBSCRIPTION_STATUS_ERR_TOO_OFTEN;var Gq=Mc.PEER_SUBSCRIPTION_STATUS_ERR_OVERFLOW,Kk=Mc.PEER_SUBSCRIPTION_STATUS_ERR_USER_NOT_LOGGED_IN;Je.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_FAILURE,Je.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TIMEOUT,Je.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_TOO_OFTEN,Je.QUERY_PEERS_BY_SUBSCRIPTION_OPTION_ERR_USER_NOT_LOGGED_IN;var Wf=Nc.UPLOAD_MEDIA_ERR_FAILURE,jf=Nc.UPLOAD_MEDIA_ERR_INVALID_ARGUMENT,vh=Nc.UPLOAD_MEDIA_ERR_TIMEOUT,Vz=Nc.UPLOAD_MEDIA_ERR_SIZE_OVERFLOW,Wz=Nc.UPLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED,Hq=Nc.UPLOAD_MEDIA_ERR_INTERRUPTED,Xz=Nc.UPLOAD_MEDIA_ERR_NOT_LOGGED_IN,Xf=Oc.DOWNLOAD_MEDIA_ERR_FAILURE,Lk=Oc.DOWNLOAD_MEDIA_ERR_INVALID_ARGUMENT,Yz=Oc.DOWNLOAD_MEDIA_ERR_TIMEOUT,Zz=Oc.DOWNLOAD_MEDIA_ERR_NOT_EXIST,$z=Oc.DOWNLOAD_MEDIA_ERR_CONCURRENCY_LIMIT_EXCEEDED,Iq=Oc.DOWNLOAD_MEDIA_ERR_INTERRUPTED,aA=Oc.DOWNLOAD_MEDIA_ERR_NOT_LOGGED_IN,bA=function(e,t){var n;return qk(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n},wh=function(e,t,n){if(!jb(n))return!1;var r=R(t);return!!("number"==r?sd(n)&&gk(t,n.length):"string"==r&&t in n)&&Mf(n[t],e)},Mk=function(e,t,n){var r=Ya(e)?Up:bA;return n&&wh(e,t,n)&&(t=void 0),r(e,Fe(t))},cA=function(e,t){var n=-1,r=sd(e)?Array(e.length):[];return qk(e,(function(e,i,o){r[++n]=t(e,i,o)})),r},dA=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e},eA=function(e,t,n){t=t.length?Ud(t,(function(e){return Ya(e)?function(t){return kh(t,1===e.length?e[0]:e)}:e})):[lh];var r=-1;return t=Ud(t,hh(Fe)),e=cA(e,(function(e,n,i){return{criteria:Ud(t,(function(t){return t(e)})),index:++r,value:e}})),dA(e,(function(e,t){e:{for(var r=-1,i=e.criteria,o=t.criteria,s=i.length,a=n.length;++r<s;){t:{var u=i[r],c=o[r];if(u!==c){var l=void 0!==u,f=null===u,h=u==u,p=Vd(u),d=void 0!==c,v=null===c,b=c==c,g=Vd(c);if(!v&&!g&&!p&&u>c||p&&d&&b&&!v&&!g||f&&d&&b||!l&&b||!h){u=1;break t}if(!f&&!p&&!g&&u<c||g&&l&&h&&!f&&!p||v&&l&&h||!d&&h||!b){u=-1;break t}}u=0}if(u){e=r>=a?u:u*("desc"==n[r]?-1:1);break e}}e=e.index-t.index}return e}))},Jq=function(e,t){return Sp(Rp(e,t,lh),e+"")},Kq=Jq((function(e,t){if(null==e)return[];var n=t.length;return 1<n&&wh(e,t[0],t[1])?t=[]:2<n&&wh(t[0],t[1],t[2])&&(t=[t[0]]),eA(e,Lh(t,1),[])})),Lq=function(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}(az),Mq=Xa((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=[],r=function(e,t){return new WebSocket(e,t)};t.normalClosureMessage="Normal closure",t.default=function(e,i){var o=(i=void 0===i?{protocols:n,makeWebSocket:r}:i).protocols,s=void 0===o?n:o,a=void 0===(i=i.makeWebSocket)?r:i;return new Lq.Observable((function(n){var r,i=new Lq.Subject,o=a(e,s),u=!1,c=!1,l=function(e){if(r)throw u=!0,e=Error("Web socket message factory function called more than once"),n.error(e),e;return r=e.subscribe((function(e){o.send(e)})),i};return o.onopen=function(){c?(u=!0,o.close()):n.next(l)},o.onmessage=function(e){i.next(e.data)},o.onerror=function(e){u=!0,n.error(Error(e.message))},o.onclose=function(e){u||(u=!0,c?(n.complete(),i.complete()):n.error(Error(1e3===e.code?t.normalClosureMessage:e.reason)))},function(){c=!0,r&&r.unsubscribe(),u||(u=!0,o.close())}}))}}));!function(e){e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")&&e.default}(Mq);var bi=function(e,t,n){(void 0===n||Mf(e[t],n))&&(void 0!==n||t in e)||Of(e,t,n)},ai=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},fA=function(e){return Jq((function(t,n){var r=-1,i=n.length,o=1<i?n[i-1]:void 0,s=2<i?n[2]:void 0;for(o=3<e.length&&"function"==typeof o?(i--,o):void 0,s&&wh(n[0],n[1],s)&&(o=3>i?void 0:o,i=1),t=Object(t);++r<i;)(s=n[r])&&e(t,s,r,o);return t}))}((function(e,t,n,r){Zl(e,t,n,r)})),cm=[],dm=function(e,t){return new WebSocket(e,t)};N({target:"Number",stat:!0},{isInteger:dp}),Sn("from",jj,ej);var gA=function(e,t){for(var n=Array(arguments.length-1),r=0,i=2,o=!0;i<arguments.length;)n[r++]=arguments[i++];return new Promise((function(i,s){n[r]=function(e){if(o)if(o=!1,e)s(e);else{for(var t=Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];i.apply(null,t)}};try{e.apply(t||null,n)}catch(e){o&&(o=!1,s(e))}}))},hA=Xa((function(e,t){t.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;1<--t%4&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};var n=Array(64),r=Array(123);for(e=0;64>e;)r[n[e]=26>e?e+65:52>e?e+71:62>e?e-4:e-59|43]=e++;t.encode=function(e,t,r){for(var i,o=null,s=[],a=0,u=0;t<r;){var c=e[t++];switch(u){case 0:s[a++]=n[c>>2],i=(3&c)<<4,u=1;break;case 1:s[a++]=n[i|c>>4],i=(15&c)<<2,u=2;break;case 2:s[a++]=n[i|c>>6],s[a++]=n[63&c],u=0}8191<a&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return u&&(s[a++]=n[i],s[a++]=61,1===u&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))},t.decode=function(e,t,n){for(var i,o=n,s=0,a=0;a<e.length;){var u=e.charCodeAt(a++);if(61===u&&1<s)break;if(void 0===(u=r[u]))throw Error("invalid encoding");switch(s){case 0:i=u,s=1;break;case 1:t[n++]=i<<2|(48&u)>>4,i=u,s=2;break;case 2:t[n++]=(15&i)<<4|(60&u)>>2,i=u,s=3;break;case 3:t[n++]=(3&i)<<6|u,s=0}}if(1===s)throw Error("invalid encoding");return n-o},t.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}}));jg.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},jg.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else{e=this._listeners[e];for(var n=0;n<e.length;)e[n].fn===t?e.splice(n,1):++n}return this},jg.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this};var iA=em(em),jA=function(c){try{var a=eval("quire".replace(/^/,"re"))(c);if(a&&(a.length||Object.keys(a).length))return a}catch(e){}return null},kA=Xa((function(e,t){t.length=function(e){for(var t,n=0,r=0;r<e.length;++r)128>(t=e.charCodeAt(r))?n+=1:2048>t?n+=2:55296==(64512&t)&&56320==(64512&e.charCodeAt(r+1))?(++r,n+=4):n+=3;return n},t.read=function(e,t,n){if(1>n-t)return"";for(var r,i=null,o=[],s=0;t<n;)128>(r=e[t++])?o[s++]=r:191<r&&224>r?o[s++]=(31&r)<<6|63&e[t++]:239<r&&365>r?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[s++]=55296+(r>>10),o[s++]=56320+(1023&r)):o[s++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],8191<s&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),s=0);return i?(s&&i.push(String.fromCharCode.apply(String,o.slice(0,s))),i.join("")):String.fromCharCode.apply(String,o.slice(0,s))},t.write=function(e,t,n){for(var r,i,o=n,s=0;s<e.length;++s)128>(r=e.charCodeAt(s))?t[n++]=r:(2048>r?t[n++]=r>>6|192:(55296==(64512&r)&&56320==(64512&(i=e.charCodeAt(s+1)))?(r=65536+((1023&r)<<10)+(1023&i),++s,t[n++]=r>>18|240,t[n++]=r>>12&63|128):t[n++]=r>>12|224,t[n++]=r>>6&63|128),t[n++]=63&r|128);return n-o}})),lA=function(e,t,n){var r=n||8192,i=r>>>1,o=null,s=r;return function(n){return 1>n||n>i?e(n):(s+n>r&&(o=e(r),s=0),n=t.call(o,s,s+=n),7&s&&(s=1+(7|s)),n)}},Ld=Ra.zero=new Ra(0,0);Ld.toNumber=function(){return 0},Ld.zzEncode=Ld.zzDecode=function(){return this},Ld.length=function(){return 1};var mA=Ra.zeroHash="\0\0\0\0\0\0\0\0";Ra.fromNumber=function(e){if(0===e)return Ld;var t=0>e;t&&(e=-e);var n=e>>>0;return e=(e-n)/4294967296>>>0,t&&(e=~e>>>0,n=~n>>>0,4294967295<++n&&(n=0,4294967295<++e&&(e=0))),new Ra(n,e)},Ra.from=function(e){if("number"==typeof e)return Ra.fromNumber(e);if(T.isString(e)){if(!T.Long)return Ra.fromNumber(parseInt(e,10));e=T.Long.fromString(e)}return e.low||e.high?new Ra(e.low>>>0,e.high>>>0):Ld},Ra.prototype.toNumber=function(e){if(!e&&this.hi>>>31){e=1+~this.lo>>>0;var t=~this.hi>>>0;return e||(t=t+1>>>0),-(e+4294967296*t)}return this.lo+4294967296*this.hi},Ra.prototype.toLong=function(e){return T.Long?new T.Long(0|this.lo,0|this.hi,!!e):{low:0|this.lo,high:0|this.hi,unsigned:!!e}};var id=String.prototype.charCodeAt;Ra.fromHash=function(e){return e===mA?Ld:new Ra((id.call(e,0)|id.call(e,1)<<8|id.call(e,2)<<16|id.call(e,3)<<24)>>>0,(id.call(e,4)|id.call(e,5)<<8|id.call(e,6)<<16|id.call(e,7)<<24)>>>0)},Ra.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},Ra.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},Ra.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},Ra.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return 0===n?0===t?16384>e?128>e?1:2:2097152>e?3:4:16384>t?128>t?5:6:2097152>t?7:8:128>n?9:10};var T=Xa((function(e,t){function n(e,t,n){for(var r=Object.keys(t),i=0;i<r.length;++i)void 0!==e[r[i]]&&n||(e[r[i]]=t[r[i]]);return e}function r(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:Error().stack||""}),r&&n(this,r)}return(t.prototype=Object.create(Error.prototype)).constructor=t,Object.defineProperty(t.prototype,"name",{get:function(){return e}}),t.prototype.toString=function(){return this.name+": "+this.message},t}t.asPromise=gA,t.base64=hA,t.EventEmitter=jg,t.float=iA,t.inquire=jA,t.utf8=kA,t.pool=lA,t.LongBits=Ra,t.isNode=!!(void 0!==Ta&&Ta&&Ta.process&&Ta.process.versions&&Ta.process.versions.node),t.global=t.isNode&&Ta||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||Ta,t.emptyArray=Object.freeze?Object.freeze([]):[],t.emptyObject=Object.freeze?Object.freeze({}):{},t.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},t.isString=function(e){return"string"==typeof e||e instanceof String},t.isObject=function(e){return e&&"object"===R(e)},t.isset=t.isSet=function(e,t){var n=e[t];return!(null==n||!e.hasOwnProperty(t))&&("object"!==R(n)||0<(Array.isArray(n)?n.length:Object.keys(n).length))},t.Buffer=function(){try{var e=t.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(e){return null}}(),t._Buffer_from=null,t._Buffer_allocUnsafe=null,t.newBuffer=function(e){return"number"==typeof e?t.Buffer?t._Buffer_allocUnsafe(e):new t.Array(e):t.Buffer?t._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},t.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,t.Long=t.global.dcodeIO&&t.global.dcodeIO.Long||t.global.Long||t.inquire("long"),t.key2Re=/^true|false|0|1$/,t.key32Re=/^-?(?:0|[1-9][0-9]*)$/,t.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,t.longToHash=function(e){return e?t.LongBits.from(e).toHash():t.LongBits.zeroHash},t.longFromHash=function(e,n){return e=t.LongBits.fromHash(e),t.Long?t.Long.fromBits(e.lo,e.hi,n):e.toNumber(!!n)},t.merge=n,t.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},t.newError=r,t.ProtocolError=r("ProtocolError"),t.oneOfGetter=function(e){for(var t={},n=0;n<e.length;++n)t[e[n]]=1;return function(){for(var e=Object.keys(this),n=e.length-1;-1<n;--n)if(1===t[e[n]]&&void 0!==this[e[n]]&&null!==this[e[n]])return e[n]}},t.oneOfSetter=function(e){return function(t){for(var n=0;n<e.length;++n)e[n]!==t&&delete this[e[n]]}},t.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},t._configure=function(){var e=t.Buffer;e?(t._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,n){return new e(t,n)},t._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):t._Buffer_from=t._Buffer_allocUnsafe=null}})),ji=ha,Nk,xh=T.LongBits,Nq=T.base64,Oq=T.utf8,Pq=function(){return T.Buffer?function(){return(ha.create=function(){return new Nk})()}:function(){return new ha}};ha.create=Pq(),ha.alloc=function(e){return new T.Array(e)},T.Array!==Array&&(ha.alloc=T.pool(ha.alloc,T.Array.prototype.subarray)),ha.prototype._push=function(e,t,n){return this.tail=this.tail.next=new df(e,t,n),this.len+=t,this},gi.prototype=Object.create(df.prototype),gi.prototype.fn=function(e,t,n){for(;127<e;)t[n++]=127&e|128,e>>>=7;t[n]=e},ha.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new gi(128>(e>>>=0)?1:16384>e?2:2097152>e?3:268435456>e?4:5,e)).len,this},ha.prototype.int32=function(e){return 0>e?this._push(hi,10,xh.fromNumber(e)):this.uint32(e)},ha.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},ha.prototype.uint64=function(e){return e=xh.from(e),this._push(hi,e.length(),e)},ha.prototype.int64=ha.prototype.uint64,ha.prototype.sint64=function(e){return e=xh.from(e).zzEncode(),this._push(hi,e.length(),e)},ha.prototype.bool=function(e){return this._push(fi,1,e?1:0)},ha.prototype.fixed32=function(e){return this._push(ii,4,e>>>0)},ha.prototype.sfixed32=ha.prototype.fixed32,ha.prototype.fixed64=function(e){return e=xh.from(e),this._push(ii,4,e.lo)._push(ii,4,e.hi)},ha.prototype.sfixed64=ha.prototype.fixed64,ha.prototype.float=function(e){return this._push(T.float.writeFloatLE,4,e)},ha.prototype.double=function(e){return this._push(T.float.writeDoubleLE,8,e)};var nA=T.Array.prototype.set?function(e,t,n){t.set(e,n)}:function(e,t,n){for(var r=0;r<e.length;++r)t[n+r]=e[r]};ha.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(fi,1,0);if(T.isString(e)){var n=ha.alloc(t=Nq.length(e));Nq.decode(e,n,0),e=n}return this.uint32(t)._push(nA,t,e)},ha.prototype.string=function(e){var t=Oq.length(e);return t?this.uint32(t)._push(Oq.write,t,e):this._push(fi,1,0)},ha.prototype.fork=function(){return this.states=new nt(this),this.head=this.tail=new df(ei,0,0),this.len=0,this},ha.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new df(ei,0,0),this.len=0),this},ha.prototype.ldelim=function(){var e=this.head,t=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=e.next,this.tail=t,this.len+=n),this},ha.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),n=0;e;)e.fn(e.val,t,n),n+=e.len,e=e.next;return t},ha._configure=function(e){Nk=e,ha.create=Pq(),Nk._configure()},(gc.prototype=Object.create(ji.prototype)).constructor=gc,gc._configure=function(){gc.alloc=T._Buffer_allocUnsafe,gc.writeBytesBuffer=T.Buffer&&T.Buffer.prototype instanceof Uint8Array&&"set"===T.Buffer.prototype.set.name?function(e,t,n){t.set(e,n)}:function(e,t,n){if(e.copy)e.copy(t,n,0,e.length);else for(var r=0;r<e.length;)t[n++]=e[r++]}},gc.prototype.bytes=function(e){T.isString(e)&&(e=T._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(gc.writeBytesBuffer,t,e),this},gc.prototype.string=function(e){var t=T.Buffer.byteLength(e);return this.uint32(t),t&&this._push(ot,t,e),this},gc._configure();var li=Ha,Ok,jm=T.LongBits,oA=T.utf8,Qq="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new Ha(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new Ha(e);throw Error("illegal buffer")},Rq=function(){return T.Buffer?function(e){return(Ha.create=function(e){return T.Buffer.isBuffer(e)?new Ok(e):Qq(e)})(e)}:Qq};Ha.create=Rq(),Ha.prototype._slice=T.Array.prototype.subarray||T.Array.prototype.slice,Ha.prototype.uint32=function(){var e=4294967295;return function(){if(e=(127&this.buf[this.pos])>>>0,128>this.buf[this.pos++])return e;if(e=(e|(127&this.buf[this.pos])<<7)>>>0,128>this.buf[this.pos++])return e;if(e=(e|(127&this.buf[this.pos])<<14)>>>0,128>this.buf[this.pos++])return e;if(e=(e|(127&this.buf[this.pos])<<21)>>>0,128>this.buf[this.pos++])return e;if(e=(e|(15&this.buf[this.pos])<<28)>>>0,128>this.buf[this.pos++])return e;if((this.pos+=5)>this.len)throw this.pos=this.len,Ub(this,10);return e}}(),Ha.prototype.int32=function(){return 0|this.uint32()},Ha.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},Ha.prototype.bool=function(){return 0!==this.uint32()},Ha.prototype.fixed32=function(){if(this.pos+4>this.len)throw Ub(this,4);return kg(this.buf,this.pos+=4)},Ha.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Ub(this,4);return 0|kg(this.buf,this.pos+=4)},Ha.prototype.float=function(){if(this.pos+4>this.len)throw Ub(this,4);var e=T.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},Ha.prototype.double=function(){if(this.pos+8>this.len)throw Ub(this,4);var e=T.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},Ha.prototype.bytes=function(){var e=this.uint32(),t=this.pos,n=this.pos+e;if(n>this.len)throw Ub(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,n):t===n?new this.buf.constructor(0):this._slice.call(this.buf,t,n)},Ha.prototype.string=function(){var e=this.bytes();return oA.read(e,0,e.length)},Ha.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw Ub(this,e);this.pos+=e}else do{if(this.pos>=this.len)throw Ub(this)}while(128&this.buf[this.pos++]);return this},Ha.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},Ha._configure=function(e){Ok=e,Ha.create=Rq(),Ok._configure();var t=T.Long?"toLong":"toNumber";T.merge(Ha.prototype,{int64:function(){return ki.call(this)[t](!1)},uint64:function(){return ki.call(this)[t](!0)},sint64:function(){return ki.call(this).zzDecode()[t](!1)},fixed64:function(){return km.call(this)[t](!0)},sfixed64:function(){return km.call(this)[t](!1)}})},(td.prototype=Object.create(li.prototype)).constructor=td,td._configure=function(){T.Buffer&&(td.prototype._slice=T.Buffer.prototype.slice)},td.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},td._configure(),(ef.prototype=Object.create(T.EventEmitter.prototype)).constructor=ef,ef.prototype.rpcCall=function e(t,n,r,i,o){if(!i)throw TypeError("request must be specified");var s=this;if(!o)return T.asPromise(e,s,t,n,r,i);if(s.rpcImpl)try{return s.rpcImpl(t,n[s.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(e,n){if(e)return s.emit("error",e,t),o(e);if(null!==n){if(!(n instanceof r))try{n=r[s.responseDelimited?"decodeDelimited":"decode"](n)}catch(e){return s.emit("error",e,t),o(e)}return s.emit("data",n,t),o(null,n)}s.end(!0)}))}catch(e){s.emit("error",e,t),setTimeout((function(){o(e)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},ef.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this};var pA=Xa((function(e,t){t.Service=ef})),qA={},bc=Xa((function(e,t){function n(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}var r=t;r.build="minimal",r.Writer=ji,r.BufferWriter=gc,r.Reader=li,r.BufferReader=td,r.util=T,r.rpc=pA,r.roots=qA,r.configure=n,n()}));bc.util.Long=U,bc.configure();var y=bc.Reader,J=bc.Writer,q=bc.util,t=bc.roots.default||(bc.roots.default={}),rA=t.URI=function(){var e={},t=Object.create(e);return t[e[0]="Unknown"]=0,t[e[1]="PingUri"]=1,t[e[2]="PongUri"]=2,t[e[11]="UserJoinUri"]=11,t[e[12]="UserRespUri"]=12,t[e[21]="UserQuitUri"]=21,t[e[22]="UserDropUri"]=22,t[e[31]="GroupEnterUri"]=31,t[e[32]="GroupLeaveUri"]=32,t[e[33]="GroupReplyUri"]=33,t[e[36]="GroupEnterNoticeUri"]=36,t[e[37]="GroupLeaveNoticeUri"]=37,t[e[38]="GroupEventNoticeUri"]=38,t[e[39]="GroupCountNoticeUri"]=39,t[e[41]="UserStatusListUri"]=41,t[e[42]="UserStatusResultUri"]=42,t[e[51]="GroupStatusListUri"]=51,t[e[52]="GroupStatusResultUri"]=52,t[e[55]="GroupAllUsersListUri"]=55,t[e[56]="GroupAllUsersResultUri"]=56,t[e[100]="MessageUri"]=100,t[e[101]="AckUri"]=101,t[e[115]="FileUploadIndexGetUri"]=115,t[e[116]="FileUploadIndexRetUri"]=116,t[e[117]="FileUploadIndexSetUri"]=117,t[e[118]="FileUploadIndexFinUri"]=118,t[e[119]="FileUploadIndexErrUri"]=119,t[e[125]="FileDownloadIndexGetUri"]=125,t[e[126]="FileDownloadIndexRetUri"]=126,t[e[127]="FileDownloadIndexErrUri"]=127,t[e[201]="UserJoinNoticeUri"]=201,t[e[202]="UserQuitNoticeUri"]=202,t[e[203]="UserWaitNoticeUri"]=203,t[e[301]="UserAttributeGetUri"]=301,t[e[302]="UserAttributeRetUri"]=302,t[e[303]="UserAttributeSetUri"]=303,t[e[304]="UserAttributeModUri"]=304,t[e[305]="UserAttributeDelUri"]=305,t[e[307]="UserAttributeRspUri"]=307,t[e[308]="UserAttributeErrUri"]=308,t[e[311]="UserAttributeKeysGetUri"]=311,t[e[312]="UserAttributeKeysRetUri"]=312,t[e[351]="GroupAttributeGetUri"]=351,t[e[352]="GroupAttributeRetUri"]=352,t[e[353]="GroupAttributeSetUri"]=353,t[e[354]="GroupAttributeModUri"]=354,t[e[355]="GroupAttributeDelUri"]=355,t[e[356]="GroupAttributeAltUri"]=356,t[e[357]="GroupAttributeRspUri"]=357,t[e[358]="GroupAttributeErrUri"]=358,t[e[361]="GroupAttributeKeysGetUri"]=361,t[e[362]="GroupAttributeKeysRetUri"]=362,t[e[401]="SubscribeUserStatusUri"]=401,t[e[402]="UnsubscribeUserStatusUri"]=402,t[e[499]="SubscribeResponseUri"]=499,t}(),yh=t.Wrapper=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.uri=0,e.prototype.data=q.newBuffer([]),e.encode=function(e,t){return t||(t=J.create()),null!=e.uri&&Object.hasOwnProperty.call(e,"uri")&&t.uint32(8).int32(e.uri),null!=e.data&&Object.hasOwnProperty.call(e,"data")&&t.uint32(18).bytes(e.data),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.Wrapper;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.uri=e.int32();break;case 2:r.data=e.bytes();break;default:e.skipType(7&i)}}return r},e}(),sA=t.Ping=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.ms=q.Long?q.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(16).uint64(e.ms),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.Ping;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.ms=e.uint64();break;default:e.skipType(7&i)}}return r},e}(),tA=t.Pong=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.ms=q.Long?q.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(16).uint64(e.ms),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.Pong;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.ms=e.uint64();break;default:e.skipType(7&i)}}return r},e}(),uA=t.UserJoin=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.opt=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.ticket="",e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.opt&&Object.hasOwnProperty.call(e,"opt")&&t.uint32(16).uint64(e.opt),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(24).uint64(e.instance),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(34).string(e.account),null!=e.ticket&&Object.hasOwnProperty.call(e,"ticket")&&t.uint32(42).string(e.ticket),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserJoin;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.opt=e.uint64();break;case 3:r.instance=e.uint64();break;case 4:r.account=e.string();break;case 5:r.ticket=e.string();break;default:e.skipType(7&i)}}return r},e}(),vA=t.UserResp=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.code=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(24).uint32(e.code),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserResp;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.account=e.string();break;case 3:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),wA=t.UserQuit=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.encode=function(e,t){return t||(t=J.create()),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserQuit;e.pos<n;){var i=e.uint32();e.skipType(7&i)}return r},e}(),xA=t.UserDrop=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.code=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(8).uint32(e.code),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserDrop;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),yA=t.GroupEnter=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupEnter;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.account=e.string();break;default:e.skipType(7&i)}}return r},e}(),zA=t.GroupLeave=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.account="",e.encode=function(e,t){return t||(t=J.create()),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(10).string(e.account),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupLeave;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.account=e.string();break;default:e.skipType(7&i)}}return r},e}(),AA=t.GroupReply=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.code=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(24).uint32(e.code),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupReply;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.account=e.string();break;case 3:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),Sq=t.GroupLeaveNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.user="",e.prototype.group="",e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.size=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.user&&Object.hasOwnProperty.call(e,"user")&&t.uint32(18).string(e.user),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(26).string(e.group),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(32).uint64(e.instance),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(40).uint32(e.size),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupLeaveNotice;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.user=e.string();break;case 3:r.group=e.string();break;case 4:r.instance=e.uint64();break;case 5:r.size=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),Tq=t.GroupEnterNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.user="",e.prototype.group="",e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.size=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.user&&Object.hasOwnProperty.call(e,"user")&&t.uint32(18).string(e.user),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(26).string(e.group),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(32).uint64(e.instance),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(40).uint32(e.size),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupEnterNotice;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.user=e.string();break;case 3:r.group=e.string();break;case 4:r.instance=e.uint64();break;case 5:r.size=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),Uq=t.Message=function(){function e(e){if(this.MiscMap={},e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.dialogue=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.sequence=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.options=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.src="",e.prototype.dst="",e.prototype.payload=q.newBuffer([]),e.prototype.MiscMap=q.emptyObject,e.prototype.ms=q.Long?q.Long.fromBits(0,0,!0):0,e.encode=function(e,t){if(t||(t=J.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.dialogue&&Object.hasOwnProperty.call(e,"dialogue")&&t.uint32(16).uint64(e.dialogue),null!=e.sequence&&Object.hasOwnProperty.call(e,"sequence")&&t.uint32(24).uint64(e.sequence),null!=e.options&&Object.hasOwnProperty.call(e,"options")&&t.uint32(32).uint64(e.options),null!=e.src&&Object.hasOwnProperty.call(e,"src")&&t.uint32(42).string(e.src),null!=e.dst&&Object.hasOwnProperty.call(e,"dst")&&t.uint32(50).string(e.dst),null!=e.payload&&Object.hasOwnProperty.call(e,"payload")&&t.uint32(58).bytes(e.payload),null!=e.MiscMap&&Object.hasOwnProperty.call(e,"MiscMap"))for(var n=Object.keys(e.MiscMap),r=0;r<n.length;++r)t.uint32(66).fork().uint32(10).string(n[r]).uint32(18).bytes(e.MiscMap[n[r]]).ldelim();return null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(72).uint64(e.ms),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r,i,o=new t.Message;e.pos<n;)switch(r=e.uint32(),r>>>3){case 1:o.instance=e.uint64();break;case 2:o.dialogue=e.uint64();break;case 3:o.sequence=e.uint64();break;case 4:o.options=e.uint64();break;case 5:o.src=e.string();break;case 6:o.dst=e.string();break;case 7:o.payload=e.bytes();break;case 8:o.MiscMap===q.emptyObject&&(o.MiscMap={});var s=e.uint32()+e.pos;for(r="",i=[];e.pos<s;){var a=e.uint32();switch(a>>>3){case 1:r=e.string();break;case 2:i=e.bytes();break;default:e.skipType(7&a)}}o.MiscMap[r]=i;break;case 9:o.ms=e.uint64();break;default:e.skipType(7&r)}return o},e}(),Vq=t.Ack=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.dialogue=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.sequence=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.code=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.dialogue&&Object.hasOwnProperty.call(e,"dialogue")&&t.uint32(16).uint64(e.dialogue),null!=e.sequence&&Object.hasOwnProperty.call(e,"sequence")&&t.uint32(24).uint64(e.sequence),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(32).uint32(e.code),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.Ack;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.instance=e.uint64();break;case 2:r.dialogue=e.uint64();break;case 3:r.sequence=e.uint64();break;case 4:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),BA=t.FileUploadIndexGet=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.hash=q.newBuffer([]),e.prototype.size=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.hash&&Object.hasOwnProperty.call(e,"hash")&&t.uint32(18).bytes(e.hash),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(24).uint32(e.size),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.FileUploadIndexGet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.hash=e.bytes();break;case 3:r.size=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),CA=t.FileUploadIndexRet=function(){function e(e){if(this.servers=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.unit=0,e.prototype.servers=q.emptyArray,e.encode=function(e,t){if(t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.unit&&Object.hasOwnProperty.call(e,"unit")&&t.uint32(16).uint32(e.unit),null!=e.servers&&e.servers.length){t.uint32(26).fork();for(var n=0;n<e.servers.length;++n)t.uint32(e.servers[n]);t.ldelim()}return t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.FileUploadIndexRet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.unit=e.uint32();break;case 3:if(r.servers&&r.servers.length||(r.servers=[]),2==(7&i))for(i=e.uint32()+e.pos;e.pos<i;)r.servers.push(e.uint32());else r.servers.push(e.uint32());break;default:e.skipType(7&i)}}return r},e}(),DA=t.FileUploadIndexSet=function(){function e(e){if(this.servers=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.hash=q.newBuffer([]),e.prototype.unit=0,e.prototype.servers=q.emptyArray,e.encode=function(e,t){if(t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.hash&&Object.hasOwnProperty.call(e,"hash")&&t.uint32(18).bytes(e.hash),null!=e.unit&&Object.hasOwnProperty.call(e,"unit")&&t.uint32(24).uint32(e.unit),null!=e.servers&&e.servers.length){t.uint32(34).fork();for(var n=0;n<e.servers.length;++n)t.uint32(e.servers[n]);t.ldelim()}return t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.FileUploadIndexSet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.hash=e.bytes();break;case 3:r.unit=e.uint32();break;case 4:if(r.servers&&r.servers.length||(r.servers=[]),2==(7&i))for(i=e.uint32()+e.pos;e.pos<i;)r.servers.push(e.uint32());else r.servers.push(e.uint32());break;default:e.skipType(7&i)}}return r},e}(),EA=t.FileUploadIndexFin=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.zone=0,e.prototype.unit=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.zone&&Object.hasOwnProperty.call(e,"zone")&&t.uint32(16).uint32(e.zone),null!=e.unit&&Object.hasOwnProperty.call(e,"unit")&&t.uint32(24).uint32(e.unit),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.FileUploadIndexFin;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.zone=e.uint32();break;case 3:r.unit=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),FA=t.FileUploadIndexErr=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.code=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(16).uint32(e.code),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.FileUploadIndexErr;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),GA=t.FileDownloadIndexGet=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.zone=0,e.prototype.hash=q.newBuffer([]),e.prototype.size=0,e.prototype.unit=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.zone&&Object.hasOwnProperty.call(e,"zone")&&t.uint32(16).uint32(e.zone),null!=e.hash&&Object.hasOwnProperty.call(e,"hash")&&t.uint32(26).bytes(e.hash),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(32).uint32(e.size),null!=e.unit&&Object.hasOwnProperty.call(e,"unit")&&t.uint32(40).uint32(e.unit),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.FileDownloadIndexGet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.zone=e.uint32();break;case 3:r.hash=e.bytes();break;case 4:r.size=e.uint32();break;case 5:r.unit=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),HA=t.FileDownloadIndexRet=function(){function e(e){if(this.servers=[],this.backups=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.unit=0,e.prototype.zone=0,e.prototype.servers=q.emptyArray,e.prototype.backups=q.emptyArray,e.encode=function(e,t){if(t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.unit&&Object.hasOwnProperty.call(e,"unit")&&t.uint32(16).uint32(e.unit),null!=e.zone&&Object.hasOwnProperty.call(e,"zone")&&t.uint32(24).uint32(e.zone),null!=e.servers&&e.servers.length){t.uint32(34).fork();for(var n=0;n<e.servers.length;++n)t.uint32(e.servers[n]);t.ldelim()}if(null!=e.backups&&e.backups.length){for(t.uint32(42).fork(),n=0;n<e.backups.length;++n)t.uint32(e.backups[n]);t.ldelim()}return t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.FileDownloadIndexRet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.unit=e.uint32();break;case 3:r.zone=e.uint32();break;case 4:if(r.servers&&r.servers.length||(r.servers=[]),2==(7&i))for(i=e.uint32()+e.pos;e.pos<i;)r.servers.push(e.uint32());else r.servers.push(e.uint32());break;case 5:if(r.backups&&r.backups.length||(r.backups=[]),2==(7&i))for(i=e.uint32()+e.pos;e.pos<i;)r.backups.push(e.uint32());else r.backups.push(e.uint32());break;default:e.skipType(7&i)}}return r},e}(),IA=t.FileDownloadIndexErr=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.code=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(16).uint32(e.code),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.FileDownloadIndexErr;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),JA=t.GroupAllUsersList=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.pageSize=0,e.prototype.pageNumber=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.pageSize&&Object.hasOwnProperty.call(e,"pageSize")&&t.uint32(24).uint32(e.pageSize),null!=e.pageNumber&&Object.hasOwnProperty.call(e,"pageNumber")&&t.uint32(32).uint32(e.pageNumber),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAllUsersList;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.group=e.string();break;case 3:r.pageSize=e.uint32();break;case 4:r.pageNumber=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),KA=t.GroupAllUsersResult=function(){function e(e){if(this.memberInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.totalSize=0,e.prototype.pageSize=0,e.prototype.pageNumber=0,e.prototype.memberInfos=q.emptyArray,e.encode=function(e,n){if(n||(n=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&n.uint32(18).string(e.group),null!=e.totalSize&&Object.hasOwnProperty.call(e,"totalSize")&&n.uint32(24).uint32(e.totalSize),null!=e.pageSize&&Object.hasOwnProperty.call(e,"pageSize")&&n.uint32(32).uint32(e.pageSize),null!=e.pageNumber&&Object.hasOwnProperty.call(e,"pageNumber")&&n.uint32(40).uint32(e.pageNumber),null!=e.memberInfos&&e.memberInfos.length)for(var r=0;r<e.memberInfos.length;++r)t.GroupAllUsersResult.MemberInfo.encode(e.memberInfos[r],n.uint32(50).fork()).ldelim();return n},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAllUsersResult;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.group=e.string();break;case 3:r.totalSize=e.uint32();break;case 4:r.pageSize=e.uint32();break;case 5:r.pageNumber=e.uint32();break;case 6:r.memberInfos&&r.memberInfos.length||(r.memberInfos=[]),r.memberInfos.push(t.GroupAllUsersResult.MemberInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.MemberInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.account="",e.prototype.ts=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(10).string(e.account),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(16).uint32(e.ts),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAllUsersResult.MemberInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.account=e.string();break;case 2:r.ts=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),e}(),LA=t.UserStatusList=function(){function e(e){if(this.users=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.users=q.emptyArray,e.encode=function(e,t){if(t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.users&&e.users.length)for(var n=0;n<e.users.length;++n)t.uint32(18).string(e.users[n]);return t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserStatusList;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.users&&r.users.length||(r.users=[]),r.users.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),MA=t.UserStatusResult=function(){function e(e){if(this.userInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.userInfos=q.emptyArray,e.encode=function(e,n){if(n||(n=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.userInfos&&e.userInfos.length)for(var r=0;r<e.userInfos.length;++r)t.UserStatusResult.UserStatusInfo.encode(e.userInfos[r],n.uint32(18).fork()).ldelim();return n},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserStatusResult;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.userInfos&&r.userInfos.length||(r.userInfos=[]),r.userInfos.push(t.UserStatusResult.UserStatusInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.UserStatusInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.account="",e.prototype.ts=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(10).string(e.account),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(16).uint32(e.ts),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserStatusResult.UserStatusInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.account=e.string();break;case 2:r.ts=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),e}(),NA=t.UserAttributeGet=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.attributes=q.emptyArray,e.encode=function(e,t){if(t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),null!=e.attributes&&e.attributes.length)for(var n=0;n<e.attributes.length;++n)t.uint32(26).string(e.attributes[n]);return t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeGet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.account=e.string();break;case 3:r.attributes&&r.attributes.length||(r.attributes=[]),r.attributes.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),OA=t.UserAttributeRet=function(){function e(e){if(this.attributeInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.attributeInfos=q.emptyArray,e.encode=function(e,n){if(n||(n=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.attributeInfos&&e.attributeInfos.length)for(var r=0;r<e.attributeInfos.length;++r)t.UserAttributeRet.AttributeInfo.encode(e.attributeInfos[r],n.uint32(18).fork()).ldelim();return n},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeRet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.attributeInfos&&r.attributeInfos.length||(r.attributeInfos=[]),r.attributeInfos.push(t.UserAttributeRet.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.AttributeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.encode=function(e,t){return t||(t=J.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeRet.AttributeInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;default:e.skipType(7&i)}}return r},e}(),e}(),PA=t.UserAttributeSet=function(){function e(e){if(this.attributeInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.attributeInfos=q.emptyArray,e.encode=function(e,n){if(n||(n=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&n.uint32(18).string(e.account),null!=e.attributeInfos&&e.attributeInfos.length)for(var r=0;r<e.attributeInfos.length;++r)t.UserAttributeSet.AttributeInfo.encode(e.attributeInfos[r],n.uint32(26).fork()).ldelim();return n},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeSet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.account=e.string();break;case 3:r.attributeInfos&&r.attributeInfos.length||(r.attributeInfos=[]),r.attributeInfos.push(t.UserAttributeSet.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.AttributeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.encode=function(e,t){return t||(t=J.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeSet.AttributeInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;default:e.skipType(7&i)}}return r},e}(),e}(),QA=t.UserAttributeMod=function(){function e(e){if(this.attributeInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.attributeInfos=q.emptyArray,e.encode=function(e,n){if(n||(n=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&n.uint32(18).string(e.account),null!=e.attributeInfos&&e.attributeInfos.length)for(var r=0;r<e.attributeInfos.length;++r)t.UserAttributeMod.AttributeInfo.encode(e.attributeInfos[r],n.uint32(26).fork()).ldelim();return n},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeMod;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.account=e.string();break;case 3:r.attributeInfos&&r.attributeInfos.length||(r.attributeInfos=[]),r.attributeInfos.push(t.UserAttributeMod.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.AttributeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.encode=function(e,t){return t||(t=J.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeMod.AttributeInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;default:e.skipType(7&i)}}return r},e}(),e}(),RA=t.UserAttributeDel=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.prototype.attributes=q.emptyArray,e.encode=function(e,t){if(t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),null!=e.attributes&&e.attributes.length)for(var n=0;n<e.attributes.length;++n)t.uint32(26).string(e.attributes[n]);return t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeDel;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.account=e.string();break;case 3:r.attributes&&r.attributes.length||(r.attributes=[]),r.attributes.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),SA=t.UserAttributeErr=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.code=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(16).uint32(e.code),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeErr;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),TA=t.UserAttributeKeysGet=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.account="",e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(18).string(e.account),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeKeysGet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.account=e.string();break;default:e.skipType(7&i)}}return r},e}(),UA=t.UserAttributeKeysRet=function(){function e(e){if(this.keys=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.keys=q.emptyArray,e.encode=function(e,t){if(t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.keys&&e.keys.length)for(var n=0;n<e.keys.length;++n)t.uint32(18).string(e.keys[n]);return t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeKeysRet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.keys&&r.keys.length||(r.keys=[]),r.keys.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),VA=t.UserAttributeRsp=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserAttributeRsp;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;default:e.skipType(7&i)}}return r},e}(),WA=t.GroupStatusList=function(){function e(e){if(this.groups=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.groups=q.emptyArray,e.encode=function(e,t){if(t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.groups&&e.groups.length)for(var n=0;n<e.groups.length;++n)t.uint32(18).string(e.groups[n]);return t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupStatusList;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.groups&&r.groups.length||(r.groups=[]),r.groups.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),XA=t.GroupStatusResult=function(){function e(e){if(this.groupInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.groupInfos=q.emptyArray,e.encode=function(e,n){if(n||(n=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.groupInfos&&e.groupInfos.length)for(var r=0;r<e.groupInfos.length;++r)t.GroupStatusResult.GroupInfo.encode(e.groupInfos[r],n.uint32(18).fork()).ldelim();return n},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupStatusResult;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.groupInfos&&r.groupInfos.length||(r.groupInfos=[]),r.groupInfos.push(t.GroupStatusResult.GroupInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.GroupInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.group="",e.prototype.memberCount=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(10).string(e.group),null!=e.memberCount&&Object.hasOwnProperty.call(e,"memberCount")&&t.uint32(16).uint32(e.memberCount),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupStatusResult.GroupInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.group=e.string();break;case 2:r.memberCount=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),e}(),YA=t.GroupCountNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.size=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(26).string(e.group),null!=e.size&&Object.hasOwnProperty.call(e,"size")&&t.uint32(32).uint32(e.size),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupCountNotice;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.instance=e.uint64();break;case 2:r.seq=e.uint64();break;case 3:r.group=e.string();break;case 4:r.size=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),ZA=t.GroupAttributeGet=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.attributes=q.emptyArray,e.encode=function(e,t){if(t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.attributes&&e.attributes.length)for(var n=0;n<e.attributes.length;++n)t.uint32(26).string(e.attributes[n]);return t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeGet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.group=e.string();break;case 3:r.attributes&&r.attributes.length||(r.attributes=[]),r.attributes.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),$A=t.GroupAttributeRet=function(){function e(e){if(this.attributeMaps=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.attributeMaps=q.emptyArray,e.encode=function(e,n){if(n||(n=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.attributeMaps&&e.attributeMaps.length)for(var r=0;r<e.attributeMaps.length;++r)t.GroupAttributeRet.AttributeMap.encode(e.attributeMaps[r],n.uint32(18).fork()).ldelim();return n},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeRet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.attributeMaps&&r.attributeMaps.length||(r.attributeMaps=[]),r.attributeMaps.push(t.GroupAttributeRet.AttributeMap.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.AttributeMap=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.prototype.origin="",e.prototype.ms=q.Long?q.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=J.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),null!=e.origin&&Object.hasOwnProperty.call(e,"origin")&&t.uint32(26).string(e.origin),null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(32).uint64(e.ms),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeRet.AttributeMap;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;case 3:r.origin=e.string();break;case 4:r.ms=e.uint64();break;default:e.skipType(7&i)}}return r},e}(),e}(),aB=t.GroupAttributeSet=function(){function e(e){if(this.attributeInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.broadcast=!1,e.prototype.attributeInfos=q.emptyArray,e.encode=function(e,n){if(n||(n=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&n.uint32(18).string(e.group),null!=e.broadcast&&Object.hasOwnProperty.call(e,"broadcast")&&n.uint32(24).bool(e.broadcast),null!=e.attributeInfos&&e.attributeInfos.length)for(var r=0;r<e.attributeInfos.length;++r)t.GroupAttributeSet.AttributeInfo.encode(e.attributeInfos[r],n.uint32(34).fork()).ldelim();return n},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeSet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.group=e.string();break;case 3:r.broadcast=e.bool();break;case 4:r.attributeInfos&&r.attributeInfos.length||(r.attributeInfos=[]),r.attributeInfos.push(t.GroupAttributeSet.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.AttributeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.encode=function(e,t){return t||(t=J.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeSet.AttributeInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;default:e.skipType(7&i)}}return r},e}(),e}(),bB=t.GroupAttributeMod=function(){function e(e){if(this.attributeInfos=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.broadcast=!1,e.prototype.attributeInfos=q.emptyArray,e.encode=function(e,n){if(n||(n=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&n.uint32(18).string(e.group),null!=e.broadcast&&Object.hasOwnProperty.call(e,"broadcast")&&n.uint32(24).bool(e.broadcast),null!=e.attributeInfos&&e.attributeInfos.length)for(var r=0;r<e.attributeInfos.length;++r)t.GroupAttributeMod.AttributeInfo.encode(e.attributeInfos[r],n.uint32(34).fork()).ldelim();return n},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeMod;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.group=e.string();break;case 3:r.broadcast=e.bool();break;case 4:r.attributeInfos&&r.attributeInfos.length||(r.attributeInfos=[]),r.attributeInfos.push(t.GroupAttributeMod.AttributeInfo.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.AttributeInfo=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.encode=function(e,t){return t||(t=J.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeMod.AttributeInfo;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;default:e.skipType(7&i)}}return r},e}(),e}(),cB=t.GroupAttributeDel=function(){function e(e){if(this.attributes=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.broadcast=!1,e.prototype.attributes=q.emptyArray,e.encode=function(e,t){if(t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),null!=e.broadcast&&Object.hasOwnProperty.call(e,"broadcast")&&t.uint32(24).bool(e.broadcast),null!=e.attributes&&e.attributes.length)for(var n=0;n<e.attributes.length;++n)t.uint32(34).string(e.attributes[n]);return t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeDel;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.group=e.string();break;case 3:r.broadcast=e.bool();break;case 4:r.attributes&&r.attributes.length||(r.attributes=[]),r.attributes.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),dB=t.GroupAttributeAlt=function(){function e(e){if(this.attributeMaps=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.attributeMaps=q.emptyArray,e.encode=function(e,n){if(n||(n=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&n.uint32(18).string(e.group),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&n.uint32(24).uint64(e.instance),null!=e.attributeMaps&&e.attributeMaps.length)for(var r=0;r<e.attributeMaps.length;++r)t.GroupAttributeAlt.AttributeMap.encode(e.attributeMaps[r],n.uint32(34).fork()).ldelim();return n},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeAlt;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.group=e.string();break;case 3:r.instance=e.uint64();break;case 4:r.attributeMaps&&r.attributeMaps.length||(r.attributeMaps=[]),r.attributeMaps.push(t.GroupAttributeAlt.AttributeMap.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.AttributeMap=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.key="",e.prototype.value="",e.prototype.origin="",e.prototype.ms=q.Long?q.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=J.create()),null!=e.key&&Object.hasOwnProperty.call(e,"key")&&t.uint32(10).string(e.key),null!=e.value&&Object.hasOwnProperty.call(e,"value")&&t.uint32(18).string(e.value),null!=e.origin&&Object.hasOwnProperty.call(e,"origin")&&t.uint32(26).string(e.origin),null!=e.ms&&Object.hasOwnProperty.call(e,"ms")&&t.uint32(32).uint64(e.ms),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeAlt.AttributeMap;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.key=e.string();break;case 2:r.value=e.string();break;case 3:r.origin=e.string();break;case 4:r.ms=e.uint64();break;default:e.skipType(7&i)}}return r},e}(),e}(),eB=t.GroupAttributeRsp=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeRsp;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;default:e.skipType(7&i)}}return r},e}(),fB=t.GroupAttributeErr=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.code=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(16).uint32(e.code),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeErr;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),gB=t.GroupAttributeKeysGet=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.group="",e.encode=function(e,t){return t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.group&&Object.hasOwnProperty.call(e,"group")&&t.uint32(18).string(e.group),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeKeysGet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.group=e.string();break;default:e.skipType(7&i)}}return r},e}(),hB=t.GroupAttributeKeysRet=function(){function e(e){if(this.keys=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.keys=q.emptyArray,e.encode=function(e,t){if(t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.keys&&e.keys.length)for(var n=0;n<e.keys.length;++n)t.uint32(18).string(e.keys[n]);return t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.GroupAttributeKeysRet;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.keys&&r.keys.length||(r.keys=[]),r.keys.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),iB=t.SubscribeUserStatus=function(){function e(e){if(this.users=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.users=q.emptyArray,e.encode=function(e,t){if(t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.users&&e.users.length)for(var n=0;n<e.users.length;++n)t.uint32(18).string(e.users[n]);return t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.SubscribeUserStatus;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.users&&r.users.length||(r.users=[]),r.users.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),jB=t.UnsubscribeUserStatus=function(){function e(e){if(this.users=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.users=q.emptyArray,e.encode=function(e,t){if(t||(t=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(8).uint64(e.seq),null!=e.users&&e.users.length)for(var n=0;n<e.users.length;++n)t.uint32(18).string(e.users[n]);return t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UnsubscribeUserStatus;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.users&&r.users.length||(r.users=[]),r.users.push(e.string());break;default:e.skipType(7&i)}}return r},e}(),kB=t.UserJoinNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.user="",e.encode=function(e,t){return t||(t=J.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.user&&Object.hasOwnProperty.call(e,"user")&&t.uint32(26).string(e.user),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserJoinNotice;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.instance=e.uint64();break;case 2:r.seq=e.uint64();break;case 3:r.user=e.string();break;default:e.skipType(7&i)}}return r},e}(),lB=t.UserQuitNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.user="",e.encode=function(e,t){return t||(t=J.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.user&&Object.hasOwnProperty.call(e,"user")&&t.uint32(26).string(e.user),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserQuitNotice;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.instance=e.uint64();break;case 2:r.seq=e.uint64();break;case 3:r.user=e.string();break;default:e.skipType(7&i)}}return r},e}(),mB=t.UserWaitNotice=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.instance=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.user="",e.encode=function(e,t){return t||(t=J.create()),null!=e.instance&&Object.hasOwnProperty.call(e,"instance")&&t.uint32(8).uint64(e.instance),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&t.uint32(16).uint64(e.seq),null!=e.user&&Object.hasOwnProperty.call(e,"user")&&t.uint32(26).string(e.user),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.UserWaitNotice;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.instance=e.uint64();break;case 2:r.seq=e.uint64();break;case 3:r.user=e.string();break;default:e.skipType(7&i)}}return r},e}(),nB=t.SubscribeResponse=function(){function e(e){if(this.errors=[],e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.seq=q.Long?q.Long.fromBits(0,0,!0):0,e.prototype.errors=q.emptyArray,e.encode=function(e,n){if(n||(n=J.create()),null!=e.seq&&Object.hasOwnProperty.call(e,"seq")&&n.uint32(8).uint64(e.seq),null!=e.errors&&e.errors.length)for(var r=0;r<e.errors.length;++r)t.SubscribeResponse.SubscribeErrorsType.encode(e.errors[r],n.uint32(18).fork()).ldelim();return n},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.SubscribeResponse;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.seq=e.uint64();break;case 2:r.errors&&r.errors.length||(r.errors=[]),r.errors.push(t.SubscribeResponse.SubscribeErrorsType.decode(e,e.uint32()));break;default:e.skipType(7&i)}}return r},e.SubscribeErrorsType=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.account="",e.prototype.code=0,e.encode=function(e,t){return t||(t=J.create()),null!=e.account&&Object.hasOwnProperty.call(e,"account")&&t.uint32(10).string(e.account),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(16).uint32(e.code),t},e.decode=function(e,n){e instanceof y||(e=y.create(e)),n=void 0===n?e.len:e.pos+n;for(var r=new t.SubscribeResponse.SubscribeErrorsType;e.pos<n;){var i=e.uint32();switch(i>>>3){case 1:r.account=e.string();break;case 2:r.code=e.uint32();break;default:e.skipType(7&i)}}return r},e}(),e}(),oB=Object.freeze({__proto__:null,URI:rA,Wrapper:yh,Ping:sA,Pong:tA,UserJoin:uA,UserResp:vA,UserQuit:wA,UserDrop:xA,GroupEnter:yA,GroupLeave:zA,GroupReply:AA,GroupLeaveNotice:Sq,GroupEnterNotice:Tq,Message:Uq,Ack:Vq,FileUploadIndexGet:BA,FileUploadIndexRet:CA,FileUploadIndexSet:DA,FileUploadIndexFin:EA,FileUploadIndexErr:FA,FileDownloadIndexGet:GA,FileDownloadIndexRet:HA,FileDownloadIndexErr:IA,GroupAllUsersList:JA,GroupAllUsersResult:KA,UserStatusList:LA,UserStatusResult:MA,UserAttributeGet:NA,UserAttributeRet:OA,UserAttributeSet:PA,UserAttributeMod:QA,UserAttributeDel:RA,UserAttributeErr:SA,UserAttributeKeysGet:TA,UserAttributeKeysRet:UA,UserAttributeRsp:VA,GroupStatusList:WA,GroupStatusResult:XA,GroupCountNotice:YA,GroupAttributeGet:ZA,GroupAttributeRet:$A,GroupAttributeSet:aB,GroupAttributeMod:bB,GroupAttributeDel:cB,GroupAttributeAlt:dB,GroupAttributeRsp:eB,GroupAttributeErr:fB,GroupAttributeKeysGet:gB,GroupAttributeKeysRet:hB,SubscribeUserStatus:iB,UnsubscribeUserStatus:jB,UserJoinNotice:kB,UserQuitNotice:lB,UserWaitNotice:mB,SubscribeResponse:nB,default:t}),pB="".repeat||function(e){var t=String(hb(this)),n="";if(0>(e=ic(e))||1/0==e)throw RangeError("Wrong number of repetitions");for(;0<e;(e>>>=1)&&(t+=t))1&e&&(n+=t);return n},qB=Math.ceil,Wq=function(e){return function(t,n,r){var i=(t=String(hb(t))).length;return r=void 0===r?" ":String(r),(n=za(n))<=i||""==r?t:(n-=i,(i=pB.call(r,qB(n/r.length))).length>n&&(i=i.slice(0,n)),e?t+i:i+t)}},rB=Wq(!1),sB=Wq(!0),Xq=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(oe);N({target:"String",proto:!0,forced:Xq},{padEnd:function(e){return sB(this,e,1<arguments.length?arguments[1]:void 0)}}),N({target:"Number",stat:!0},{MIN_SAFE_INTEGER:-9007199254740991});var tB=kf,Yq=function(e){return function(t){t=rb(t);for(var n,r=Dc(t),i=r.length,o=0,s=[];i>o;)n=r[o++],ja&&!tB.call(t,n)||s.push(e?[n,t[n]]:t[n]);return s}},uB=[Yq(!0),Yq(!1)][0];N({target:"Object",stat:!0},{entries:function(e){return uB(e)}});var vB=Db.f,Zq="".endsWith,wB=Math.min,$q=Oj("endsWith"),xB=!$q&&!!function(){var e=vB(String.prototype,"endsWith");return e&&!e.writable}();N({target:"String",proto:!0,forced:!xB&&!$q},{endsWith:function(e){var t=String(hb(this));Nj(e);var n=1<arguments.length?arguments[1]:void 0,r=za(t.length);return n=void 0===n?r:wB(za(n),r),r=String(e),Zq?Zq.call(t,r,n):t.slice(n-r.length,n)===r}}),Kg("match",1,(function(e,t,n){return[function(t){var n=hb(this),r=null==t?void 0:t[e];return void 0!==r?r.call(t,n):new RegExp(t)[e](String(n))},function(e){var r=n(t,e,this);if(r.done)return r.value;if(e=qa(e),r=String(this),!e.global)return te(e,r);var i=e.unicode;e.lastIndex=0;for(var o,s=[],a=0;null!==(o=te(e,r));)o=String(o[0]),s[a]=o,""===o&&(e.lastIndex=bj(r,za(e.lastIndex),i)),a++;return 0===a?null:s}]}));var yB=Db.f,ar="".startsWith,zB=Math.min,br=Oj("startsWith"),AB=!br&&!!function(){var e=yB(String.prototype,"startsWith");return e&&!e.writable}();N({target:"String",proto:!0,forced:!AB&&!br},{startsWith:function(e){var t=String(hb(this));Nj(e);var n=za(zB(1<arguments.length?arguments[1]:void 0,t.length)),r=String(e);return ar?ar.call(t,r,n):t.slice(n,n+r.length)===r}});var sm=function(e){var t=/(%?)(%([jds]))/g,n=Array.prototype.slice.call(arguments,1);return n.length&&(e=e.replace(t,(function(e,t,r,i){switch(r=n.shift(),i){case"s":r=""+r;break;case"d":r=Number(r);break;case"j":r=JSON.stringify(r)}return t?(n.unshift(r),e):r}))),n.length&&(e+=" "+n.join(" ")),""+(e=e.replace(/%{2,2}/g,"%"))},BB=/\s/,CB=function(e){for(var t=e.length;t--&&BB.test(e.charAt(t)););return t},DB=/^\s+/,cr=NaN,EB=/^[-+]0x[0-9a-f]+$/i,FB=/^0b[01]+$/i,GB=/^0o[0-7]+$/i,HB=parseInt,Pk=function(e){if("number"==typeof e)return e;if(Vd(e))return cr;if(jb(e)&&(e="function"==typeof e.valueOf?e.valueOf():e,e=jb(e)?e+"":e),"string"!=typeof e)return 0===e?e:+e;e=e?e.slice(0,CB(e)+1).replace(DB,""):e;var t=FB.test(e);return t||GB.test(e)?HB(e.slice(2),t?2:8):EB.test(e)?cr:+e},IB=Math.max,JB=Math.min,KB=function(e,t,n){function r(t){var n=u,r=c;return u=c=void 0,p=t,l=e.apply(r,n)}function i(e){var n=e-h;return e-=p,void 0===h||n>=t||0>n||v&&e>=g}function o(){var e=Bb.Date.now();if(i(e))return s(e);var n=setTimeout,r=e-p;e=t-(e-h),r=v?JB(e,g-r):e,f=n(o,r)}function s(e){return f=void 0,b&&u?r(e):(u=c=void 0,l)}function a(){var e=Bb.Date.now(),n=i(e);if(u=arguments,c=this,h=e,n){if(void 0===f)return p=e=h,f=setTimeout(o,t),d?r(e):l;if(v)return clearTimeout(f),f=setTimeout(o,t),r(h)}return void 0===f&&(f=setTimeout(o,t)),l}var u,c,l,f,h,p=0,d=!1,v=!1,b=!0;if("function"!=typeof e)throw new TypeError("Expected a function");if(t=Pk(t)||0,jb(n)){d=!!n.leading;var g=(v="maxWait"in n)?IB(Pk(n.maxWait)||0,t):g;b="trailing"in n?!!n.trailing:b}return a.cancel=function(){void 0!==f&&clearTimeout(f),p=0,u=h=c=f=void 0},a.flush=function(){return void 0===f?l:s(Bb.Date.now())},a},sc=function(e){function t(e,i){return W(this,t),m(n(e=r.call(this,rm(e,i))),"originalError",void 0),m(n(e),"code",void 0),m(n(e),"serverCode",void 0),"number"==typeof i?e.code=i:"string"==typeof i?e.name=i:void 0!==i&&(i.originalError&&(e.originalError=i.originalError),void 0!==i.code&&(e.code=i.code),void 0!==i.serverCode&&(e.serverCode=i.serverCode)),e}ka(t,e);var r=la(t);return t}(Re(Error)),Da=function(e){function t(e,i){return W(this,t),m(n(e=r.call(this,rm(e,i))),"name","RtmInternalError"),m(n(e),"code",void 0),e.code=i,e}ka(t,e);var r=la(t);return t}(Re(Error)),zh=function(){return function(e){function t(e){W(this,t);var r=Object.keys(e);return n.call(this,e[r[0]],r[0])}ka(t,e);var n=la(t);return t}(Da)},Ca=zh(),bb=function(e){function t(){W(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmTimeoutError"),e}ka(t,e);var r=la(t);return t}(sc),L=function(e){function t(){W(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmInvalidArgumentError"),e}ka(t,e);var r=la(t);return t}(sc),H=function(e){function t(){W(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmInvalidStatusError"),e}ka(t,e);var r=la(t);return t}(sc),Qk=function(e){function t(){W(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmInterruptedError"),e}ka(t,e);var r=la(t);return t}(sc),gb=function(e){function t(){W(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmLimitExceededError"),e}ka(t,e);var r=la(t);return t}(sc),LB=function(e){function t(){W(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmInvokeTooOftenError"),e}ka(t,e);var r=la(t);return t}(sc),ca=function(e){function t(){W(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmUnavailableError"),m(n(e),"serverCode",void 0),m(n(e),"statusCode",void 0),e}ka(t,e);var r=la(t);return t}(sc),Ke=function(e){function t(){W(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmUnauthenticatedError"),m(n(e),"serverCode",void 0),e}ka(t,e);var r=la(t);return t}(sc),Pc=function(e){function t(){W(this,t);for(var e=arguments.length,i=Array(e),o=0;o<e;o++)i[o]=arguments[o];return m(n(e=r.call.apply(r,[this].concat(i))),"name","RtmUnknownError"),e}ka(t,e);var r=la(t);return t}(sc),Na=function(e){return e instanceof bb||e instanceof pb},wa=function(e){return e instanceof sc},Md=function(e,t,n){return['Executing "%s.%s" timed out after %ds',e,t,n/1e3]},qm=new Map,MB=function(){var e=new Date;return"".concat(e.toISOString().split("T")[1].replace(/\..+/,""),".").concat(e.getMilliseconds())},Rk=Object.keys,dr=Object.entries.bind(Object),mg=function(e){return"string"==typeof e?e.endsWith(".")?e:"".concat(e,"."):e},xm=function(e){for(var t="",n=(e=new Uint8Array(e)).byteLength,r=-1;++r<n;)t+=String.fromCharCode(e[r]);return t=btoa(t),"data:;base64,".concat(t)},NB=O((function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}));N({target:"Date",proto:!0,forced:NB},{toJSON:function(e){e=Wa(this);var t=hc(e);return"number"!=typeof t||isFinite(t)?e.toISOString():null}}),N({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}});var vt=Object.prototype.hasOwnProperty,er=function(e,t,n){return JSON.stringify(Cm(e),t,n)};er.ensureProperties=Cm;var OB=function(e,t){t=t||{};var n=R(e);if("string"===n&&0<e.length)return wt(e);if("number"===n&&isFinite(e))return t.long?e=864e5<=(t=Math.abs(e))?tg(e,t,864e5,"day"):36e5<=t?tg(e,t,36e5,"hour"):6e4<=t?tg(e,t,6e4,"minute"):1e3<=t?tg(e,t,1e3,"second"):e+" ms":e=864e5<=(t=Math.abs(e))?Math.round(e/864e5)+"d":36e5<=t?Math.round(e/36e5)+"h":6e4<=t?Math.round(e/6e4)+"m":1e3<=t?Math.round(e/1e3)+"s":e+"ms",e;throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))},PB=function(e){function t(e){function r(){for(var e=arguments.length,n=Array(e),o=0;o<e;o++)n[o]=arguments[o];if(r.enabled){e=Number(new Date),r.diff=e-(i||e),r.prev=i,i=r.curr=e,n[0]=t.coerce(n[0]),"string"!=typeof n[0]&&n.unshift("%O");var s=0;n[0]=n[0].replace(/%([a-zA-Z%])/g,(function(e,i){return"%%"===e?"%":(s++,"function"==typeof(i=t.formatters[i])&&(e=i.call(r,n[s]),n.splice(s,1),s--),e)})),t.formatArgs.call(r,n),(r.log||t.log).apply(r,n)}}var i,o=null;return r.namespace=e,r.useColors=t.useColors(),r.color=t.selectColor(e),r.extend=n,r.destroy=t.destroy,Object.defineProperty(r,"enabled",{enumerable:!0,configurable:!1,get:function(){return null===o?t.enabled(e):o},set:function(e){o=e}}),"function"==typeof t.init&&t.init(r),r}function n(e,n){return(e=t(this.namespace+(void 0===n?":":n)+e)).log=this.log,e}function r(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){var e=[].concat(I(t.names.map(r)),I(t.skips.map(r).map((function(e){return"-"+e})))).join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.names=[],t.skips=[];var n,r=("string"==typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r=0;for(n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=OB,t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach((function(n){t[n]=e[n]})),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){for(var n=0,r=0;r<e.length;r++)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]},t.enable(t.load()),t},fr=Xa((function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),this.useColors){var n="color: "+this.color;t.splice(1,0,n,"color: inherit");var r=0,i=0;t[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))})),t.splice(i,0,n)}},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(e){}},t.load=function(){try{var e=t.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof process&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))};e:{try{var n=localStorage;break e}catch(e){}n=void 0}t.storage=n,t.destroy=function(){var e=!1;return function(){e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}}(),t.colors="#0000CC #0000FF #0033CC #0033FF #0066CC #0066FF #0099CC #0099FF #00CC00 #00CC33 #00CC66 #00CC99 #00CCCC #00CCFF #3300CC #3300FF #3333CC #3333FF #3366CC #3366FF #3399CC #3399FF #33CC00 #33CC33 #33CC66 #33CC99 #33CCCC #33CCFF #6600CC #6600FF #6633CC #6633FF #66CC00 #66CC33 #9900CC #9900FF #9933CC #9933FF #99CC00 #99CC33 #CC0000 #CC0033 #CC0066 #CC0099 #CC00CC #CC00FF #CC3300 #CC3333 #CC3366 #CC3399 #CC33CC #CC33FF #CC6600 #CC6633 #CC9900 #CC9933 #CCCC00 #CCCC33 #FF0000 #FF0033 #FF0066 #FF0099 #FF00CC #FF00FF #FF3300 #FF3333 #FF3366 #FF3399 #FF33CC #FF33FF #FF6600 #FF6633 #FF9900 #FF9933 #FFCC00 #FFCC33".split(" "),t.log=console.debug||console.log||function(){},e.exports=PB(t),e.exports.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}})),gr=fr("RTM:DEBUG"),Le;gr.enabled=!1,function(e){e[e.Uploading=0]="Uploading",e[e.Free=1]="Free"}(Le||(Le={}));var QB=function(){function e(t){W(this,e),m(this,"uploadRequest",void 0),m(this,"uploadState",void 0),m(this,"uploadResendCount",void 0),m(this,"LogCache",void 0),m(this,"LogsToPost",void 0),m(this,"processId",void 0),m(this,"sdkVersion",void 0),m(this,"logId",void 0),this.processId=t.processId,this.sdkVersion=t.sdkVersion,this.uploadRequest=t.uploadRequest,this.uploadState=Le.Free,this.uploadResendCount=0,this.LogCache=[],this.LogsToPost=[],this.logId=0}return Ea(e,[{key:"upload",value:function(e,t){this.LogCache.push(e),this.uploadState===Le.Free&&(this.LogsToPost=40>this.LogCache.length?this.LogCache.splice(0,this.LogCache.length):this.LogCache.splice(0,40),this.postLog(this.LogsToPost,t))}},{key:"postLog",value:function(e,t){var n=this;this.uploadState=Le.Uploading,setTimeout(K(w.mark((function r(){var i,o;return w.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i={sdk_version:n.sdkVersion,process_id:n.processId,payload:JSON.stringify(e)},r.prev=1,r.next=4,n.uploadRequest(i,t);case 4:r.next=11;break;case 6:return r.prev=6,r.t0=r.catch(1),o=2>n.uploadResendCount++?2e3:1e4,setTimeout((function(){return n.postLog(n.LogsToPost,t)}),o),r.abrupt("return");case 11:if(gr('The logs uploaded for "process-'.concat(Sf,'"')),0!==n.LogCache.length){r.next=15;break}return n.uploadState=Le.Free,r.abrupt("return");case 15:n.uploadResendCount=0,n.LogsToPost=40>n.LogCache.length?n.LogCache.splice(0,n.LogCache.length):n.LogCache.splice(0,40),n.postLog(n.LogsToPost,t);case 18:case"end":return r.stop()}}),r,null,[[1,6]])}))),Nd.getParameter("LOG_UPLOAD_INTERVAL"))}}]),e}(),hr=function(){var e=K(w.mark((function e(t,n){var r,i,o,s=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(2<(r=2<s.length&&void 0!==s[2]?s[2]:0))){e.next=3;break}return e.abrupt("return");case 3:return i={withCredentials:!0,body:t,timeout:2e4},o="https://".concat(0<r?(null==n?void 0:n.LOG_UPLOAD_SERVER[0])||"logservice-rtm.agoraio.cn":(null==n?void 0:n.LOG_UPLOAD_SERVER[0])||"logservice-rtm.agora.io","/upload/v1"),e.next=7,gf(o,i).catch((function(e){return hr(t,n,r+1)}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),RB=new QB({processId:"process-".concat(Sf),sdkVersion:"Agora_RTM_SDK_for_Web_".concat("v1.4.2-0-gcddbca54"),uploadRequest:hr}),ir="text payload rawMessage thumbnail token detail ticket attributeInfos".split(" "),jr=function(e){return"object"===R(e)?md(e)?qg(e,ir):e.constructor&&e.constructor.name:e},kr=function(e,t){return e instanceof Error?e.message:"string"!=typeof e?JSON.stringify(qg(e,ir)):(t=t.map((function(e){return e instanceof Error?e.message:"object"===R(e)?er(Array.isArray(e)?e.map(jr):jr(e)):e})),sm.apply(void 0,[e.replace(/%[%Oo]/g,(function(e){return"%%"===e?"%":"%o"===e||"%O"===e?"%s":e}))].concat(I(t))))},SB=1,lr=function(e,t,n){var r=fr(e);return r.enabled=!0,r.log=n,r.useColors=!1,function(n){for(var i=arguments.length,o=Array(1<i?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];if(t.enableLogUpload){i=mg(n);var a=kr(i,o);RB.upload({log_item_id:"".concat(SB++),log_level:e,payload_str:"[".concat(MB(),"] ").concat(e," - ").concat(256<a.length?a.slice(0,256):a)},t._areaConfig)}switch(i=function(e){var t=a||kr(mg(n),o),i=dd.LOG_HANDLER;"function"==typeof i&&i({level:e,message:t}),r(t)},e){case"RTM:INFO":t.logFilter.info&&i("log");break;case"RTM:WARN":t.logFilter.warn&&i("warning");break;case"RTM:ERROR":t.logFilter.error&&i("error");break;case"RTM:TRACK":t.logFilter.track&&i("log");break;case"RTM:MSG:RECV":case"RTM:MSG:SEND":t.logFilter.debug&&i("debug");break;case"RTM:DEBUG":t.logFilter.debug&&i("debug")}}},Sk,mr=function(e){return function(t){var n=1===Sk||void 0===e?"":"Ins#".concat(e," ");return"".concat(n).concat(t)}},Tk=function(e,t,n){var r=mr(Sk);return lr("RTM:".concat(t),n,(function(t){return e(r(t))}))},vb=function(){return function(e){function t(e,i){var o=2<arguments.length&&void 0!==arguments[2]&&arguments[2];W(this,t);var s=r.call(this);if(m(n(s),"logError",void 0),m(n(s),"invokeTracker",void 0),m(n(s),"resultTracker",void 0),m(n(s),"errorTracker",void 0),m(n(s),"eventTracker",void 0),m(n(s),"info",void 0),m(n(s),"warn",void 0),m(n(s),"log",void 0),m(n(s),"genLogger",void 0),m(n(s),"loggerId",void 0),m(n(s),"logger",void 0),m(n(s),"name",void 0),s.logger=e,s.name=i,s.loggerId=e.loggerId,s.info=e.info,s.warn=e.warn,s.logError=e.logError,s.genLogger=e.genLogger,s.log=e.genLogger("RTM:DEBUG","<".concat(i,"> ")),s.invokeTracker=e.genTracker("Invoke"),s.eventTracker=e.genTracker("Event"),s.resultTracker=e.genTracker("Result"),s.errorTracker=e.genTracker("Error"),o){var a=s.emit.bind(n(s));s.emit=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];e=t[0],n=t.slice(1),s.eventTracker.apply(s,["%s: ".concat(0<n.length?"%s emitted with args: ".concat(n.map((function(){return"%o"}))):"%s emitted"),i,e].concat(I(n)));try{a.apply(void 0,t)}catch(t){s.logError("Caught in the callback function of the event %s",e,t)}}}return s}ka(t,e);var r=la(t);return t}(aa)},TB=function(e){return Tk(console.log.bind(console),"INFO",e)},UB=function(e){return Tk(console.warn.bind(console),"WARN",e)},VB=function(e){return Tk(console.error.bind(console),"ERROR",e)},nr=function(e,t){return function(n){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",i=mr(e),o=console.debug.bind(console),s=lr(n,t,(function(e){return o(i(e))}));return function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return s.apply(void 0,[r+e].concat(n))}}},WB=function(e,t){return function(n){return nr(e,t)("RTM:TRACK","[".concat(n,"] "))}},yi=t.URI,yt=yh,XB=Se(oB,["Wrapper"]),Dm=rg(XB,"URI"),YB=Math.floor,ZB=Math.random,or=function(e,t){var n=-1,r=e.length,i=r-1;for(t=void 0===t?r:t;++n<t;){r=n;var o=i;o=e[r+=YB(ZB()*(o-r+1))],e[r]=e[n],e[n]=o}return e.length=t,e},$B=function(e){return or(Ih(e))},Em=function(e,t){return Ud(t,(function(t){return e[t]}))},aC=function(e){return or(null==e?[]:Em(e,Rc(e)))},Ah=function(e){return(Ya(e)?$B:aC)(e)},Me={0:9591,1:9593},Ne=function(e){return"https://".concat(e,"/api/v1")},bC=mb.apply(void 0,I(Ah(["ap-web-1.agoraio.cn","ap-web-2.agoraio.cn"].map(Ne)))),cC=mb.apply(void 0,I(Ah(["ap-web-1.agora.io","ap-web-2.agora.io"].map(Ne)))),dC=mb.apply(void 0,I(Ah(["ap-web-3.agoraio.cn","ap-web-4.agoraio.cn"].map(Ne)))),eC=mb.apply(void 0,I(Ah(["ap-web-3.agora.io","ap-web-4.agora.io"].map(Ne)))),Uk=zh(),Vk=function(e){function t(e,i,o,s,a,u){W(this,t);var c=r.call(this,a,pm("Socket-",a.loggerId));if(m(n(c),"isActiveClose",!1),m(n(c),"loggedIn",!1),m(n(c),"useCnDomain",void 0),m(n(c),"receivedPacket",new La),m(n(c),"open$",void 0),m(n(c),"input$",new La),m(n(c),"userJoin$",new La),m(n(c),"attemptsSinceLastError",0),m(n(c),"message$",new La),m(n(c),"socket$",void 0),m(n(c),"toClose",new La),m(n(c),"toReconnect",new La),m(n(c),"sendLogger",void 0),m(n(c),"receiveLogger",void 0),m(n(c),"ip",void 0),m(n(c),"env",void 0),m(n(c),"ticket",void 0),m(n(c),"context",void 0),m(n(c),"getDomain",(function(){var e=c.useCnDomain?"agoraio.cn":"agora.io";return"".concat(c.ip.split(".").join("-"),".edge.").concat(e)})),m(n(c),"socketReconnector",(function(e){var t=function(e){return c.attemptsSinceLastError+=1,c.warn("The %s of Env %d reconnecting %s",c.name,c.env,e.message),uc(1500)};return e.pipe(Ga((function(e){return c.log("socket connection closed"),c.loggedIn=!1,2<=c.attemptsSinceLastError?(c.warn("socket connection failure"),c.emit("connectionFailure"),c.close(),ba(e)):c.isActiveClose?dc:(c.emit("reconnect"),c.useCnDomain=!c.useCnDomain,ba(e))})),ae((function(e){return e.pipe(vc(t))})))})),c.ip=e,c.env=i,c.ticket=o,c.context=s,c.useCnDomain="CN"===c.context.area,c.sendLogger=c.genLogger("RTM:MSG:SEND"),c.receiveLogger=c.genLogger("RTM:MSG:RECV"),0!==i&&1!==i)throw new Uk({ILLEGAL_RTM_ENV:"The env number is out of rtm env count"});if(!pt(e))throw new Uk({IP_NOT_VALID:"The ip from ap is not valid"});void 0!==u&&(c.useCnDomain=u);var l=Me[i];c.log("Opening websocket address %s for the Env %d",c.ip,c.env);var f=Tb(c.input$,c.userJoin$.pipe(lt(2)),c.message$).pipe(Z((function(e){return yh.encode(e).finish()})));return e=Tb(mt("",{protocols:[],makeWebSocket:function(){var e=new WebSocket("wss://".concat(c.getDomain(),":").concat(l));return e.binaryType="arraybuffer",e}}),c.toReconnect),c.socket$=ya(e,Ck.pipe(Za(5e3),Ga((function(e){return Na(e)&&c.warn("socket open timed out"),ba(e)})))).pipe(Z((function(e){if(e instanceof Error)throw c.warn("Env_%d: Force reconnect the socket",c.env),e;return e(f).pipe(Z((function(e){return yh.decode(new Uint8Array(e))})))})),c.socketReconnector),c.open$=c.socket$.pipe(Y((function(e){c.log("Websocket opened",c.name),e.subscribe((function(e){var t=e.data;e=yi[e.uri].slice(0,-3),t=Dm[e].decode(t);var n=fA({},rg(t,"toJSON"),(function(e,t){return t instanceof U?om(t):t})),r=!1;if((t instanceof Tq||t instanceof Sq)&&t.instance.lessThanOrEqual(4294967295)&&(r=!0),t instanceof Uq||t instanceof Vq){var i=t.instance,o=t.sequence;(t.dialogue.lessThanOrEqual(4294967295)||i.lessThanOrEqual(4294967295)||o.lessThan(1))&&(r=!0)}r?c.warn("Env_%d: Illegal %s, abandoned %o",c.env,e,n):("Pong"!==e&&c.receiveLogger("Env_%d: %s %o",c.env,e,n),c.receivedPacket.next([e,t]))}),(function(){}))})),bf(void 0),ob(c.toClose),be()),c}ka(t,e);var r=la(t);return Ea(t,[{key:"address",get:function(){return"".concat(this.ip,":").concat(Me[this.env])}},{key:"sendPacket",value:function(e,t){if("Ping"!==e){var n=oc(t,(function(e){return e instanceof U?om(e):e}));this.sendLogger("Env_%d: %s %o",this.env,e,n)}t=xt(e,t),"UserJoin"===e?this.userJoin$.next(t):"Message"===e?this.message$.next(t):this.input$.next(t)}},{key:"close",value:function(){this.isActiveClose=!0,this.loggedIn=!1,this.toClose.next()}},{key:"fromReceived",value:function(e){var t=this;return this.receivedPacket.pipe(Y((function(e){var n=pa(e,2);e=n[0],n=n[1],"UserResp"===e&&(t.attemptsSinceLastError=0,t.loggedIn=!0),"UserDrop"===e&&t.emit("socketUserDrop",n)})),nb((function(t){return pa(t,1)[0]===e})),Z((function(e){return pa(e,2)[1]})))}},{key:"forceReconnect",value:function(){this.toReconnect.next(new Uk({FORCE_RECONNECTING:"Connection seems broken, try force reconnecting"}))}}]),t}(vb()),Oa;N({target:"String",proto:!0,forced:Xq},{padStart:function(e){return rB(this,e,1<arguments.length?arguments[1]:void 0)}}),function(e){e.CN="CN",e.NA="NA",e.EU="EU",e.AS="AS",e.JP="JP",e.IN="IN",e.GLOBAL="GLOBAL",e.OC="OC",e.SA="SA",e.AF="AF",e.OVS="OVS"}(Oa||(Oa={}));var Yf=Ja({AS:{CODE:Oa.AS,AP_DOMAINS:["ap-web-1-asia.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-asia.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-asia.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-asia.agora.io"],LOG_UPLOAD_SERVER:["logservice-asia.agora.io"]},NA:{CODE:Oa.NA,AP_DOMAINS:["ap-web-1-north-america.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-north-america.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-north-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-north-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-north-america.agora.io"]},EU:{CODE:Oa.EU,AP_DOMAINS:["ap-web-1-europe.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-europe.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-europe.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-europe.agora.io"],LOG_UPLOAD_SERVER:["logservice-europe.agora.io"]},JP:{CODE:Oa.JP,AP_DOMAINS:["ap-web-1-japan.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-japan.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-japan.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-japan.agora.io"],LOG_UPLOAD_SERVER:["logservice-japan.agora.io"]},IN:{CODE:Oa.IN,AP_DOMAINS:["ap-web-1-india.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-india.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-india.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-india.agora.io"],LOG_UPLOAD_SERVER:["logservice-india.agora.io"]},OVS:{CODE:Oa.OVS,AP_DOMAINS:["ap-web-1-oversea.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-oversea.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oversea.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oversea.agora.io"],LOG_UPLOAD_SERVER:["logservice-oversea.agora.io"]},GLOB:{CODE:Oa.GLOBAL,AP_DOMAINS:["ap-web-1.agora.io","ap-web-2.agora.io"],AP_BACKUP_DOMAINS:["ap-web-3.agora.io","ap-web-4.agora.io"],EVENT_REPORT_DOMAIN:["webcollector-rtm.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["webcollector-1.agora.io"],LOG_UPLOAD_SERVER:["logservice-rtm.agora.io"]},OC:{CODE:Oa.OC,AP_DOMAINS:["ap-web-1-oceania.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-oceania.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-oceania.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-oceania.agora.io"],LOG_UPLOAD_SERVER:["logservice-oceania.agora.io"]},SA:{CODE:Oa.SA,AP_DOMAINS:["ap-web-1-south-america.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-south-america.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-south-america.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-south-america.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-america.agora.io"]},AF:{CODE:Oa.AF,AP_DOMAINS:["ap-web-1-africa.agora.io"],AP_BACKUP_DOMAINS:["ap-web-2-africa.agora.io"],EVENT_REPORT_DOMAIN:["statscollector-1-africa.agora.io"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-2-africa.agora.io"],LOG_UPLOAD_SERVER:["logservice-south-africa.agora.io"]}},{CN:{CODE:Oa.CN,AP_DOMAINS:["ap-web-1.agoraio.cn","ap-web-2.agoraio.cn"],AP_BACKUP_DOMAINS:["ap-web-3.agoraio.cn","ap-web-4.agoraio.cn"],EVENT_REPORT_DOMAIN:["webcollector-rtm.agoraio.cn"],EVENT_REPORT_BACKUP_DOMAIN:["statscollector-4.agoraio.cn"],LOG_UPLOAD_SERVER:["logservice-rtm.agoraio.cn"]}});Yf=zm(Yf);var fC=function(e){var t=new Set;if(0===(e=e.map((function(e){var n=Yf[e];if(void 0===n)throw new Da("invalid area key");return e=n.CODE,n=Se(n,["CODE"]),t.add(e),n}))).length)throw new Da("areas cannot be empty");return Ja({CODES:t},e.reduce((function(e,t){for(var n=0,r=dr(e);n<r.length;n++){var i=pa(r[n],2),o=i[0];i=i[1],e[o]=Array.from(new Set([].concat(I(t[o]),I(i))))}return e})))},gC={INVALID_APP_ID:"Illegal App ID",NO_AUTHORIZED:"Signature verification failed",TOKEN_TIMEOUT:"Dynamic key expired",INVALID_TOKEN_UID:"UID in the security key(token) is not valid",APP_ID_NO_ACTIVATED:"The vendor is not activated",DYNAMIC_KEY_NOT_ENABLED:"The vendor did not enable the dynamic key, but uses the dynamic key",DYNAMIC_ENABLED_BUT_STATIC_KEY:"The vendor enabled the dynamic key, but uses the static key",TOKEN_EXPIRED:"The token has expired",INVALID_USER_ID:"The user ID to login does not match the token",FORBIDDEN_REGION:"Forbidden to access the request in this area",CANNOT_MEET_AREA_DEMAND:"Cannot allocate to meet the requirements of the given area limit"},pr={5:"INVALID_APP_ID",7:"INVALID_USER_ID",9:"NO_AUTHORIZED",10:"TOKEN_TIMEOUT",11:"APP_ID_NO_ACTIVATED",12:"INVALID_TOKEN_UID",13:"TOKEN_EXPIRED",14:"DYNAMIC_KEY_NOT_ENABLED",15:"DYNAMIC_ENABLED_BUT_STATIC_KEY",18:"FORBIDDEN_REGION",19:"CANNOT_MEET_AREA_DEMAND"},hC=[100,101,102],qr=function(e){function t(e,i){var o=2<arguments.length&&void 0!==arguments[2]&&arguments[2];W(this,t);var s=r.call(this,i,"AccessPoint");m(n(s),"getApEdgeInfo$",void 0),m(n(s),"getApEdgeInfoEndFirst$",void 0),m(n(s),"apFinish$",new La),m(n(s),"usedUrl",[]),m(n(s),"failedAreas",new Set),m(n(s),"cnDomainUsed",!1),m(n(s),"backupCnDomainUsed",!1),m(n(s),"genUrl",(function(){return void 0===s.context.areaConfig?Zh(bC,cC).pipe($h((function(e){return mb.apply(void 0,I(e))}))):mb.apply(void 0,I(s.context.areaConfig.AP_DOMAINS.map(Ne)))})),m(n(s),"genBackupUrl",(function(){return void 0===s.context.areaConfig?Zh(dC,eC).pipe($h((function(e){return mb.apply(void 0,I(e))}))):mb.apply(void 0,I(s.context.areaConfig.AP_BACKUP_DOMAINS.map(Ne)))})),m(n(s),"getUrl$",(function(e){return s.genUrl().pipe(nb((function(e){return(!s.cnDomainUsed||!e.includes("agoraio.cn"))&&(e.includes("agoraio.cn")&&(s.cnDomainUsed=!0),!Mk(s.usedUrl,(function(t){return e[15]===t})))})),Y((function(e){void 0===s.context.areaConfig&&s.usedUrl.push(e[15])})),Pa(e?dd.RECONNECTING_AP_NUM:2),rd((function(){return t.runOutOfUrlSymbol})),Ga((function(e,n){return s.cnDomainUsed=!1,e===t.runOutOfUrlSymbol?(s.usedUrl=[],n):ba(e)})))})),m(n(s),"getBackupUrl$",(function(e){return s.genBackupUrl().pipe(nb((function(e){return(!s.backupCnDomainUsed||!e.includes("agoraio.cn"))&&(e.includes("agoraio.cn")&&(s.backupCnDomainUsed=!0),!Mk(s.usedUrl,(function(t){return e[15]===t})))})),Y((function(e){void 0===s.context.areaConfig&&s.usedUrl.push(e[15])})),Pa(e?dd.RECONNECTING_AP_NUM:2),rd((function(){return t.runOutOfUrlSymbol})),Ga((function(e,n){return s.backupCnDomainUsed=!1,e===t.runOutOfUrlSymbol?(s.usedUrl=[],n):ba(e)})))})),m(n(s),"context",void 0),m(n(s),"fetchAp",(function(e,t){var n=pm("AP-",s.loggerId);s.log("The AccessPoint requests %s(%s)",e,n);var r=new AbortController;return s.apFinish$.pipe(Pa(1)).subscribe((function(){return r.abort()})),qd(K(w.mark((function i(){var o;return w.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o=mi(0,Number.MAX_SAFE_INTEGER),s.log("The %s request uid param is %d",n,o),i.abrupt("return",gf(e,{headers:{"X-Packet-Service-Type":"0","X-Packet-URI":"69","Content-Type":"application/json"},body:{flag:128,opid:1,key:t||s.context.key,cname:s.context.uid,detail:Ja({},void 0===s.context.areaConfig?{11:"GLOBAL"}:{11:I(s.context.areaConfig.CODES).join(",")}),uid:o,sid:s.context.sid},signal:r.signal}));case 3:case"end":return i.stop()}}),i)})))).pipe(Ga((function(t){return"AbortError"!==t.name&&(s.logError(t),s.warn("The AP server %s request failure",e)),dc})),eb(function(){var t=K(w.mark((function t(r){var i,o,a,u,c,l,f,h,p,d,v,b,g,y,E,m,_,O,k,A,T,R,N;return w.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=r.responseText,o=JSON.parse(i),s.log("The %s response is %o",n,o),u=(a=o).code,c=a.addresses,l=a.detail,0===u){t.next=51;break}if(f=u,!(4<u.toString().length)){t.next=16;break}if(h=u.toString().padStart(8,"0"),p=parseInt(h.slice(0,4),10),d=parseInt(h.slice(4,8),10),201!==p){t.next=14;break}f=d,t.next=16;break;case 14:if(101!==p||hC.includes(d)){t.next=16;break}return t.abrupt("return",ba(Error("service is currently unavailable")));case 16:if(v=f.toString(),Object.keys(pr).includes(v)){t.next=22;break}return(b=new ca(["Login is rejected by the server. The response code is %d",u],sh)).serverCode=f,t.abrupt("return",ba(b));case 22:g=pr[v],y=gC[g],t.t0=g,t.next="INVALID_APP_ID"===t.t0||"APP_ID_NO_ACTIVATED"===t.t0?27:"INVALID_USER_ID"===t.t0?30:"TOKEN_EXPIRED"===t.t0||"TOKEN_TIMEOUT"===t.t0?33:"NO_AUTHORIZED"===t.t0||"INVALID_TOKEN_UID"===t.t0||"DYNAMIC_KEY_NOT_ENABLED"===t.t0||"DYNAMIC_ENABLED_BUT_STATIC_KEY"===t.t0?36:"CANNOT_MEET_AREA_DEMAND"===t.t0?39:"FORBIDDEN_REGION"===t.t0?47:50;break;case 27:return(E=new Ke(y,zq)).serverCode=u,t.abrupt("return",ba(E));case 30:return(m=new Ke(y,th)).serverCode=u,t.abrupt("return",ba(m));case 33:return(_=new Ke(y,uh)).serverCode=u,t.abrupt("return",ba(_));case 36:return(O=new Ke(y,Aq)).serverCode=u,t.abrupt("return",ba(O));case 39:e:{var w=e,S=Rk(Yf);w=tt(w);for(var C=0;C<S.length;C++){var x=Yf[S[C]];if(null!=x&&x.AP_DOMAINS.includes(w)||null!=x&&x.AP_BACKUP_DOMAINS.includes(w)){k=x.CODE===Oa.OVS?"".concat(Oa.AS,",").concat(Oa.EU,",").concat(Oa.AF,",").concat(Oa.NA,",").concat(Oa.SA,",").concat(Oa.OC):x.CODE;break e}}k="GLOBAL,CN"}if(s.failedAreas.add(k),A=void 0===s.context.areaConfig?2:s.context.areaConfig.CODES.size,s.failedAreas.size!==A){t.next=46;break}return(T=new L(y,sh)).serverCode=u,t.abrupt("return",ba(T));case 46:return t.abrupt("break",51);case 47:return(R=new ca(y,sh)).serverCode=u,t.abrupt("return",ba(R));case 50:return t.abrupt("return",ba(mm("ApResErrType",g)));case 51:return N=c,s.context.area=null==l?void 0:l[9],t.abrupt("return",mb.apply(void 0,I(N).concat([oh])));case 56:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),Wh(),nb((function(e){return void 0!==e&&"string"==typeof e.ip&&"string"==typeof e.ticket})))})),s.context=e;var a=0;return s.getApEdgeInfoEndFirst$=function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];return uc(0,e||o?dd.RECONNECTING_AP_INTERVAL:2e3).pipe(Pa(1),Y((function(){a+=1})),eb((function(){return 2>=a?s.getUrl$(e||o):s.getBackupUrl$(e||o)})),eb((function(e){return s.fetchAp(e)})),Za(1e4),Ga((function(e){return e instanceof pb&&s.warn("AP request timeout"),ba(e)})),Ul((function(e){return e.ip})),hg((function(){a=0,s.failedAreas.clear()})),ob(s.apFinish$))},s.getApEdgeInfo$=function(e){return uc(0,e||o?dd.RECONNECTING_AP_INTERVAL:2e3).pipe(Pa(4),Y((function(){a+=1})),eb((function(){return 2>=a?s.getUrl$(e||o):s.getBackupUrl$(e||o)})),eb((function(e){return s.fetchAp(e)})),Za(1e4),Ga((function(e){return e instanceof pb&&s.warn("AP request timeout"),ba(e)})),Ul((function(e){return e.ip})),hg((function(){a=0,s.failedAreas.clear()})),ob(s.apFinish$))},s}ka(t,e);var r=la(t);return t}(vb());m(qr,"runOutOfUrlSymbol",Symbol("AP urls are used up"));var rr=zh(),sr=function(e){function t(e,i,o){W(this,t);var s=r.call(this,i,"Connection");m(n(s),"apClient",void 0),m(n(s),"lastOpenSockets",[new ce(1),new ce(1)]),m(n(s),"curOpenSockets",[void 0,void 0]),m(n(s),"ipIterator",0),m(n(s),"firstEnv",.5<=Math.random()?1:0),m(n(s),"firstSocketOpener",void 0),m(n(s),"secondSocketOpener",void 0),m(n(s),"firstOpenKeeperSubject",new La),m(n(s),"secondOpenKeeperSubject",new La),m(n(s),"edgeInfoReplayed",void 0),m(n(s),"firstEnvOpenSocket",void 0),m(n(s),"firstOpenKeeperSub",void 0),m(n(s),"secondOpenKeeperSub",void 0),m(n(s),"context",void 0),m(n(s),"logger",void 0),s.context=e,s.logger=i,s.apClient=new qr(s.context,i),s.apClient.apFinish$.subscribe((function(){s.log("Ap client fetch finished")}));var a,u=[];return s.edgeInfoReplayed=s.apClient.getApEdgeInfo$(o).pipe(nb((function(e){return void 0!==e&&"string"==typeof e.ip&&"string"==typeof e.ticket})),rd((function(){return new rr({AP_NO_AVAILABLE_EDGE:"No available edge address to connect"})})),ae((function(e){return e.pipe(Y((function(e){if(wa(e))throw e})),Wc(o?Nd.getParameter("RECONNECTING_AP_INTERVAL"):750),ob(uc(7e3)))})),nb((function(e){return!Mk(u,e)})),Y((function(e){u.push(e),s.log("An edge info got %o",e)})),Y({error:function(e){s.emit("connectionInitFailure",e)}}),Yl()),s.firstEnvOpenSocket=s.edgeInfoReplayed.pipe(eb((function(e){if(void 0===e)return ba(Error("Invalid edge info"));var t=new Vk(e.ip,s.firstEnv,e.ticket,s.context,i,a);return s.firstEnv=1===s.firstEnv?0:1,t.on("connectionFailure",(function(){return s.onSocketConnectionFailure(t)})),a=!t.useCnDomain,t.open$.pipe(bf(t))})),Y((function(e){s.log("The websocket of ENV_%d opened to %s:%d",e.env,e.ip,Me[e.env]),s.curOpenSockets[e.env]=e,s.lastOpenSockets[e.env].next(e),s.firstEnv=e.env,s.openSecondSocket(e.env,e.ip,e.useCnDomain)})),Pa(1),be()),s.firstSocketOpener=s.firstEnvOpenSocket.pipe(eb((function(e){return e.open$.pipe(Y((function(){s.log("The websocket of first ENV_%d re-opened to %s:%d",e.env,e.ip,Me[e.env]),s.curOpenSockets[e.env]=e,s.lastOpenSockets[e.env].next(e)})))}))),e=s.firstOpenKeeperSubject.pipe(vc(Sc)),s.firstOpenKeeperSub=e.subscribe({error:s.logError}),s}ka(t,e);var r=la(t);return Ea(t,[{key:"initConnection",value:function(){this.firstOpenKeeperSubject.next(this.firstSocketOpener)}},{key:"closeSocket",value:function(e,t){if(![0,1].includes(e))throw new Ca({INVALID_ENV:"The env argument is not 0 or 1"});var n=e===this.firstEnv?this.firstOpenKeeperSub:this.secondOpenKeeperSub;this.firstOpenKeeperSub=void 0;var r=this.curOpenSockets[e];this.curOpenSockets[e]=void 0,r&&(r.isActiveClose=!0,setTimeout((function(){r.close()}),t)),void 0!==n&&setTimeout((function(){null==n||n.unsubscribe()}),t)}},{key:"waitClosing",value:function(e){var t=this;return e.isActiveClose=!0,e.open$.pipe(Os(),Ga((function(e){return e.message===Mq.normalClosureMessage?dc:ba(e)})),Za(5e3),Ga((function(n){return n instanceof pb?(t.warn("Force closing the ENV_%d connection",e.env),dc):ba(n)})))}},{key:"onSocketConnectionFailure",value:function(e){var t=[0,1].filter((function(t){return t!==e.env}))[0];(t=this.curOpenSockets[t])&&t.loggedIn?this.reopenSocketWithApRequest(e.env):this.emit("socketsFailure")}},{key:"openSecondSocket",value:function(e,t,n){var r=this,i=1===e?0:1;this.secondSocketOpener=this.edgeInfoReplayed.pipe(Xl((function(e,t){return[].concat(I(e),[t])}),[]),Z((function(e){return Kq(e,(function(e){return nm(t,e.ip)})).slice(-1)[0]})),Pa(1),eb((function(e){if(void 0===e)return ba(Error("Invalid edge info"));var t=new Vk(e.ip,i,e.ticket,r.context,r.logger,n);return t.on("connectionFailure",(function(){return r.onSocketConnectionFailure(t)})),t.open$.pipe(Y((function(){r.lastOpenSockets[i].next(t),r.curOpenSockets[i]=t})))})),be()),this.secondOpenKeeperSub=this.secondOpenKeeperSubject.pipe(vc(Sc)).subscribe({error:this.logError}),this.secondOpenKeeperSubject.next(this.secondSocketOpener)}},{key:"reopenSocketWithApRequest",value:function(e){var t=this,n=[0,1].filter((function(t){return t!==e}))[0];if(void 0!==(n=this.curOpenSockets[n])){var r,i=n.ip;n=this.apClient.getApEdgeInfoEndFirst$(!0).pipe(nb((function(e){return void 0!==e&&"string"==typeof e.ip&&"string"==typeof e.ticket})),rd((function(){return new rr({AP_NO_AVAILABLE_EDGE:"No available edge address to connect"})})),ae((function(e){return e.pipe(Y((function(e){if(e.code===uh)t.emit("tokenExpired"),t.apClient.apFinish$.next(void 0);else if(wa(e))throw e})),Wc(Nd.getParameter("RECONNECTING_AP_INTERVAL")),ob(uc(7e3)))})),Y((function(e){t.log("An edge info got %o",e)}))).pipe(Xl((function(e,t){return[].concat(I(e),[t])}),[]),Z((function(e){return(e=Kq(e,(function(e){return nm(i,e.ip)}))).length-1>=t.ipIterator?e.slice(-t.ipIterator++-1)[0]:(t.ipIterator=0,e.slice(-1)[0])})),rd(),eb((function(n){if(void 0===n)return ba(Error("Invalid edge info"));var i=new Vk(n.ip,e,n.ticket,t.context,t.logger,r);return i.on("connectionFailure",(function(){return t.onSocketConnectionFailure(i)})),r=!i.useCnDomain,i.open$.pipe(bf(i))})),Y((function(n){t.log("The websocket of ENV_%d re-opened to %s:%d using ap",n.env,n.ip,Me[n.env]),t.curOpenSockets[e]=n,t.lastOpenSockets[e].next(n)})),eb((function(n){return n.open$.pipe(Y((function(){t.log("The websocket of ENV_%d re-opened to %s:%d",n.env,n.ip,Me[n.env]),t.curOpenSockets[e]=n,t.lastOpenSockets[e].next(n)})))})),be()),e===this.firstEnv?this.firstOpenKeeperSubject.next(n):this.secondOpenKeeperSubject.next(n)}}}]),t}(vb()),Qc=bc.Writer,ma=bc.util,tc=bc.roots.default||(bc.roots.default={}),iC=tc.Session=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=ma.Long?ma.Long.fromBits(0,0,!1):0,e.prototype.elapse=ma.Long?ma.Long.fromBits(0,0,!1):0,e.prototype.appId="",e.prototype.ver="",e.prototype.buildno=0,e.prototype.installId="",e.prototype.os=0,e.prototype.did="",e.prototype.index=null,e.prototype.token="",e.prototype.version=0,e.prototype.subVersion=0,e.encode=function(e,t){return t||(t=Qc.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.appId&&Object.hasOwnProperty.call(e,"appId")&&t.uint32(42).string(e.appId),null!=e.ver&&Object.hasOwnProperty.call(e,"ver")&&t.uint32(50).string(e.ver),null!=e.buildno&&Object.hasOwnProperty.call(e,"buildno")&&t.uint32(56).int32(e.buildno),null!=e.installId&&Object.hasOwnProperty.call(e,"installId")&&t.uint32(66).string(e.installId),null!=e.os&&Object.hasOwnProperty.call(e,"os")&&t.uint32(128).int32(e.os),null!=e.did&&Object.hasOwnProperty.call(e,"did")&&t.uint32(138).string(e.did),null!=e.index&&Object.hasOwnProperty.call(e,"index")&&tc.Session.CommonIndex.encode(e.index,t.uint32(162).fork()).ldelim(),null!=e.token&&Object.hasOwnProperty.call(e,"token")&&t.uint32(170).string(e.token),null!=e.version&&Object.hasOwnProperty.call(e,"version")&&t.uint32(176).int32(e.version),null!=e.subVersion&&Object.hasOwnProperty.call(e,"subVersion")&&t.uint32(184).int32(e.subVersion),t},e.CommonIndex=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.index1="",e.prototype.index2="",e.prototype.index3="",e.encode=function(e,t){return t||(t=Qc.create()),null!=e.index1&&Object.hasOwnProperty.call(e,"index1")&&t.uint32(10).string(e.index1),null!=e.index2&&Object.hasOwnProperty.call(e,"index2")&&t.uint32(18).string(e.index2),null!=e.index3&&Object.hasOwnProperty.call(e,"index3")&&t.uint32(26).string(e.index3),t},e}(),e}(),jC=tc.Link=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=ma.Long?ma.Long.fromBits(0,0,!1):0,e.prototype.elapse=ma.Long?ma.Long.fromBits(0,0,!1):0,e.prototype.ec=0,e.prototype.sc=0,e.prototype.destServerIp="",e.prototype.ackedServerIp="",e.prototype.responseTime=0,e.encode=function(e,t){return t||(t=Qc.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.ec&&Object.hasOwnProperty.call(e,"ec")&&t.uint32(40).int32(e.ec),null!=e.sc&&Object.hasOwnProperty.call(e,"sc")&&t.uint32(48).int32(e.sc),null!=e.destServerIp&&Object.hasOwnProperty.call(e,"destServerIp")&&t.uint32(58).string(e.destServerIp),null!=e.ackedServerIp&&Object.hasOwnProperty.call(e,"ackedServerIp")&&t.uint32(66).string(e.ackedServerIp),null!=e.responseTime&&Object.hasOwnProperty.call(e,"responseTime")&&t.uint32(72).int32(e.responseTime),t},e}(),kC=tc.Logout=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=ma.Long?ma.Long.fromBits(0,0,!1):0,e.prototype.elapse=ma.Long?ma.Long.fromBits(0,0,!1):0,e.encode=function(e,t){return t||(t=Qc.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),t},e}(),lC=tc.KickedOff=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=ma.Long?ma.Long.fromBits(0,0,!1):0,e.prototype.elapse=ma.Long?ma.Long.fromBits(0,0,!1):0,e.prototype.linkId=0,e.prototype.code=0,e.prototype.server="",e.prototype.serverCode=0,e.encode=function(e,t){return t||(t=Qc.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.linkId&&Object.hasOwnProperty.call(e,"linkId")&&t.uint32(48).int32(e.linkId),null!=e.code&&Object.hasOwnProperty.call(e,"code")&&t.uint32(56).int32(e.code),null!=e.server&&Object.hasOwnProperty.call(e,"server")&&t.uint32(66).string(e.server),null!=e.serverCode&&Object.hasOwnProperty.call(e,"serverCode")&&t.uint32(72).int32(e.serverCode),t},e}(),mC=tc.ChnJoin=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=ma.Long?ma.Long.fromBits(0,0,!1):0,e.prototype.elapse=ma.Long?ma.Long.fromBits(0,0,!1):0,e.prototype.cname="",e.prototype.errCode=0,e.encode=function(e,t){return t||(t=Qc.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.cname&&Object.hasOwnProperty.call(e,"cname")&&t.uint32(50).string(e.cname),null!=e.errCode&&Object.hasOwnProperty.call(e,"errCode")&&t.uint32(56).int32(e.errCode),t},e}(),nC=tc.ChnJoinRes=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=ma.Long?ma.Long.fromBits(0,0,!1):0,e.prototype.elapse=ma.Long?ma.Long.fromBits(0,0,!1):0,e.prototype.cname="",e.prototype.errCode=0,e.prototype.serverErrCode=0,e.encode=function(e,t){return t||(t=Qc.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.cname&&Object.hasOwnProperty.call(e,"cname")&&t.uint32(50).string(e.cname),null!=e.errCode&&Object.hasOwnProperty.call(e,"errCode")&&t.uint32(56).int32(e.errCode),null!=e.serverErrCode&&Object.hasOwnProperty.call(e,"serverErrCode")&&t.uint32(64).int32(e.serverErrCode),t},e}(),oC=tc.ChnLeave=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=ma.Long?ma.Long.fromBits(0,0,!1):0,e.prototype.elapse=ma.Long?ma.Long.fromBits(0,0,!1):0,e.prototype.cname="",e.prototype.errCode=0,e.encode=function(e,t){return t||(t=Qc.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.cname&&Object.hasOwnProperty.call(e,"cname")&&t.uint32(50).string(e.cname),null!=e.errCode&&Object.hasOwnProperty.call(e,"errCode")&&t.uint32(56).int32(e.errCode),t},e}(),pC=tc.ConnectionStateChange=function(){function e(e){if(e)for(var t=Object.keys(e),n=0;n<t.length;++n)null!=e[t[n]]&&(this[t[n]]=e[t[n]])}return e.prototype.sid="",e.prototype.userId="",e.prototype.lts=ma.Long?ma.Long.fromBits(0,0,!1):0,e.prototype.elapse=ma.Long?ma.Long.fromBits(0,0,!1):0,e.prototype.oldState=0,e.prototype.newState=0,e.prototype.reason=0,e.prototype.reconnId=0,e.encode=function(e,t){return t||(t=Qc.create()),null!=e.sid&&Object.hasOwnProperty.call(e,"sid")&&t.uint32(10).string(e.sid),null!=e.userId&&Object.hasOwnProperty.call(e,"userId")&&t.uint32(18).string(e.userId),null!=e.lts&&Object.hasOwnProperty.call(e,"lts")&&t.uint32(24).int64(e.lts),null!=e.elapse&&Object.hasOwnProperty.call(e,"elapse")&&t.uint32(32).int64(e.elapse),null!=e.oldState&&Object.hasOwnProperty.call(e,"oldState")&&t.uint32(40).int32(e.oldState),null!=e.newState&&Object.hasOwnProperty.call(e,"newState")&&t.uint32(48).int32(e.newState),null!=e.reason&&Object.hasOwnProperty.call(e,"reason")&&t.uint32(56).int32(e.reason),null!=e.reconnId&&Object.hasOwnProperty.call(e,"reconnId")&&t.uint32(64).int32(e.reconnId),t},e}(),zt=Object.freeze({__proto__:null,Session:iC,Link:jC,Logout:kC,KickedOff:lC,ChnJoin:mC,ChnJoinRes:nC,ChnLeave:oC,ConnectionStateChange:pC,default:tc}),At=Object.freeze({__proto__:null,Counter:1,ApiExec:154,Session:164,ApEvent:165,Link:166,Logout:167,TxMessage:168,RxMessage:169,KickedOff:170,TxMessageRes:171,ChnJoin:172,ChnJoinRes:173,ChnLeave:174,ChnGetMembers:175,ChnGetMembersRes:176,ChnMemberJoined:177,ChnMemberLeft:178,QueryPeersOnlineStatus:179,QueryPeersOnlineStatusRes:180,RenewToken:181,OperateAttribute:186,OperateAttributeRes:187,ApRequest:188,LinkTcpEvent:189,LinkLoginRequest:190,ConnectionStateChange:191,default:{Counter:1,ApiExec:154,Session:164,ApEvent:165,Link:166,Logout:167,TxMessage:168,RxMessage:169,KickedOff:170,TxMessageRes:171,ChnJoin:172,ChnJoinRes:173,ChnLeave:174,ChnGetMembers:175,ChnGetMembersRes:176,ChnMemberJoined:177,ChnMemberLeft:178,QueryPeersOnlineStatus:179,QueryPeersOnlineStatusRes:180,RenewToken:181,OperateAttribute:186,OperateAttributeRes:187,ApRequest:188,LinkTcpEvent:189,LinkLoginRequest:190,ConnectionStateChange:191}}),qC=function(e){function t(e,i){return W(this,t),m(n(i=r.call(this,i,"Context")),"_token",void 0),m(n(i),"areaConfig",void 0),m(n(i),"_uid",void 0),m(n(i),"_sid",void 0),m(n(i),"_area",void 0),m(n(i),"appId",void 0),i.appId=e,i}ka(t,e);var r=la(t);return Ea(t,[{key:"token",set:function(e){this._token="string"==typeof e&&e?e:void 0}},{key:"uid",get:function(){if("string"==typeof this._uid&&this._uid)return this._uid;throw new Da("Cannot get illegal uid")},set:function(e){if(this.log("The user ID is set to %s",e),!ua(e))throw new Da;this._uid=e}},{key:"key",get:function(){if("string"==typeof this._token&&this._token)return this._token;if("string"==typeof this.appId&&this.appId)return this.appId;throw new Da("Cannot get illegal key")}},{key:"sid",get:function(){if("string"==typeof this._sid&&this._sid)return this._sid;throw new Da("Cannot get illegal sid")},set:function(e){if(this.log("sid is set to %s",e),"string"!=typeof e||!e)throw new Da;this._sid=e}},{key:"area",get:function(){if("string"==typeof this._area&&this._area)return this._area;throw new Da("Cannot get illegal area")},set:function(e){this.log("area is set to %s",e),"string"==typeof e&&e?this._area=e:this.warn("set area failed")}},{key:"setAreaConfig",value:function(e){if(0===e.CODES.size)throw new Da("Cannot set illegal areas");this.log("areas set to %s",I(e.CODES).join(", ")),this.areaConfig=e}}]),t}(vb()),rC=!!wc&&O((function(){wc.prototype.finally.call({then:function(){}},(function(){}))}));N({target:"Promise",proto:!0,real:!0,forced:rC},{finally:function(e){var t=Yc(this,Wb("Promise")),n="function"==typeof e;return this.then(n?function(n){return Hg(t,e()).then((function(){return n}))}:e,n?function(n){return Hg(t,e()).then((function(){throw n}))}:e)}}),"function"!=typeof wc||wc.prototype.finally||Va(wc.prototype,"finally",Wb("Promise").prototype.finally);var sC=function(){var e=K(w.mark((function e(t){return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Uint8Array,e.next=3,crypto.subtle.digest("SHA-256",t);case 3:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),tr=function(e){return Array.from(e).map((function(e){return e.toString(16).padStart(2,"0")})).join("")},tC=function(e){if("string"!=typeof e)throw new TypeError("Expected input to be a string");if(0!=e.length%2)throw new RangeError("Expected string to be an even number of characters");for(var t=new Uint8Array(e.length/2),n=0;n<e.length;n+=2)t[n/2]=parseInt(e.substring(n,n+2),16);return t},ur=function(e){return btoa(String.fromCharCode.apply(String,I(e))).replace(/={1,2}$/,"")},vr=function(){var e=K(w.mark((function e(t){var n;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,crypto.subtle.digest("SHA-1",t);case 3:n=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),n=sha1.arrayBuffer(t);case 9:return e.abrupt("return",ur(new Uint8Array(n)));case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),wr=function(e,t,n,r){r[t]=!0,n.has(e)?n.get(e).add(t):n.set(e,new Set([t]))},uC=function(e){switch(e){case"89504E47":return"image/png";case"47494638":return"image/gif";case"25504446":return"application/pdf";case"FFD8FFDB":case"FFD8FFE0":case"FFD8FFE1":return"image/jpeg";case"504B0304":return"application/zip";default:return"application/octet-stream"}},xr=function(e){function t(e,i,o,s){W(this,t);var a=r.call(this,o,"ChunkDownloadManager");if(m(n(a),"abortController",new AbortController),m(n(a),"downloadedSize",0),m(n(a),"successCount",0),m(n(a),"timer",void 0),m(n(a),"chunks",[]),m(n(a),"retUnit",void 0),m(n(a),"singleThread",!1),m(n(a),"initialized",!1),m(n(a),"ee",void 0),m(n(a),"chunkCount",void 0),m(n(a),"aborted",!1),m(n(a),"serverToIndices",new Map),m(n(a),"backupToIndices",new Map),m(n(a),"indexToBackupServers",[]),m(n(a),"busyBackupServers",new Map),m(n(a),"downloadingChunks",new Set),m(n(a),"metaInfo",void 0),m(n(a),"transHandler",void 0),a.metaInfo=e,a.transHandler=i,a.ee=void 0===s?new aa:s,o=e.size,e=e.unit,0===o)throw new Da("size cannot be 0");return void 0!==i.cancelSignal&&i.cancelSignal.addEventListener("abort",(function(){a.abortController.abort()}),{once:!0}),a.abortController.signal.addEventListener("abort",(function(){a.aborted=!0}),{once:!0}),a.chunkCount=Math.ceil(o/(32768*e)),a}ka(t,e);var r=la(t);return Ea(t,[{key:"setInfoByResponse",value:function(e){var t=this,n=e.serverList,r=e.backupList;if(e=e.unit,n.length<this.chunkCount&&r.length<this.chunkCount)throw new Da("servers is not enough");this.updateProgress(0),this.initialized=!0;var i=Array(this.chunkCount).fill(!1);if(n.forEach((function(e,n){return e.forEach((function(e){return wr(e,n,t.serverToIndices,i)}))})),r.forEach((function(e,n){return e.forEach((function(e){return wr(e,n,t.backupToIndices,i)}))})),i.some((function(){return!1})))throw new ca("Not enough servers to download",Xf);this.indexToBackupServers=r.map((function(e){return new Set(e)})),this.retUnit=e}},{key:"downloadChunks",value:function(){this.aborted?this.warn("downloadChunks after abort, ignored"):1===this.serverToIndices.size&&0===Array.from(this.serverToIndices.keys())[0]?this.serversDownload(this.backupToIndices):1<=this.serverToIndices.size?this.serversDownload(this.serverToIndices,!0):this.ee.emit("error",new ca("not enough servers to download",Xf))}},{key:"updateProgress",value:function(e){var t=this,n=this.downloadedSize+e;this.downloadedSize>this.metaInfo.size?(this.warn("Invalid download size, overflowed"),this.ee.emit("error",new Pc("Invalid download size",Xf))):(this.downloadedSize=n,void 0!==this.timer&&0!==e&&(clearTimeout(this.timer),this.timer=void 0),void 0===this.timer&&this.successCount!==this.chunkCount&&(this.timer=setTimeout((function(){t.ee.emit("timedOut"),t.abortController.abort()}),12e4)),this.initialized&&0===e||void 0===this.transHandler.onOperationProgress||this.transHandler.onOperationProgress({totalSize:this.metaInfo.size,currentSize:this.downloadedSize}))}},{key:"getPayload",value:function(){for(var e=0,t=0,n=this.chunks;t<n.length;t++)e+=n[t].byteLength;if(e!==this.metaInfo.size)throw new Da("invalid chunks total size");e=new Uint8Array(e),n=t=0;for(var r=this.chunks;n<r.length;n++){var i=r[n];e.set(new Uint8Array(i),t),t+=i.byteLength}return t=Array.from(e.subarray(0,4)).map((function(e){return e.toString(16)})).join("").toUpperCase(),ut(e.buffer,uC(t))}},{key:"getDownloadUrl",value:function(e){var t=this.metaInfo.isAreaCN?"agoraio.cn":"agora.io";return"https://".concat(ng(e).split(".").join("-"),".edge.").concat(t,":9601/api/v1/chuck/download")}},{key:"serversDownload",value:function(){var e=K(w.mark((function e(t){var n,r=this,i=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=1<i.length&&void 0!==i[1]&&i[1],e.next=3,Promise.all(Array.from(t.entries()).map((function(e){return e=pa(e,2),r.postDownloadRequest(e[0],Array.from(e[1]),n).catch((function(e){404===e.statusCode?(r.ee.emit("notExist"),r.abortController.abort()):"AbortError"!==e.name&&(Na(e)?r.singleThread?(r.abortController.abort(),r.ee.emit("timedOut")):(r.warn("%d download timed out after %d, retrying use single thread",e.index,r.singleThread?6e4:3e4),r.abortController.abort(),r.singleThread=!0,r.ee.emit("multiTimeOut")):(r.ee.emit("error",e),r.abortController.abort()))}))})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"postDownloadRequest",value:function(){var e=K(w.mark((function e(t,n,r){var i,o,s,a,u,c,l,f,h,p=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h=function(){return(h=K(w.mark((function e(o){var s,h,p,d,v,b,g,y,E;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,void 0!==o||0!==t){e.next=5;break}throw new Da("Invalid serverIp");case 5:s=void 0===o?l.getDownloadUrl(t):o;case 6:return l.downloadingChunks.add(i),e.next=9,c(s);case 9:return h=e.sent,p=h.responseData,l.downloadingChunks.delete(i),e.abrupt("return",p);case 15:if(e.prev=15,e.t0=e.catch(0),l.downloadingChunks.delete(i),n.unshift(i),l.metaInfo.isAreaCN=!1,"AbortError"!==e.t0.name){e.next=22;break}throw e.t0;case 22:if(!Na(e.t0)){e.next=25;break}throw e.t0.index=i,e.t0;case 25:if(d=a,a+=1,!(2>d)){e.next=30;break}return e.t0 instanceof Da||l.warn("%o, %d download failed, retrying",e.t0,i),e.abrupt("return",f());case 30:if(504!==e.t0.statusCode){e.next=34;break}throw(v=new bb("download server timed out",{originalError:e.t0,serverCode:504})).index=i,v;case 34:if(!r||2!==d||0===u[0]){e.next=45;break}return e.t0 instanceof Da||l.warn("%d download failed, using backup: %d, %o",i,u[0],e.t0),e.next=38,l.busyBackupServers.get(u[0]);case 38:return b=f(l.getDownloadUrl(u[0])),l.busyBackupServers.set(u[0],b),e.next=42,b;case 42:return g=e.sent,l.busyBackupServers.delete(u[0]),e.abrupt("return",g);case 45:if(!(r&&2<d&&void 0!==u[1]&&0!==u[1])){e.next=56;break}return l.warn("%d download failed, using backup 1: %d",i,u[1]),e.next=49,l.busyBackupServers.get(u[1]);case 49:return y=f(l.getDownloadUrl(u[1])),l.busyBackupServers.set(u[1],y),e.next=53,y;case 53:return E=e.sent,l.busyBackupServers.delete(u[1]),e.abrupt("return",E);case 56:throw e.t0.index=i,e.t0;case 58:case"end":return e.stop()}}),e,null,[[0,15]])})))).apply(this,arguments)},f=function(e){return h.apply(this,arguments)},!this.aborted){e.next=4;break}throw new Da("download already aborted");case 4:if(void 0!==(i=n.shift())){e.next=8;break}return this.log("%s download finished",t),e.abrupt("return");case 8:if(!(this.singleThread&&0<this.downloadingChunks.size)){e.next=10;break}return e.abrupt("return");case 10:if(!this.downloadingChunks.has(i)){e.next=13;break}return this.log("%s already downloading, return",i),e.abrupt("return");case 13:if(void 0===this.chunks[i]){e.next=19;break}return this.successCount===this.chunkCount&&(this.log("chunks all download"),this.ee.emit("finished")),this.log("%s already downloaded, do next",i),e.next=18,this.postDownloadRequest(t,n,r);case 18:return e.abrupt("return");case 19:return o=new FormData,s={hash:Bt(this.metaInfo.hashHexStr),unit:void 0===this.retUnit?this.metaInfo.unit:this.retUnit,instance:this.metaInfo.instance,loginOpt:this.metaInfo.loginOpt,ticket:this.metaInfo.ticket,index:i},o.append("parameter",JSON.stringify(s)),a=0,u=Array.from(this.indexToBackupServers[i]),c=function(e){return gf(e,{body:o,signal:p.abortController.signal,timeout:p.singleThread?12e4:3e4},{useBinaryResponse:!0})},l=this,e.next=28,f().then((function(e){return void 0!==p.chunks[i]?p.log("chunk %d download duplicated",i):(p.chunks[i]=e,p.log("chunk %d downloaded",i),p.successCount+=1,p.updateProgress(p.chunks[i].byteLength)),p.successCount===p.chunkCount&&(p.log("chunks all download"),p.ee.emit("finished")),p.singleThread?(p.downloadChunks(),Promise.resolve()):p.postDownloadRequest(t,n,r)}));case 28:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),t}(vb()),yr=function(e){function t(e,i,o,s){W(this,t);var a=r.call(this,o,"ChunkUploadManager");if(m(n(a),"chunkCount",0),m(n(a),"chunks",[]),m(n(a),"uploadedChunks",[]),m(n(a),"totalFailures",0),m(n(a),"timer",void 0),m(n(a),"initState","uninitialized"),m(n(a),"ee",void 0),m(n(a),"unit",0),m(n(a),"uploadedSize",0),m(n(a),"singleThread",!1),m(n(a),"abortController",new AbortController),m(n(a),"servers",[]),m(n(a),"aborted",!1),m(n(a),"metaInfo",void 0),m(n(a),"transHandler",void 0),a.metaInfo=e,a.transHandler=i,a.ee=void 0===s?new aa:s,0===e.file.length)throw new L("file not found or is empty",jf);return void 0!==i.cancelSignal&&i.cancelSignal.addEventListener("abort",(function(){a.abortController.abort()}),{once:!0}),a.abortController.signal.addEventListener("abort",(function(){a.aborted=!0}),{once:!0}),a}ka(t,e);var r=la(t);return Ea(t,[{key:"initChunks",value:function(){var e=K(w.mark((function e(t){var n,r,i,o,s,a=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("initialized"!==this.initState&&"initializing"!==this.initState){e.next=2;break}throw new Da("cannot re-initialize");case 2:for(this.initState="initializing",this.unit=t,n=this.sliceFile(t,this.metaInfo.file),this.chunkCount=n.length,r=[],i=function(e,t){var n=(e=pa(t[e],2))[0],i=e[1];e=vr(i).then((function(e){a.chunks[n]={payload:i,sha1:e,uploadedTo:void 0,index:n,processed:!1}})),r.push(e)},o=0,s=Array.from(n.entries());o<s.length;o++)i(o,s);return e.next=11,Promise.all(r);case 11:this.updateProgress(0),this.initState="initialized",this.log("upload chunks initialized");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"uploadToServers",value:function(){var e=this;if(!this.aborted){for(var t=this.chunks.filter((function(e){return!e.processed})),n=function(n){var r=t[n],i=e.servers.filter((function(e){return!e.isUploading})).sort((function(e,t){return e.successCount-t.successCount})).sort((function(e,t){return e.failureCount-t.failureCount}))[0];if(void 0===i||1<i.failureCount)return e.log("Upload server not available, waiting"),e.ee.emit("serverUsedUp"),tm(1e3).then((function(){e.totalFailures>2*e.chunkCount&&e.ee.emit("error"),e.totalFailures+=1,void 0!==i&&(i.failureCount=0),e.uploadToServers()})).catch((function(){})),"break";r.processed=!0,i.isUploading=!0,e.log("uploading chunk %d to server %s",r.index,ng(i.ip));var o=e.getUploadUrl(i.ip);return K(w.mark((function t(){var n;return w.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.postChunk(r.payload,o,r.index);case 3:n=e.chunks.findIndex((function(e){return e===r})),r.uploadedTo=i.ip,e.chunks.splice(n,1),e.uploadedChunks.push(r),i.successCount+=1,i.isUploading=!1,e.updateProgress(r.payload.byteLength),e.log("upload chunk %d successfully",r.index),t.next=31;break;case 13:if(t.prev=13,t.t0=t.catch(0),i.isUploading=!1,r.processed=!1,504!==t.t0.statusCode&&!Na(t.t0)){t.next=27;break}if(e.singleThread){t.next=24;break}return e.warn("%d upload timed out after %d, retrying use single thread",r.index,e.singleThread?12e4:3e4),e.abortController.abort(),e.singleThread=!0,e.ee.emit("multiTimeOut"),t.abrupt("return");case 24:return e.ee.emit("timedOut"),e.abortController.abort(),t.abrupt("return");case 27:return e.metaInfo.isAreaCN=!1,i.failureCount+=1,t.next=31,tm(1e3);case 31:e.uploadedChunks.length===e.chunkCount?(e.log("chunks uploaded"),e.ee.emit("finished")):(e.singleThread||1===e.chunks.filter((function(e){return!e.processed})).length)&&e.uploadToServers();case 32:case"end":return t.stop()}}),t,null,[[0,13]])})))(),e.singleThread?"break":void 0},r=0;r<t.length&&"break"!==n(r);r++);0===t.length&&this.uploadedChunks.length!==this.chunkCount&&this.log("%d chunks left uploading",this.chunkCount-this.uploadedChunks.length)}}},{key:"getUploadServerIPs",value:function(){var e=!0,t=[],n=this.uploadedChunks.sort((function(e,t){return e.index-t.index})),r=0;for(n=Array.from(n.values());r<n.length;r++){var i=n[r].uploadedTo;if(void 0===i){e=!1;break}t.push(i)}if(!e)throw new Da("some chunks not uploaded, cannot get upload server ips");return t}},{key:"addServers",value:function(e){var t=this;e.forEach((function(e){var n=t.servers.findIndex((function(t){return t.ip===e}));-1!==n?t.servers[n].failureCount=0:(t.log("server %s added",ng(e)),t.servers.push({successCount:0,isUploading:!1,ip:e,failureCount:0}))}))}},{key:"updateProgress",value:function(e){var t=this,n=void 0!==e?this.uploadedSize+e:this.metaInfo.file.length;n>this.metaInfo.file.length?(this.warn("Invalid upload size, overflowed"),this.ee.emit("error",new Pc("Invalid upload size",Wf))):(this.uploadedSize=n,void 0!==this.timer&&0!==e&&(clearTimeout(this.timer),this.timer=void 0),void 0===this.timer&&void 0!==e&&this.uploadedChunks.length!==this.chunkCount&&(this.timer=setTimeout((function(){t.ee.emit("timedOut"),t.abortController.abort()}),12e4)),"initialized"===this.initState&&0===e||void 0===this.transHandler.onOperationProgress||this.transHandler.onOperationProgress({totalSize:this.metaInfo.file.length,currentSize:this.uploadedSize}))}},{key:"sliceFile",value:function(e,t){var n=0,r=[],i=t.length;for(e*=32768;n<i;)r.push(t.slice(n,n+e)),n+=e;return this.log("chunks split into %d",r.length),r}},{key:"postChunk",value:function(){var e=K(w.mark((function e(t,n,r){var i,o,s,a,u,c,l,f;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.aborted){e.next=2;break}throw new Da("upload already aborted");case 2:if(void 0!==this.unit){e.next=4;break}throw new Da("unit is undefined");case 4:return i=this.metaInfo,o=i.ticket,s=i.instance,a=i.loginOpt,u=i.hashStr,e.t0=r,e.t1=u,e.next=9,vr(t);case 9:return e.t2=e.sent,e.t3=this.unit,e.t4=o,e.t5=s,e.t6=a,c={index:e.t0,hash:e.t1,sha1:e.t2,unit:e.t3,ticket:e.t4,instance:e.t5,loginOpt:e.t6},(l=new FormData).append("parameter",JSON.stringify(c)),l.append("payload",new Blob([t])),e.next=20,gf(n,{headers:{Accept:"application/json"},body:l,timeout:this.singleThread?12e4:3e4,signal:this.abortController.signal});case 20:if(f=e.sent,201===f.status){e.next=24;break}throw new ca("uploading chunk ".concat(r," failed"));case 24:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getUploadUrl",value:function(e){var t=this.metaInfo.isAreaCN?"agoraio.cn":"agora.io";return"https://".concat(ng(e).split(".").join("-"),".edge.").concat(t,":9601/api/v1/chuck/upload")}}]),t}(vb()),zr=function(e){function t(e){W(this,t);var i=r.call(this,e,"MediaTaskManager");return m(n(i),"isProcessing",!1),m(n(i),"authInfo",void 0),m(n(i),"taskFinishers",{}),m(n(i),"mediaTasks",new Map),m(n(i),"ongoingTask",void 0),i.on("connectionStateChanged",(function(e){if(e===S.ConnectionState.ABORTED||e===S.ConnectionState.DISCONNECTED){void 0!==i.ongoingTask&&i.cancelTask(i.ongoingTask),e=0;for(var t=Array.from(i.mediaTasks.entries());e<t.length;e++){var n=pa(t[e],2)[1];i.cancelTask(n)}i.mediaTasks.clear(),i.taskFinishers={}}else e===S.ConnectionState.RECONNECTING?void 0!==i.ongoingTask&&i.ongoingTask.manager.abortController.abort():e===S.ConnectionState.CONNECTED&&void 0!==i.ongoingTask&&i.ongoingTask.manager.ee.emit("reconnected")})),i}ka(t,e);var r=la(t);return Ea(t,[{key:"setAuthInfo",value:function(e){this.authInfo=e}},{key:"waitMediaTask",value:function(e){var t=this;return new Promise((function(n,r){t.taskFinishers[e]={resolve:n,reject:r},t.isProcessing||t.processMediaTask()})).finally((function(){void 0!==t.ongoingTask&&void 0!==t.ongoingTask.manager.timer&&clearTimeout(t.ongoingTask.manager.timer),delete t.taskFinishers[e],0!==t.mediaTasks.size?t.processMediaTask():t.isProcessing=!1}))}},{key:"addUploadTask",value:function(e,n,r,i){var o=e.file;if(e=e.hash,void 0===this.authInfo)throw new Da("session not found");if(this.mediaTasks.size>=t.MAX_PENDING_TASK_COUNT-1)throw new gb("Upload media failed, exceed max pending jobs",Wz);return i=new yr({hashStr:ur(e),file:o,ticket:this.authInfo.ticket,instance:this.authInfo.instance.toString(),loginOpt:this.authInfo.loginOpt.toString(),isAreaCN:this.authInfo.isAreaCN},i,this.logger),o=Id(),this.mediaTasks.set(o,{type:"UPLOAD",manager:i,hash:e,setter:r,fetcher:n,taskId:o}),o}},{key:"addDownloadTask",value:function(e,n,r){var i=e.hashHexStr,o=e.size,s=e.unit;if(e=e.zone,void 0===this.authInfo)throw new Da("session not found");if(this.mediaTasks.size>=t.MAX_PENDING_TASK_COUNT-1)throw new gb("Download media failed, exceed max pending jobs",$z);return r=new xr({hashHexStr:i,ticket:this.authInfo.ticket,isAreaCN:this.authInfo.isAreaCN,instance:this.authInfo.instance.toString(),loginOpt:this.authInfo.loginOpt.toString(),size:o,zone:e,unit:s},r,this.logger),i=Id(),this.mediaTasks.set(i,{type:"DOWNLOAD",manager:r,fetcher:n,taskId:i}),i}},{key:"doDownloadTaskImpl",value:function(){var e=K(w.mark((function e(t,n){var r,i,o,s,a,u,c,l,f=this,h=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=2<h.length&&void 0!==h[2]&&h[2],o=i=t.manager,r&&(i=new xr(o.metaInfo,o.transHandler,this.logger,o.ee)),s=t.fetcher,e.next=7,s();case 7:if(a=e.sent,u=a.serverList,c=a.backupList,l=a.unit,!r||l===o.retUnit){e.next=13;break}throw new ca("download unit is different, reject to continue",Xf);case 13:r&&(t.manager=i,i.downloadedSize=o.downloadedSize,i.successCount=o.successCount,i.timer=o.timer,i.chunks=o.chunks,i.initialized=o.initialized,i.singleThread=o.singleThread,i.updateProgress(0)),i.ee.once("reconnected",(function(){i.ee.removeAllListeners(),f.doDownloadTaskImpl(t,n,!0).catch((function(e){n.reject(e)}))})),i.ee.once("multiTimeOut",(function(){i.ee.removeAllListeners(),f.doDownloadTaskImpl(t,n,!0).catch((function(e){n.reject(e)}))})),i.ee.once("error",(function(e){i.ee.removeAllListeners(),n.reject(new ca(["download file file, index %d",e.index],{code:Xf,originalError:e}))})),i.ee.once("notExist",(function(){i.abortController.abort(),i.ee.removeAllListeners(),n.reject(new ca("download file not found",Zz))})),i.ee.once("timedOut",(function(){i.ee.removeAllListeners(),i.abortController.abort(),n.reject(new bb("download timed out",Yz))})),void 0!==i.transHandler.cancelSignal&&i.transHandler.cancelSignal.addEventListener("abort",(function(){n.reject(new Qk("Downloading canceled",Iq))}),{once:!0}),i.ee.once("finished",(function(){n.resolve({type:"DOWNLOAD",payload:i.getPayload()})})),i.setInfoByResponse({serverList:u,backupList:c,unit:l}),i.downloadChunks();case 23:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"doDownloadTask",value:function(e,t){var n=this,r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=e.taskId;return r||(this.mediaTasks.delete(i),this.ongoingTask=e),new Promise((function(i,o){n.doDownloadTaskImpl(e,t,r).then(i).catch(o)}))}},{key:"doUploadTaskImpl",value:function(){var e=K(w.mark((function e(t,n){var r,i,o,s,a,u,c,l,f,h=this,p=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=2<p.length&&void 0!==p[2]&&p[2],o=i=t.manager,r&&(i=new yr(o.metaInfo,o.transHandler,this.logger,o.ee)),s=t.fetcher,a=new La,c=new Promise((function(e,c){var l=s(),f=l.ret,h=l.err,p=l.timeout;l.fin.pipe(ob(a)).subscribe({next:function(e){n.resolve({type:"UPLOAD",retUnit:e.unit,zone:e.zone})},complete:function(){e({hasExist:!0}),a.next(),a.complete()}}),f.pipe(ob(a),eb(function(){var e=K(w.mark((function e(s){var a,c;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.servers,c=s.unit,r&&o.unit!==c?n.reject(new ca("upload unit is different, reject to continue",Wf)):r&&(t.manager=i,i.chunkCount=o.chunkCount,i.chunks=o.chunks,i.totalFailures=o.totalFailures,i.uploadedChunks=o.uploadedChunks,i.timer=o.timer,i.initState=o.initState,i.unit=o.unit,i.uploadedSize=o.uploadedSize,i.singleThread=o.singleThread,i.updateProgress(0)),i.addServers(a),"uninitialized"!==i.initState){e.next=7;break}return u=i.initChunks(c),e.next=7,u;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).subscribe({complete:function(){return e({hasExist:!1})},error:c}),l=function(t){"uninitialized"!==i.initState&&u?e(u.then((function(){return{hasExist:!1}}))):c(t)},h.pipe(ob(a)).subscribe({error:l}),p.pipe(ob(a)).subscribe({error:l})})),e.next=9,c;case 9:if(l=e.sent,!l.hasExist){e.next=15;break}return i.updateProgress(),this.log("file already exists, skipping upload"),e.abrupt("return");case 15:a.next(),a.complete(),this.log("chunks initialization promise resolved"),f=fb(i.ee,"serverUsedUp").pipe(at((function(){return i.chunkCount!==i.uploadedChunks.length})),dt(5e3,void 0,{leading:!1}),Vl((function(){return s().ret}))).subscribe((function(e){i.addServers(e.servers)})),i.ee.once("reconnected",(function(){i.ee.removeAllListeners(),h.doUploadTask(t,n,!0).catch((function(e){n.reject(e)}))})),i.ee.once("multiTimeOut",(function(){i.ee.removeAllListeners(),h.doUploadTask(t,n,!0).catch((function(e){n.reject(e)}))})),i.ee.once("timedOut",(function(){f.unsubscribe(),i.ee.removeAllListeners(),i.abortController.abort(),n.reject(new bb("upload timed out",vh))})),i.ee.once("error",(function(e){f.unsubscribe(),i.ee.removeAllListeners(),i.abortController.abort(),n.reject(e||new ca("upload error",Wf))})),void 0!==i.transHandler.cancelSignal&&i.transHandler.cancelSignal.addEventListener("abort",(function(){n.reject(new Qk("Uploading canceled",Hq))}),{once:!0}),i.ee.once("finished",K(w.mark((function e(){var r,o,s;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.unsubscribe(),e.next=3,t.setter(i.unit,i.getUploadServerIPs());case 3:r=e.sent,o=r.zone,s=r.unit,i.ee.removeAllListeners(),n.resolve({type:"UPLOAD",retUnit:s,zone:o});case 8:case"end":return e.stop()}}),e)})))),i.uploadToServers();case 26:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"doUploadTask",value:function(e,t){var n=this,r=2<arguments.length&&void 0!==arguments[2]&&arguments[2],i=e.taskId;return r||(this.mediaTasks.delete(i),this.ongoingTask=e),new Promise((function(i,o){n.doUploadTaskImpl(e,t,r).then(i).catch(o)}))}},{key:"processMediaTask",value:function(){var e=K(w.mark((function e(){var t,n,r;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.mediaTasks.size){e.next=2;break}throw Error("no upload tasks");case 2:if(this.isProcessing=!0,t=this.mediaTasks.keys().next().value,void 0!==(n=this.taskFinishers[t])){e.next=7;break}throw Error("top task not found");case 7:if(void 0!==(r=this.mediaTasks.get(t))){e.next=10;break}throw new Da("task invalid");case 10:if("UPLOAD"!==r.type){e.next=15;break}return e.next=13,this.doUploadTask(r,n).catch((function(e){r.manager.ee.removeAllListeners(),n.reject(e)}));case 13:e.next=18;break;case 15:if("DOWNLOAD"!==r.type){e.next=18;break}return e.next=18,this.doDownloadTask(r,n).catch((function(e){r.manager.ee.removeAllListeners(),n.reject(e)}));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelTask",value:function(e){var t="DOWNLOAD"===e.type?Iq:Hq;e.manager.ee.removeAllListeners(),e.manager.abortController.abort(),void 0!==this.taskFinishers[e.taskId]&&this.taskFinishers[e.taskId].reject(new Qk("User logged out or kicked off, media task canceled",t))}}]),t}(vb());m(zr,"MAX_PENDING_TASK_COUNT",9),Sn("of",(function(){for(var e=0,t=arguments.length,n=new(ve(this))(t);t>e;)n[e]=arguments[e++];return n}),ej);var Ar=1/0,vC=Math.max,Dt=function(e,t,n){var r=Object(e);if(!sd(e)){var i=Fe(t);e=Rc(e),t=function(e){return i(r[e],e,r)}}return-1<(t=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;if(null==n)n=0;else{var i=(n=n?(n=Pk(n))===Ar||n===-Ar?17976931348623157e292*(0>n?-1:1):n==n?n:0:0===n?n:0)%1;n=n==n?i?n-i:n:0}return 0>n&&(n=vC(r+n,0)),xp(e,Fe(t),n)}(e,t,n))?r[i?e[t]:t]:void 0},Ct=function(e,t){return e&&e.length?fk(e,void 0,"function"==typeof t?t:void 0):[]},Br=function(){function e(){W(this,e),m(this,"size",0),m(this,"fields",new Map)}return Ea(e,[{key:"define",value:function(e,t,n){if(this.size+=n,64<this.size)throw new RangeError("the struct over 64 bits is not supported");vg(t={val:0,isNumber:"number"===t,isBoolean:"boolean"===t,oneof:"number"===t||"boolean"===t?void 0:t,len:n}),this.fields.set(e,t)}},{key:"set",value:function(e,t){if(!(e=this.fields.get(e)))throw Error("field not found");var n=e.oneof;if(!U.isLong(t)&&"number"!=typeof t)if("boolean"==typeof t)t=t?1:0;else{if(void 0===n)throw Error("invalid field type");if(void 0===(t=n[t]))throw Error("field type not found")}vg(e,t),e.val=t}},{key:"toNumber",value:function(){for(var e=0,t=0,n=0,r=Array.from(this.fields);n<r.length;n++){var i=pa(r[n],2)[1],o=i.len;void 0!==(i=i.val)&&(e+=U.fromValue(i).shiftLeft(t).toNumber(),t+=o)}return e}},{key:"toLong",value:function(){for(var e=U.fromNumber(0,!0),t=0,n=0,r=Array.from(this.fields);n<r.length;n++){var i=pa(r[n],2)[1],o=i.len;void 0!==(i=i.val)&&(e=U.fromValue(i).shiftLeft(t).add(e),t+=o)}return e}},{key:"assert",value:function(e,t){function n(e){if(!U.isLong(e)&&"number"!=typeof e)if("boolean"==typeof e)e=e?1:0;else{if(void 0===i)throw Error("invalid field type");if(void 0===(e=i[e]))throw Error("field type not found")}return vg(r,e),ug(e,r.val)}var r=this.fields.get(e);if(!r)throw Error("field not found");var i=r.oneof;if(!Array.isArray(t))return n(t);if(1===t.length)return n(t[0]);if(t.every((function(e){return"string"==typeof e}))&&void 0!==i)return t.some((function(e){return n(e)}));throw Error("invalid valueTypes")}},{key:"from",value:function(e){e=U.fromValue(e);for(var t=0,n=0,r=Array.from(this.fields);n<r.length;n++){var i=pa(r[n],2)[1],o=i.len,s=U.fromNumber(Math.pow(2,o)-1,!0).shiftLeft(t);vg(i,s=e.and(s).shiftRightUnsigned(t)),i.val=s,t+=o}}},{key:"typeOf",value:function(e){if(void 0!==(e=this.fields.get(e))){var t=e.oneof;if(e=e.val,void 0!==t){var n=0;for(t=Object.entries(t);n<t.length;n++){var r=pa(t[n],2),i=r[0];if(ug(e,r[1]))return i}}}throw new TypeError("can only get type of oneof type")}}]),e}(),Cr=function(e){function t(e){W(this,t);var r=n.call(this);return r.define("Rejoin","boolean",1),r.define("Unused","number",31),r.define("Platform","number",8),r.define("Version","number",12),r.define("Subversion","number",12),r.set("Platform",7),r.set("Version",5),r.set("Subversion",301),r.set("Rejoin",e),r}ka(t,e);var n=la(t);return t}(Br),wC=Ja(Ja(Ja(Ja({},{PeerTextMessage:0,ChannelTextMessage:1,VendorTextMessage:2}),{PeerRawMessage:3,ChannelRawMessage:4,VendorRawMessage:5}),{PeerImageMessage:6,ChannelImageMessage:7,VendorImageMessage:8}),{PeerFileMessage:15,ChannelFileMessage:16,VendorFileMessage:17}),Dr={CallInvite:101,CallAccept:102,CallReject:103,CallCancel:104},xC=Ja(Ja({},wC),Dr),yC={Uncompressed:0,Zlib:1},Od=function(e){function t(e){W(this,t);var r=n.call(this);if(r.define("MessageType",xC,8),r.define("BroadcastJumps","number",2),r.define("ToCache","boolean",1),r.define("FromCache","boolean",1),r.define("CompressionMethod",yC,2),r.define("IterationNumber","number",4),r.define("BufferedMessage","boolean",1),r.define("ToArchive","boolean",1),r.define("FromArchive","boolean",1),"number"==typeof e||U.isLong(e))r.from(e);else if(void 0!==e){var i=0;for(e=dr(e);i<e.length;i++){var o=pa(e[i],2);r.set(o[0],o[1])}}return r}ka(t,e);var n=la(t);return Ea(t,[{key:"isTextMessage",value:function(){return this.assert("MessageType",["PeerTextMessage","ChannelTextMessage","VendorTextMessage"])}},{key:"isRawMessage",value:function(){return this.assert("MessageType",["ChannelRawMessage","PeerRawMessage","VendorRawMessage"])}},{key:"isRawPeerMessage",value:function(){return this.assert("MessageType","PeerRawMessage")}},{key:"isRawChannelMessage",value:function(){return this.assert("MessageType","ChannelRawMessage")}},{key:"isPeerTextMessage",value:function(){return this.assert("MessageType","PeerTextMessage")}},{key:"isChannelTextMessage",value:function(){return this.assert("MessageType","ChannelTextMessage")}},{key:"isInvitation",value:function(e){var t=this;return void 0!==e?this.assert("MessageType",e):Rk(Dr).some((function(e){return t.assert("MessageType",e)}))}},{key:"isFileMessage",value:function(){return this.assert("MessageType",["PeerFileMessage","ChannelFileMessage","VendorFileMessage"])}},{key:"isImageMessage",value:function(){return this.assert("MessageType",["PeerImageMessage","ChannelImageMessage","VendorImageMessage"])}},{key:"isPeerMessage",value:function(){return this.assert("MessageType",["PeerFileMessage","PeerTextMessage","PeerImageMessage","PeerRawMessage"])}},{key:"isZlibCompressed",value:function(){return this.assert("CompressionMethod","Zlib")}},{key:"isFromCache",value:function(){return this.assert("FromCache",!0)}},{key:"isBufferedMessage",value:function(){return this.assert("BufferedMessage",!0)}},{key:"getInvitationType",value:function(){if(!this.isInvitation())throw new TypeError("cannot get InvitationType of a normal message type");return this.typeOf("MessageType")}}]),t}(Br),zC=function(e){function t(e){return W(this,t),m(n(e=r.call(this,e,"ChatManager")),"dialogueLru",new px(void 0,{maxlen:1e4,ttl:1e4})),e}ka(t,e);var r=la(t);return Ea(t,[{key:"getChatInfo",value:function(e){var t=this.dialogueLru.get(e);if(this.dialogueLru.prune(),t){var n=t.dialogue,r={dialogue:n,sequence:t=t.sequence.add(1)};return this.dialogueLru.set(e,{dialogue:n,sequence:t}),r}return n={dialogue:lg(),sequence:U.fromNumber(1,!0)},this.dialogueLru.set(e,n),n}}]),t}(vb()),u={};"object"==("undefined"==typeof module?"undefined":R(module))&&(module.exports=u),u.parse=function(e,t){var n,r=u.bin.readUshort,i=u.bin.readUint,o={};for(n=(e=new Uint8Array(e)).length-4;101010256!=i(e,n);)n--;var s=r(e,n=n+4+4);r(e,n+=2),i(e,n+=2),n=i(e,n+=4);for(var a=0;a<s;a++){i(e,n),n+=4,n+=4,n+=4,i(e,n+=4);var c=i(e,n+=4),l=i(e,n+=4),f=r(e,n+=4),h=r(e,n+2),p=r(e,n+4);n+=6;var d=i(e,n+=8);n+=4,n+=f+h+p,u._readLocal(e,d,o,c,l,t)}return o},u._readLocal=function(e,t,n,r,i,o){var s=u.bin.readUshort,a=u.bin.readUint;a(e,t),s(e,t+=4),s(e,t+=2);var c=s(e,t+=2);a(e,t+=2),a(e,t+=4),a=s(e,t=t+4+8);var l=s(e,t+=2);if(t+=2,s=u.bin.readUTF8(e,t,a),t=t+a+l,o)n[s]={size:i,csize:r};else if(e=new Uint8Array(e.buffer,t),0==c)n[s]=new Uint8Array(e.buffer.slice(t,t+r));else{if(8!=c)throw"unknown compression method: "+c;t=new Uint8Array(i),u.inflateRaw(e,t),n[s]=t}},u.inflateRaw=function(e,t){return u.F.inflate(e,t)},u.inflate=function(e,t){return e[0],e[1],u.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-2),t)},u.deflate=function(e,t){null==t&&(t={level:6});var n=0,r=new Uint8Array(50+Math.floor(1.1*e.length));return r[n]=120,r[n+1]=156,n=u.F.deflateRaw(e,r,n+2,t.level),e=u.adler(e,0,e.length),r[n+0]=e>>>24&255,r[n+1]=e>>>16&255,r[n+2]=e>>>8&255,r[n+3]=e>>>0&255,new Uint8Array(r.buffer,0,n+4)},u.deflateRaw=function(e,t){null==t&&(t={level:6});var n=new Uint8Array(50+Math.floor(1.1*e.length)),r=u.F.deflateRaw(e,n,r,t.level);return new Uint8Array(n.buffer,0,r)},u.encode=function(e,t){null==t&&(t=!1);var n,r=0,i=u.bin.writeUint,o=u.bin.writeUshort,s={};for(n in e){var a=!u._noNeed(n)&&!t,c=e[n],l=u.crc.crc(c,0,c.length);s[n]={cpr:a,usize:c.length,crc:l,file:a?u.deflateRaw(c):c}}for(n in s)r+=s[n].file.length+30+46+2*u.bin.sizeUTF8(n);for(n in e=new Uint8Array(r+22),t=0,c=[],s)l=s[n],c.push(t),t=u._writeHeader(e,t,n,l,0);for(n in r=0,a=t,s)l=s[n],c.push(t),t=u._writeHeader(e,t,n,l,1,c[r++]);return s=t-a,i(e,t,101010256),o(e,t=t+4+4,r),o(e,t+=2,r),i(e,t+=2,s),i(e,t+4,a),e.buffer},u._noNeed=function(e){return e=e.split(".").pop().toLowerCase(),-1!="png,jpg,jpeg,zip".indexOf(e)},u._writeHeader=function(e,t,n,r,i,o){var s=u.bin.writeUint,a=u.bin.writeUshort,c=r.file;return s(e,t,0==i?67324752:33639248),t+=4,1==i&&(t+=2),a(e,t,20),a(e,t+=2,0),a(e,t+=2,r.cpr?8:0),s(e,t+=2,0),s(e,t+=4,r.crc),s(e,t+=4,c.length),s(e,t+=4,r.usize),a(e,t+=4,u.bin.sizeUTF8(n)),a(e,t+=2,0),t+=2,1==i&&(s(e,t=t+2+2+6,o),t+=4),t+=n=u.bin.writeUTF8(e,t,n),0==i&&(e.set(c,t),t+=c.length),t},u.crc={table:function(){for(var e=new Uint32Array(256),t=0;256>t;t++){for(var n=t,r=0;8>r;r++)n=1&n?3988292384^n>>>1:n>>>1;e[t]=n}return e}(),update:function(e,t,n,r){for(var i=0;i<r;i++)e=u.crc.table[255&(e^t[n+i])]^e>>>8;return e},crc:function(e,t,n){return 4294967295^u.crc.update(4294967295,e,t,n)}},u.adler=function(e,t,n){var r=1,i=0,o=t;for(t+=n;o<t;){for(n=Math.min(o+5552,t);o<n;)i+=r+=e[o++];r%=65521,i%=65521}return i<<16|r},u.bin={readUshort:function(e,t){return e[t]|e[t+1]<<8},writeUshort:function(e,t,n){e[t]=255&n,e[t+1]=n>>8&255},readUint:function(e,t){return 16777216*e[t+3]+(e[t+2]<<16|e[t+1]<<8|e[t])},writeUint:function(e,t,n){e[t]=255&n,e[t+1]=n>>8&255,e[t+2]=n>>16&255,e[t+3]=n>>24&255},readASCII:function(e,t,n){for(var r="",i=0;i<n;i++)r+=String.fromCharCode(e[t+i]);return r},writeASCII:function(e,t,n){for(var r=0;r<n.length;r++)e[t+r]=n.charCodeAt(r)},pad:function(e){return 2>e.length?"0"+e:e},readUTF8:function(e,t,n){for(var r,i="",o=0;o<n;o++)i+="%"+u.bin.pad(e[t+o].toString(16));try{r=decodeURIComponent(i)}catch(r){return u.bin.readASCII(e,t,n)}return r},writeUTF8:function(e,t,n){for(var r=n.length,i=0,o=0;o<r;o++){var s=n.charCodeAt(o);if(0==(4294967168&s))e[t+i]=s,i++;else if(0==(4294965248&s))e[t+i]=192|s>>6,e[t+i+1]=128|s>>0&63,i+=2;else if(0==(4294901760&s))e[t+i]=224|s>>12,e[t+i+1]=128|s>>6&63,e[t+i+2]=128|s>>0&63,i+=3;else{if(0!=(4292870144&s))throw"e";e[t+i]=240|s>>18,e[t+i+1]=128|s>>12&63,e[t+i+2]=128|s>>6&63,e[t+i+3]=128|s>>0&63,i+=4}}return i},sizeUTF8:function(e){for(var t=e.length,n=0,r=0;r<t;r++){var i=e.charCodeAt(r);if(0==(4294967168&i))n++;else if(0==(4294965248&i))n+=2;else if(0==(4294901760&i))n+=3;else{if(0!=(4292870144&i))throw"e";n+=4}}return n}},u.F={},u.F.deflateRaw=function(e,t,n,r){var i=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][r],o=u.F.U,s=u.F._goodIndex;u.F._hash;var a=u.F._putsE,c=0;n<<=3;var l=0,f=e.length;if(0==r){for(;c<f;){var h=Math.min(65535,f-c);a(t,n,c+h==f?1:0),n=u.F._copyExact(e,c,h,t,n+8),c+=h}return n>>>3}a=o.lits,r=o.strt;var p=o.prev,d=0,v=0,b=0,g=0,y=0;for(2<f&&(r[y=u.F._hash(e,0)]=0),c=0;c<f;c++){if(h=y,c+1<f-2){y=u.F._hash(e,c+1);var E=c+1&32767;p[E]=r[y],r[y]=E}if(l<=c){if((14e3<d||26697<v)&&100<f-c&&(l<c&&(a[d]=c-l,d+=2,l=c),n=u.F._writeBlock(c==f-1||l==f?1:0,a,d,g,e,b,c-b,t,n),d=v=g=0,b=c),E=0,c<f-2&&(E=u.F._bestMatch(e,c,p,h,Math.min(i[2],f-c),i[3])),0!=E){h=E>>>16,E&=65535;var m=s(h,o.of0);o.lhst[257+m]++;var w=s(E,o.df0);o.dhst[w]++,g+=o.exb[m]+o.dxb[w],a[d]=h<<23|c-l,a[d+1]=E<<16|m<<8|w,d+=2,l=c+h}else o.lhst[e[c]]++;v++}}for(b==c&&0!=e.length||(l<c&&(a[d]=c-l,d+=2),n=u.F._writeBlock(1,a,d,g,e,b,c-b,t,n));0!=(7&n);)n++;return n>>>3},u.F._bestMatch=function(e,t,n,r,i,o){var s=32767&t,a=n[s],c=s-a+32768&32767;if(a==s||r!=u.F._hash(e,t-c))return 0;for(var l=r=0,f=Math.min(32767,t);c<=f&&0!=--o&&a!=s;){if((0==r||e[t+r]==e[t+r-c])&&(s=u.F._howLong(e,t,c))>r){if(l=c,(r=s)>=i)break;c+2<s&&(s=c+2);for(var h=0,p=0;p<s-2;p++){var d=t-c+p+32768&32767,v=d-n[d]+32768&32767;v>h&&(h=v,a=d)}}c+=(s=a)-(a=n[s])+32768&32767}return r<<16|l},u.F._howLong=function(e,t,n){if(e[t]!=e[t-n]||e[t+1]!=e[t+1-n]||e[t+2]!=e[t+2-n])return 0;var r=t,i=Math.min(e.length,t+258);for(t+=3;t<i&&e[t]==e[t-n];)t++;return t-r},u.F._hash=function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<4)&65535},u.saved=0,u.F._writeBlock=function(e,t,n,r,i,o,s,a,c){var l=u.F.U,f=u.F._putsF,h=u.F._putsE;l.lhst[256]++;var p=u.F.getTrees(),d=p[0],v=p[1],b=p[2],g=p[3],y=p[4],E=p[5],m=p[6];p=p[7];var w=32+(0==(c+3&7)?0:8-(c+3&7))+(s<<3),_=r+u.F.contSize(l.fltree,l.lhst)+u.F.contSize(l.fdtree,l.dhst);r=r+u.F.contSize(l.ltree,l.lhst)+u.F.contSize(l.dtree,l.dhst),r+=14+3*E+u.F.contSize(l.itree,l.ihst)+(2*l.ihst[16]+3*l.ihst[17]+7*l.ihst[18]);for(var O=0;286>O;O++)l.lhst[O]=0;for(O=0;30>O;O++)l.dhst[O]=0;for(O=0;19>O;O++)l.ihst[O]=0;if(w=w<_&&w<r?0:_<r?1:2,f(a,c,e),f(a,c+1,w),c+=3,0==w){for(;0!=(7&c);)c++;c=u.F._copyExact(i,o,s,a,c)}else{if(1==w)var I=l.fltree,k=l.fdtree;if(2==w){for(u.F.makeCodes(l.ltree,d),u.F.revCodes(l.ltree,d),u.F.makeCodes(l.dtree,v),u.F.revCodes(l.dtree,v),u.F.makeCodes(l.itree,b),u.F.revCodes(l.itree,b),I=l.ltree,k=l.dtree,h(a,c,g-257),h(a,c+=5,y-1),h(a,c+=5,E-4),c+=4,e=0;e<E;e++)h(a,c+3*e,l.itree[1+(l.ordr[e]<<1)]);c=u.F._codeTiny(m,l.itree,a,c+3*E),c=u.F._codeTiny(p,l.itree,a,c)}for(E=0;E<n;E+=2){for(m=(e=t[E])>>>23,e=o+(8388607&e);o<e;)c=u.F._writeLit(i[o++],I,a,c);0!=m&&(e=(d=t[E+1])>>16,s=d>>8&255,d&=255,h(a,c=u.F._writeLit(257+s,I,a,c),m-l.of0[s]),c+=l.exb[s],f(a,c=u.F._writeLit(d,k,a,c),e-l.df0[d]),c+=l.dxb[d],o+=m)}c=u.F._writeLit(256,I,a,c)}return c},u.F._copyExact=function(e,t,n,r,i){var o=i>>>3;return r[o]=n,r[o+1]=n>>>8,r[o+2]=255-r[o],r[o+3]=255-r[o+1],o+=4,r.set(new Uint8Array(e.buffer,t,n),o),i+(n+4<<3)},u.F.getTrees=function(){for(var e=u.F.U,t=u.F._hufTree(e.lhst,e.ltree,15),n=u.F._hufTree(e.dhst,e.dtree,15),r=[],i=u.F._lenCodes(e.ltree,r),o=[],s=u.F._lenCodes(e.dtree,o),a=0;a<r.length;a+=2)e.ihst[r[a]]++;for(a=0;a<o.length;a+=2)e.ihst[o[a]]++;a=u.F._hufTree(e.ihst,e.itree,7);for(var c=19;4<c&&0==e.itree[1+(e.ordr[c-1]<<1)];)c--;return[t,n,a,i,s,c,r,o]},u.F.getSecond=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(e[n+1]);return t},u.F.nonZero=function(e){for(var t="",n=0;n<e.length;n+=2)0!=e[n+1]&&(t+=(n>>1)+",");return t},u.F.contSize=function(e,t){for(var n=0,r=0;r<t.length;r++)n+=t[r]*e[1+(r<<1)];return n},u.F._codeTiny=function(e,t,n,r){for(var i=0;i<e.length;i+=2){var o=e[i],s=e[i+1];r=u.F._writeLit(o,t,n,r);var a=16==o?2:17==o?3:7;15<o&&(u.F._putsE(n,r,s,a),r+=a)}return r},u.F._lenCodes=function(e,t){for(var n=e.length;2!=n&&0==e[n-1];)n-=2;for(var r=0;r<n;r+=2){var i=e[r+1],o=r+3<n?e[r+3]:-1,s=r+5<n?e[r+5]:-1,a=0==r?-1:e[r-1];if(0==i&&o==i&&s==i){for(o=r+5;o+2<n&&e[o+2]==i;)o+=2;11>(i=Math.min(o+1-r>>>1,138))?t.push(17,i-3):t.push(18,i-11),r+=2*i-2}else if(i==a&&o==i&&s==i){for(o=r+5;o+2<n&&e[o+2]==i;)o+=2;i=Math.min(o+1-r>>>1,6),t.push(16,i-3),r+=2*i-2}else t.push(i,0)}return n>>>1},u.F._hufTree=function(e,t,n){var r=[],i=e.length,o=t.length,s=0;for(s=0;s<o;s+=2)t[s]=0,t[s+1]=0;for(s=0;s<i;s++)0!=e[s]&&r.push({lit:s,f:e[s]});if(e=r.length,i=r.slice(0),0==e)return 0;if(1==e)return t[1+((n=r[0].lit)<<1)]=1,t[1+((0==n?1:0)<<1)]=1;r.sort((function(e,t){return e.f-t.f})),s=r[0],o=r[1];var a=0,c=1,l=2;for(r[0]={lit:-1,f:s.f+o.f,l:s,r:o,d:0};c!=e-1;)s=a!=c&&(l==e||r[a].f<r[l].f)?r[a++]:r[l++],o=a!=c&&(l==e||r[a].f<r[l].f)?r[a++]:r[l++],r[c++]={lit:-1,f:s.f+o.f,l:s,r:o};for((r=u.F.setDepth(r[c-1],0))>n&&(u.F.restrictDepth(i,n,r),r=n),s=0;s<e;s++)t[1+(i[s].lit<<1)]=i[s].d;return r},u.F.setDepth=function(e,t){return-1!=e.lit?e.d=t:Math.max(u.F.setDepth(e.l,t+1),u.F.setDepth(e.r,t+1))},u.F.restrictDepth=function(e,t,n){var r=0,i=1<<n-t,o=0;for(e.sort((function(e,t){return t.d==e.d?e.f-t.f:t.d-e.d})),r=0;r<e.length&&e[r].d>t;r++){var s=e[r].d;e[r].d=t,o+=i-(1<<n-s)}for(o>>>=n-t;0<o;)(s=e[r].d)<t?(e[r].d++,o-=1<<t-s-1):r++;for(;0<=r;r--)e[r].d==t&&0>o&&(e[r].d--,o++);0!=o&&console.log("debt left")},u.F._goodIndex=function(e,t){var n=0;return t[16|n]<=e&&(n|=16),t[8|n]<=e&&(n|=8),t[4|n]<=e&&(n|=4),t[2|n]<=e&&(n|=2),t[1|n]<=e&&(n|=1),n},u.F._writeLit=function(e,t,n,r){return u.F._putsF(n,r,t[e<<1]),r+t[1+(e<<1)]},u.F.inflate=function(e,t){var n=Uint8Array;if(3==e[0]&&0==e[1])return t||new n(0);var r=u.F,i=r._bitsF,o=r._bitsE,s=r._decodeTiny,a=r.makeCodes,c=r.codes2map,l=r._get17,f=r.U,h=null==t;h&&(t=new n(e.length>>>2<<3));for(var p,d,v,b,g=0,y=0,E=d=0,m=0;0==g;)if(g=i(e,m,1),p=i(e,m+1,2),m+=3,0==p)0!=(7&m)&&(m+=8-(7&m)),p=e[(m=4+(m>>>3))-4]|e[m-3]<<8,h&&(t=u.F._check(t,E+p)),t.set(new n(e.buffer,e.byteOffset+m,p),E),m=m+p<<3,E+=p;else{if(h&&(t=u.F._check(t,E+131072)),1==p&&(v=f.flmap,b=f.fdmap,y=511,d=31),2==p){for(d=o(e,m,5)+257,p=o(e,m+5,5)+1,v=o(e,m+10,4)+4,m+=14,b=0;38>b;b+=2)f.itree[b]=0,f.itree[b+1]=0;for(y=1,b=0;b<v;b++){var w=o(e,m+3*b,3);f.itree[1+(f.ordr[b]<<1)]=w,w>y&&(y=w)}m+=3*v,a(f.itree,y),c(f.itree,y,f.imap),v=f.lmap,b=f.dmap,m=s(f.imap,(1<<y)-1,d+p,e,m,f.ttree),y=(1<<(w=r._copyOut(f.ttree,0,d,f.ltree)))-1,d=(1<<(p=r._copyOut(f.ttree,d,p,f.dtree)))-1,a(f.ltree,w),c(f.ltree,w,v),a(f.dtree,p),c(f.dtree,p,b)}for(;;)if(m+=15&(p=v[l(e,m)&y]),0==(w=p>>>4)>>>8)t[E++]=w;else{if(256==w)break;p=E+w-254,264<w&&(p=E+((w=f.ldef[w-257])>>>3)+o(e,m,7&w),m+=7&w),m+=15&(w=b[l(e,m)&d]);var _=((w=f.ddef[w>>>4])>>>4)+i(e,m,15&w);for(m+=15&w,h&&(t=u.F._check(t,E+131072));E<p;)t[E]=t[E++-_],t[E]=t[E++-_],t[E]=t[E++-_],t[E]=t[E++-_];E=p}}return t.length==E?t:t.slice(0,E)},u.F._check=function(e,t){var n=e.length;return t<=n?e:((t=new Uint8Array(Math.max(n<<1,t))).set(e,0),t)},u.F._decodeTiny=function(e,t,n,r,i,o){for(var s=u.F._bitsE,a=u.F._get17,c=0;c<n;){var l=e[a(r,i)&t];i+=15&l;var f=l>>>4;if(15>=f)o[c]=f,c++;else{var h=l=0;for(16==f?(h=3+s(r,i,2),i+=2,l=o[c-1]):17==f?(h=3+s(r,i,3),i+=3):18==f&&(h=11+s(r,i,7),i+=7),f=c+h;c<f;)o[c]=l,c++}}return i},u.F._copyOut=function(e,t,n,r){for(var i=0,o=0,s=r.length>>>1;o<n;){var a=e[o+t];r[o<<1]=0,r[1+(o<<1)]=a,a>i&&(i=a),o++}for(;o<s;)r[o<<1]=0,r[1+(o<<1)]=0,o++;return i},u.F.makeCodes=function(e,t){var n,r,i=u.F.U,o=e.length,s=i.bl_count;for(n=0;n<=t;n++)s[n]=0;for(n=1;n<o;n+=2)s[e[n]]++;for(i=i.next_code,n=0,s[0]=0,r=1;r<=t;r++)n=n+s[r-1]<<1,i[r]=n;for(t=0;t<o;t+=2)0!=(s=e[t+1])&&(e[t]=i[s],i[s]++)},u.F.codes2map=function(e,t,n){for(var r=e.length,i=u.F.U.rev15,o=0;o<r;o+=2)if(0!=e[o+1]){var s=e[o+1],a=o>>1<<4|s,c=t-s;for(c=(s=e[o]<<c)+(1<<c);s!=c;)n[i[s]>>>15-t]=a,s++}},u.F.revCodes=function(e,t){for(var n=u.F.U.rev15,r=15-t,i=0;i<e.length;i+=2)e[i]=n[e[i]<<t-e[i+1]]>>>r},u.F._putsE=function(e,t,n){n<<=7&t,e[t>>>=3]|=n,e[t+1]|=n>>>8},u.F._putsF=function(e,t,n){n<<=7&t,e[t>>>=3]|=n,e[t+1]|=n>>>8,e[t+2]|=n>>>16},u.F._bitsE=function(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8)>>>(7&t)&(1<<n)-1},u.F._bitsF=function(e,t,n){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)&(1<<n)-1},u.F._get17=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16)>>>(7&t)},u.F._get25=function(e,t){return(e[t>>>3]|e[1+(t>>>3)]<<8|e[2+(t>>>3)]<<16|e[3+(t>>>3)]<<24)>>>(7&t)},u.F.U=function(){var e=Uint16Array,t=Uint32Array;return{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}}(),function(){function e(e,t,n){for(;0!=t--;)e.push(0,n)}for(var t=u.F.U,n=0;32768>n;n++){var r=n;r=(4278255360&(r=(4042322160&(r=(3435973836&(r=(2863311530&r)>>>1|(1431655765&r)<<1))>>>2|(858993459&r)<<2))>>>4|(252645135&r)<<4))>>>8|(16711935&r)<<8,t.rev15[n]=(r>>>16|r<<16)>>>17}for(n=0;32>n;n++)t.ldef[n]=t.of0[n]<<3|t.exb[n],t.ddef[n]=t.df0[n]<<4|t.dxb[n];e(t.fltree,144,8),e(t.fltree,112,9),e(t.fltree,24,7),e(t.fltree,8,8),u.F.makeCodes(t.fltree,9),u.F.codes2map(t.fltree,9,t.flmap),u.F.revCodes(t.fltree,9),e(t.fdtree,32,5),u.F.makeCodes(t.fdtree,5),u.F.codes2map(t.fdtree,5,t.fdmap),u.F.revCodes(t.fdtree,5),e(t.itree,19,0),e(t.ltree,286,0),e(t.dtree,30,0),e(t.ttree,320,0)}();var Wk=u.inflate,Er=u.deflate,Fr=function(e){function t(e,i,o,s){W(this,t);var a=r.call(this,s,"Session");return m(n(a),"chatManager",void 0),m(n(a),"joinedChannels",new Set),m(n(a),"msgDedupLru",new nc(void 0,{maxlen:200})),m(n(a),"startTime",Date.now()),m(n(a),"seq",U.fromNumber(1,!0)),m(n(a),"userJoinOptions",new Cr(!1)),m(n(a),"seqSentStatuses",[!1,!1]),m(n(a),"dialogueSequenceLru",new nc(void 0,{maxlen:1e4})),m(n(a),"loggedOut",!1),m(n(a),"messageSentTimes",[]),m(n(a),"curLoginSockets",[void 0,void 0]),m(n(a),"loginSocketSubs",[{channels:new Map,receivers:[]},{channels:new Map,receivers:[]}]),m(n(a),"lastLoginSockets",[new ce(1),new ce(1)]),m(n(a),"dialPendingMsgSubjectMaps",[new Map,new Map]),m(n(a),"context",void 0),m(n(a),"connection",void 0),m(n(a),"instanceId",void 0),m(n(a),"registerSocketsFailureListener",(function(){a.connection.once("socketsFailure",(function(){a.log("socketsFailure, creating a new connection"),qd((function(){return a.connection.removeAllListeners(),a.connection=new sr(a.context,a.logger,!0),a.loginHandler(6e3,!0)})).pipe(ae((function(e){return e.pipe(Wc(Nd.getParameter("RECONNECTING_AP_INTERVAL")))})),ob(a.connection.apClient.apFinish$)).subscribe((function(){a.log("new connection connected")}))})),0===a.connection.listenerCount("tokenExpired")&&a.connection.on("tokenExpired",(function(){a.emit("tokenExpired")}))})),a.context=e,a.connection=i,a.instanceId=o,a.chatManager=new zC(s),a.log("The instanceId is %s",a.instanceId.toString()),a}ka(t,e);var r=la(t);return Ea(t,[{key:"fetchFileUploadIndexGet",value:function(e){var n=e.hash,r=e.size;if(0===(e=this.getLoginSockets()).length)throw new H("Client is not logged in");var i=this.incGetSeq();return e.forEach((function(e){e.sendPacket("FileUploadIndexGet",{seq:i,hash:n,size:r})})),{ret:ya.apply(void 0,I(e.map((function(e){return e.fromReceived("FileUploadIndexRet").pipe(X((function(e){return i.eq(e.seq)})))})))),fin:ya.apply(void 0,I(e.map((function(e){return e.fromReceived("FileUploadIndexFin").pipe(X((function(e){return i.eq(e.seq)})))})))),err:Tb.apply(void 0,I(e.map((function(e){return e.fromReceived("FileUploadIndexErr").pipe(X((function(e){return i.eq(e.seq)})),Z((function(e){throw new ca(["The media message upload failure, code %d",e.code],Wf)})))})))),timeout:t.genTimeoutError(vh)}}},{key:"requestFileUploadIndexSet",value:function(e){var n=e.hash,r=e.unit,i=e.servers;if(0===(e=this.getLoginSockets()).length)throw new H("Client is not logged in");var o=this.incGetSeq();return e.forEach((function(e){e.sendPacket("FileUploadIndexSet",{seq:o,servers:i,hash:n,unit:r})})),ya.apply(void 0,[t.genTimeoutError(vh)].concat(I(e.map((function(e){return e.fromReceived("FileUploadIndexErr").pipe(X((function(e){return o.eq(e.seq)})),Z((function(e){throw new ca(["FileUploadIndexSet failure, code %d",e.code],Wf)})))}))),I(e.map((function(e){return e.fromReceived("FileUploadIndexFin").pipe(X((function(e){return o.eq(e.seq)})))})))))}},{key:"requestFileDownloadIndexGet",value:function(e){var n=e.size,r=e.zone,i=e.unit,o=e.hash,s=this.getLoginSockets();if(0===s.length)throw new H("Client is not logged in");var a=this.incGetSeq();return s.forEach((function(e){e.sendPacket("FileDownloadIndexGet",{seq:a,size:n,zone:r,unit:i,hash:o})})),e=ya.apply(void 0,I(s.map((function(e){return e.fromReceived("FileDownloadIndexRet").pipe(X((function(e){return a.eq(e.seq)})))})))).pipe(Z((function(e){var t=e.backups,n=e.servers;return e=Se(e,["backups","servers"]),Ja({backupList:t.map((function(e){return[e]})),serverList:n.map((function(e){return[e]}))},e)})),Wc(500)),s=Pl(s.map((function(e){return e.fromReceived("FileDownloadIndexRet").pipe(X((function(e){return a.eq(e.seq)})))}))),ya(e,s.pipe(Z((function(e){return e.reduce((function(e,t){var n=e.backupList,r=e.serverList;e=t.backups;var i=t.servers;return t=Se(t,["backups","servers"]),Ja({backupList:e.map((function(e,t){return[e].concat(I(void 0!==n&&Array.isArray(n[t])?n[t]:[]))})),serverList:i.map((function(e,t){return[e].concat(I(void 0!==n&&Array.isArray(r[t])?r[t]:[]))}))},t)}),{})}))),t.genTimeoutError(vh))}},{key:"loginHandler",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1e4,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];if(this.loggedOut&&n)throw new H("Already logged out, request ignored");n&&this.registerSocketsFailureListener(),this.connection.initConnection();var r=this.getSocketLoginObservables(this.connection.lastOpenSockets,this.seq),i=Date.now();return r.forEach((function(t,r){var o=e.loginSocketSubs[r].login;void 0!==o&&o.unsubscribe(),e.loginSocketSubs[r].login=t.pipe(Y((function(t){var o,s;e.curLoginSockets[r]=t;var a=Date.now();cb("Link",{ackedServerIp:t.address,destServerIp:t.ip,ec:0,sc:0,elapse:db(e.startTime),lts:U.fromNumber(a),responseTime:i-a,sid:Sa(e.instanceId),userId:e.context.uid},null===(o=e.context.areaConfig)||void 0===o?void 0:o.EVENT_REPORT_DOMAIN[0],null===(s=e.context.areaConfig)||void 0===s?void 0:s.EVENT_REPORT_BACKUP_DOMAIN[0]),e.emit("userJoined",t.env),n&&e.connection.apClient.apFinish$.next(void 0)}))).subscribe(e.lastLoginSockets[r])})),this.initKeepAliveSender(),this.initKeepAliveReconnector(),this.initLoginReceiver(),Tb.apply(void 0,I(r).concat([fb(this.connection,"connectionInitFailure").pipe(Y((function(e){if(wa(e)||Na(e))throw e;throw new ca("Login failure",{code:yq,originalError:e})})))])).pipe(Pa(1),Za(t),Ga((function(t){return t instanceof pb&&e.warn("Client login timeout"),t&&t.code===uh&&(e.connection.emit("tokenExpired"),e.connection.apClient.apFinish$.next(void 0)),e.clearSockets(0,n),ba(t)})),Y((function(){n||e.registerSocketsFailureListener()})),hg((function(){n||e.connection.apClient.apFinish$.next(void 0)})))}},{key:"logoutHandler",value:function(){var e=K(w.mark((function e(){var t,n,r,i=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.loggedOut=!0,this.connection.apClient.apFinish$.next(void 0),t=this.getLoginSockets(),n=t.map((function(e){return e.sendPacket("UserQuit",{}),i.connection.waitClosing(e)})),this.clearSockets(5e3),r=t.map((function(e){return e.env})),[0,1].filter((function(e){return!r.includes(e)})).forEach((function(e){i.connection.closeSocket(e,0)})),e.abrupt("return",Tb.apply(void 0,I(n)).toPromise());case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestChannelJoin",value:function(){var e=K(w.mark((function e(t,n){var r,i,o,s=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.getLoginSockets().length){e.next=2;break}throw new H("Client is not logged in. Cannot join the channel",uq);case 2:return r=fb(this,"channelLeft").pipe(nb((function(e){return e===t})),Pa(1)),i=this.incGetSeq(),(o=this.lastLoginSockets.map((function(e){return e.pipe(vc((function(e,t){0!==t&&s.incSeqIfNeeded(e.env);var r=0===t?i:s.seq;return e.sendPacket("GroupEnter",{account:n,seq:r}),e.fromReceived("GroupReply").pipe(X((function(e){return r.eq(e.seq)})),Y((function(e){if(0!==(e=e.code))throw new ca(["Channel join failure. The response code is %d",e],qq)})))})),ob(r),be())}))).forEach((function(e,n){var r=function(){return s.loginSocketSubs[n].channels.delete(t.channelId)};s.loginSocketSubs[n].channels.set(t.channelId,e.subscribe({error:r,complete:r}))})),e.next=8,Tb.apply(void 0,I(o)).pipe(Pa(1),Za(1e4),Ga((function(e){return e instanceof pb&&s.warn("Channel join timeout"),ba(e)}))).toPromise();case 8:this.joinedChannels.add(t);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"requestChannelLeave",value:function(e,t){this.emit("channelLeft",e),this.joinedChannels.delete(e),this.getLoginSockets().forEach((function(e){e.sendPacket("GroupLeave",{account:t})}))}},{key:"requestChannelMemberList",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new H("Client is not logged in. Cannot get the channel members",Bz);var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("GroupAllUsersList",{group:e,pageNumber:0,pageSize:200,seq:r})})),ya.apply(void 0,[t.genTimeoutError(oq)].concat(I(n.map((function(t){return t.fromReceived("GroupAllUsersResult").pipe(X((function(t){var n=t.seq;return t.group===e&&r.eq(n)})))})))))}},{key:"requestPeersOnlineStatus",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new H("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("UserStatusList",{users:e,seq:r})})),ya.apply(void 0,[t.genTimeoutError(Nz)].concat(I(n.map((function(e){return e.fromReceived("UserStatusResult").pipe(X((function(e){return r.eq(e.seq)})))})))))}},{key:"requestSetLocalUserAttributes",value:function(e,n){var r=this,i=this.getLoginSockets();if(0===i.length)throw new H("Client is not logged in");var o=this.incGetSeq();return i.forEach((function(t,i){void 0!==n&&i!==n||t.sendPacket("UserAttributeSet",{account:r.context.uid,attributeInfos:Object.entries(e).map((function(e){return{key:(e=pa(e,2))[0],value:e[1]}})),seq:o})})),ya.apply(void 0,I(i.map((function(e){return e.fromReceived("UserAttributeErr").pipe(X((function(e){return o.eq(e.seq)})),Z((function(e){throw new ca(["The user attributes set failure, code %d",e.code],Ob)})))}))).concat([t.genTimeoutError(Pb)],I(i.map((function(e){return e.fromReceived("UserAttributeRsp").pipe(X((function(e){return o.eq(e.seq)})))})))))}},{key:"requestSetChannelAttributes",value:function(e,n,r){var i=this.getLoginSockets();if(0===i.length)throw new H("Client is not logged in");var o=this.incGetSeq();return i.forEach((function(t){t.sendPacket("GroupAttributeSet",{broadcast:r,group:e,attributeInfos:Object.entries(n).map((function(e){return{key:(e=pa(e,2))[0],value:e[1]}})),seq:o})})),ya.apply(void 0,I(i.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(X((function(e){return o.eq(e.seq)})),Z((function(e){throw new ca(["The group attributes set failure, code %d",e.code],Ob)})))}))).concat([t.genTimeoutError(Pb)],I(i.map((function(e){return e.fromReceived("GroupAttributeRsp").pipe(X((function(e){return o.eq(e.seq)})))})))))}},{key:"requestAddOrUpdateLocalUserAttributes",value:function(e){var n=this,r=this.getLoginSockets();if(0===r.length)throw new H("Client is not logged in");var i=this.incGetSeq();return r.forEach((function(t){t.sendPacket("UserAttributeMod",{account:n.context.uid,attributeInfos:Object.entries(e).map((function(e){return{key:(e=pa(e,2))[0],value:e[1]}})),seq:i})})),ya.apply(void 0,I(r.map((function(e){return e.fromReceived("UserAttributeErr").pipe(X((function(e){return i.eq(e.seq)})),Z((function(e){throw new ca(["The user attributes add or update failure, code %d",e.code],Ob)})))}))).concat([t.genTimeoutError(Pb)],I(r.map((function(e){return e.fromReceived("UserAttributeRsp").pipe(X((function(e){return i.eq(e.seq)})))})))))}},{key:"requestAddOrUpdateChannelAttributes",value:function(e,n,r){var i=this.getLoginSockets();if(0===i.length)throw new H("Client is not logged in");var o=this.incGetSeq();return i.forEach((function(t){t.sendPacket("GroupAttributeMod",{broadcast:r,group:e,attributeInfos:Object.entries(n).map((function(e){return{key:(e=pa(e,2))[0],value:e[1]}})),seq:o})})),ya.apply(void 0,I(i.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(X((function(e){return o.eq(e.seq)})),Z((function(e){throw new ca(["The group attributes add or update failure, code %d",e.code],Ob)})))}))).concat([t.genTimeoutError(Pb)],I(i.map((function(e){return e.fromReceived("GroupAttributeRsp").pipe(X((function(e){return o.eq(e.seq)})))})))))}},{key:"requestDeleteLocalUserAttributesByKeys",value:function(e){var n=this,r=this.getLoginSockets();if(0===r.length)throw new H("Client is not logged in");var i=this.incGetSeq();return r.forEach((function(t){t.sendPacket("UserAttributeDel",{account:n.context.uid,attributes:e,seq:i})})),ya.apply(void 0,I(r.map((function(e){return e.fromReceived("UserAttributeErr").pipe(X((function(e){return i.eq(e.seq)})),Z((function(e){throw new ca(["The user attributes delete failure, code %d",e.code],Ob)})))}))).concat([t.genTimeoutError(Pb)],I(r.map((function(e){return e.fromReceived("UserAttributeRsp").pipe(X((function(e){return i.eq(e.seq)})))})))))}},{key:"requestDeleteChannelAttributesByKeys",value:function(e,n,r){var i=this.getLoginSockets();if(0===i.length)throw new H("Client is not logged in");var o=this.incGetSeq();return i.forEach((function(t){t.sendPacket("GroupAttributeDel",{group:e,broadcast:r,attributes:n,seq:o})})),ya.apply(void 0,I(i.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(X((function(e){return o.eq(e.seq)})),Z((function(e){throw new ca(["The channel attributes delete failure, code %d",e.code],Ob)})))}))).concat([t.genTimeoutError(Pb)],I(i.map((function(e){return e.fromReceived("GroupAttributeRsp").pipe(X((function(e){return o.eq(e.seq)})))})))))}},{key:"requestClearLocalUserAttributes",value:function(){var e=this,n=this.getLoginSockets();if(0===n.length)throw new H("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("UserAttributeSet",{account:e.context.uid,seq:r,attributeInfos:[]})})),ya.apply(void 0,I(n.map((function(e){return e.fromReceived("UserAttributeErr").pipe(X((function(e){return r.eq(e.seq)})),Z((function(e){throw new ca(["The user attributes clear failure, code %d",e.code],Ob)})))}))).concat([t.genTimeoutError(Pb)],I(n.map((function(e){return e.fromReceived("UserAttributeRsp").pipe(X((function(e){return r.eq(e.seq)})))})))))}},{key:"requestClearChannelAttributes",value:function(e,n){var r=this.getLoginSockets();if(0===r.length)throw new H("Client is not logged in");var i=this.incGetSeq();return r.forEach((function(t){t.sendPacket("GroupAttributeSet",{group:e,seq:i,attributeInfos:[],broadcast:n})})),ya.apply(void 0,I(r.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(X((function(e){return i.eq(e.seq)})),Z((function(e){throw new ca(["The channel attributes clear failure, code %d",e.code],Ob)})))}))).concat([t.genTimeoutError(Pb)],I(r.map((function(e){return e.fromReceived("GroupAttributeRsp").pipe(X((function(e){return i.eq(e.seq)})))})))))}},{key:"requestGetUserAttributesByKeys",value:function(e,n){var r=this.getLoginSockets();if(0===r.length)throw new H("Client is not logged in");var i=this.incGetSeq();return r.forEach((function(t){t.sendPacket("UserAttributeGet",{account:e,seq:i,attributes:n})})),ya.apply(void 0,[t.genTimeoutError(Pb)].concat(I(r.map((function(e){return e.fromReceived("UserAttributeErr").pipe(X((function(e){return i.eq(e.seq)})),Z((function(e){if(10008===(e=e.code))throw new ca("The user requested is not online",lq);throw new Pc(["User attribute operation unknown error code: %d",e],Ob)})))}))),I(r.map((function(e){return e.fromReceived("UserAttributeRet").pipe(X((function(e){return i.eq(e.seq)})))})))))}},{key:"requestGetChannelAttributesByKeys",value:function(e,n){var r=this.getLoginSockets();if(0===r.length)throw new H("Client is not logged in");var i=this.incGetSeq();return r.forEach((function(t){t.sendPacket("GroupAttributeGet",{group:e,seq:i,attributes:n})})),ya.apply(void 0,[t.genTimeoutError(Pb)].concat(I(r.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(X((function(e){return i.eq(e.seq)})),Z((function(e){throw new ca(["The channel attributes get failure, code %d",e.code],Ob)})))}))),I(r.map((function(e){return e.fromReceived("GroupAttributeRet").pipe(X((function(e){return i.eq(e.seq)})))})))))}},{key:"requestGetUserAttributeKeys",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new H("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("UserAttributeKeysGet",{account:e,seq:r})})),ya.apply(void 0,[t.genTimeoutError(Pb)].concat(I(n.map((function(e){return e.fromReceived("UserAttributeErr").pipe(X((function(e){return r.eq(e.seq)})),Z((function(e){if(10008===(e=e.code))throw new ca("The user requested is not online",lq);throw new Pc(["User attribute operation unknown error code: %d",e],Ob)})))}))),I(n.map((function(e){return e.fromReceived("UserAttributeKeysRet").pipe(X((function(e){return r.eq(e.seq)})))})))))}},{key:"requestGetChannelAttributesKeys",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new H("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("GroupAttributeKeysGet",{group:e,seq:r})})),ya.apply(void 0,[t.genTimeoutError(Pb)].concat(I(n.map((function(e){return e.fromReceived("GroupAttributeErr").pipe(X((function(e){return r.eq(e.seq)})),Z((function(e){throw new Pc(["Channel attribute operation unknown error code: %d",e.code],Ob)})))}))),I(n.map((function(e){return e.fromReceived("GroupAttributeKeysRet").pipe(X((function(e){return r.eq(e.seq)})))})))))}},{key:"requestGetChannelMemberCount",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new H("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("GroupStatusList",{groups:e,seq:r})})),ya.apply(void 0,[t.genTimeoutError(oq)].concat(I(n.map((function(e){return e.fromReceived("GroupStatusResult").pipe(X((function(e){return r.eq(e.seq)})))})))))}},{key:"requestSubscribePeersOnlineStatus",value:function(e){var n=this.getLoginSockets();if(0===n.length)throw new H("Client is not logged in");var r=this.incGetSeq();return n.forEach((function(t){t.sendPacket("SubscribeUserStatus",{seq:r,users:e})})),ya.apply(void 0,[t.genTimeoutError(Uz)].concat(I(n.map((function(e){return e.fromReceived("SubscribeResponse").pipe(X((function(e){return r.eq(e.seq)})))})))))}},{key:"requestUnsubscribePeersOnlineStatus",value:function(e){var t=this.getLoginSockets();if(0===t.length)throw new H("Client is not logged in");var n=this.incGetSeq();t.forEach((function(t){t.sendPacket("UnsubscribeUserStatus",{seq:n,users:e})}))}},{key:"sendInvitationMessage",value:function(){var e=K(w.mark((function e(t){var n,r,i,o,s,a,u,c,l,f,h,p,d=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.peerId,r=t.callId,i=t.extra,o=t.isAcceptAck,s=t.channelId,a=t.type,u={callId:r},void 0===o){e.next=6;break}if("CallAccept"===a){e.next=5;break}throw Error("invalid invitation type");case 5:u.type=o?"ack":"request";case 6:return u.channel=s,("CallInvite"===a||"CallCancel"===a||"CallReject"===a||"CallAccept"===a&&!1===o)&&void 0!==i&&(u.extra=i),c=lg(),this.log("The sent invitation body is %o",u),l=function(e){return{MiscMap:{},sequence:U.fromNumber(1),dialogue:c,instance:d.instanceId,dst:n,ms:U.fromNumber(Date.now(),!0),options:new Od({IterationNumber:e,MessageType:a}).toLong(),payload:(new TextEncoder).encode(JSON.stringify(u)),src:d.context.uid}},e.next=14,Ib(this.sendMessageToRetry(l,!0)).pipe(Za(1e4),Ga((function(e){return e instanceof pb&&d.warn("Send invitation timeout"),ba(e)}))).toPromise();case 14:return f=e.sent,h=f.code,p=f.retryTimes,e.abrupt("return",{hasPeerReceived:0===h,hasReSent:0!==p});case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendMediaMessage",value:function(){var e=K(w.mark((function e(t,n,r,i,o,s){var a,u,c,l,f,h,p,d,v,b,g,y,E,_,O,I,k,A,T,R,N,S,C,x,P,j,M,D,q,B=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=n.width,c=void 0===u?0:u,l=n.height,f=void 0===l?0:l,h=n.fileName,p=void 0===h?"":h,d=n.description,v=void 0===d?"":d,b=n.thumbnail,g=void 0===b?new Blob:b,y=n.thumbnailHeight,E=void 0===y?0:y,_=n.thumbnailWidth,O=void 0===_?0:_,I=n.size,k=void 0===I?0:I,A=n.mediaId,T=o.enableOfflineMessaging,R=o.enableHistoricalMessaging,ua(r)){e.next=4;break}throw new L("The send message arguments are not valid",i?Ik:Tf);case 4:if(!(32768<new Blob([p,g,v]).size)){e.next=6;break}throw new L("The size of message overflowed ",i?ge:qh);case 6:return N=this.chatManager.getChatInfo(r),S=N.dialogue,C=N.sequence,x=this.instanceId,this.log('A%s media message is sending to %s: "'.concat(x,"-").concat(S,"#").concat(C,'"'),i?" peer":" channel",r),m(a={},"media_description",v),m(a,"media_width",c),m(a,"media_height",f),m(a,"media_thumbnailwidth",O),m(a,"media_thumbnailheight",E),m(a,"media_size",k),m(a,"media_id",A),m(a,"media_filename",p),P=oc(a,(function(e){return(new TextEncoder).encode(e.toString())})),e.t0=Uint8Array,e.next=14,wi(g);case 14:return e.t1=e.sent,P.media_thumbnail=new e.t0(e.t1),j=i&&"IMAGE"===t?"PeerImageMessage":i&&"FILE"===t?"PeerFileMessage":i||"IMAGE"!==t?"ChannelFileMessage":"ChannelImageMessage",M=function(e){return{MiscMap:P,sequence:C,dialogue:S,instance:x,dst:r,ms:U.fromNumber(Date.now(),!0),options:new Od({IterationNumber:e,CompressionMethod:"Uncompressed",MessageType:j,ToCache:T,ToArchive:R}).toLong(),payload:new Uint8Array,src:B.context.uid}},e.next=20,Ib(this.sendMessageToRetry(M,!0)).pipe(Za(void 0===s?1e4:s),Ga((function(e){return e instanceof pb&&B.warn("Send message timeout"),ba(e)}))).toPromise();case 20:if(D=e.sent,2!==(q=D.code)){e.next=24;break}throw new ca("The peer does not support this type of message",Mz);case 24:return e.abrupt("return",{hasPeerReceived:0===q});case 25:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,o,s){return e.apply(this,arguments)}}()},{key:"sendRawMessage",value:function(){var e=K(w.mark((function e(t,n,r,i,o,s){var a,u,c,l,f,h,p,d,v,b,g=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=o.enableOfflineMessaging,u=o.enableHistoricalMessaging,ua(r)&&t instanceof Uint8Array&&"string"==typeof n){e.next=3;break}throw new L("The send message arguments are not valid",i?Ik:Tf);case 3:if(!(32768<t.byteLength+new Blob([n]).size)){e.next=5;break}throw new gb("The message size is over the 32KB limit",i?ge:qh);case 5:return c=!Nd.getParameter("DISABLE_MESSAGE_COMPRESSION")&&128<=t.byteLength,l=this.chatManager.getChatInfo(r),f=l.dialogue,h=l.sequence,p=this.instanceId,this.log('A%s %s raw message is sending to %s: "'.concat(p,"-").concat(f,"#").concat(h,'"'),c?" compressed":"",i?"peer":"channel",r),d=function(e){return{MiscMap:{description:(new TextEncoder).encode(n)},sequence:h,dialogue:f,instance:p,dst:r,ms:U.fromNumber(Date.now(),!0),options:new Od({IterationNumber:e,CompressionMethod:c?"Zlib":"Uncompressed",MessageType:i?"PeerRawMessage":"ChannelRawMessage",ToCache:a,ToArchive:u}).toLong(),payload:c?Er(t):t,src:g.context.uid}},e.next=12,Ib(this.sendMessageToRetry(d,!0)).pipe(Za(void 0===s?1e4:s),Ga((function(e){return e instanceof pb&&g.warn("Send message timeout"),ba(e)}))).toPromise();case 12:return v=e.sent,b=v.code,e.abrupt("return",{hasPeerReceived:0===b});case 15:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,o,s){return e.apply(this,arguments)}}()},{key:"sendTextMessage",value:function(){var e=K(w.mark((function e(t,n,r,i,o){var s,a,u,c,l,f,h,p,d,v,b,g=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=i.enableOfflineMessaging,a=i.enableHistoricalMessaging,ua(n)){e.next=3;break}throw new L("The send message arguments are not valid",r?Ik:Tf);case 3:if(!(32768<new Blob([t]).size)){e.next=5;break}throw new gb("The message size is over the 32KB limit",r?ge:qh);case 5:return u=!Nd.getParameter("DISABLE_MESSAGE_COMPRESSION")&&128<=new Blob([t]).size,c=this.chatManager.getChatInfo(n),l=c.dialogue,f=c.sequence,h=this.instanceId,this.log('A%s %s message is sending to %s: "'.concat(h,"-").concat(l,"#").concat(f,'"'),u?" compressed":"",r?"peer":"channel",n),p=(new TextEncoder).encode(t),d=function(e){return{MiscMap:{},sequence:f,dialogue:l,instance:h,dst:n,ms:U.fromNumber(Date.now(),!0),options:new Od({IterationNumber:e,CompressionMethod:u?"Zlib":"Uncompressed",MessageType:r?"PeerTextMessage":"ChannelTextMessage",ToCache:s,ToArchive:a}).toLong(),payload:u?Er(p):p,src:g.context.uid}},e.next=13,Ib(this.sendMessageToRetry(d,!0)).pipe(Za(void 0===o?1e4:o),Ga((function(e){return e instanceof pb&&g.warn("Send message timeout"),ba(e)}))).toPromise();case 13:return v=e.sent,b=v.code,e.abrupt("return",{hasPeerReceived:0===b});case 16:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i,o){return e.apply(this,arguments)}}()},{key:"cleanLoginSubs",value:function(e,t){Object.entries(this.loginSocketSubs[e]).forEach((function(e){var n=(e=pa(e,2))[1];"channels"===e[0]&&t||(Array.isArray(n)||n instanceof Map?n.forEach((function(e){return e.unsubscribe()})):n&&n.unsubscribe())})),this.loginSocketSubs[e]={channels:t?this.loginSocketSubs[e].channels:new Map,receivers:[]}}},{key:"sendMessageToRetry",value:function(){var e=K(w.mark((function e(t,n){var r,i,o,s,a,u,c,l,f,h=this,p=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=2<p.length&&void 0!==p[2]?p[2]:0,this.log("Attempt to send the message ".concat(n?" with retrying, %o":"without retrying"),{retryTimes:r}),0!==(i=this.getLoginSockets()).length){e.next=5;break}throw Error("no logged-in sockets");case 5:return o=t(r),i.forEach((function(e){e.sendPacket("Message",o)})),s=o.dialogue,a=o.sequence,u=o.instance,c=i.map((function(e){return e.fromReceived("Ack").pipe(nb((function(e){return s.eq(e.dialogue)&&a.eq(e.sequence)&&u.eq(e.instance)})))})),e.prev=9,e.next=12,Tb.apply(void 0,I(c)).pipe(Za(6e3),Ga((function(e){return Na(e)&&h.warn("Message send timeout, retry times %d",r),ba(e)})),Pa(1)).toPromise();case 12:return l=e.sent,f=l.code,this.log("The message has been acked, %o",{code:f}),e.abrupt("return",{code:f,retryTimes:r});case 18:if(e.prev=18,e.t0=e.catch(9),!(e.t0 instanceof pb&&n)){e.next=22;break}return e.abrupt("return",this.sendMessageToRetry(t,!1,r+1));case 22:throw e.t0;case 23:case"end":return e.stop()}}),e,this,[[9,18]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"initKeepAliveSender",value:function(){var e=this;this.lastLoginSockets.map((function(t){return t.pipe(vc((function(t){return uc(0,1e3).pipe(Y((function(){e.incSeqIfNeeded(t.env),t.sendPacket("Ping",{ms:U.fromNumber(Date.now(),!0),seq:e.seq})})))})))})).forEach((function(t,n){var r=e.loginSocketSubs[n].keepAlive;void 0!==r&&r.unsubscribe(),e.loginSocketSubs[n].keepAlive=t.subscribe({error:function(){}})}))}},{key:"initKeepAliveReconnector",value:function(){var e=this;this.lastLoginSockets.map((function(e){return e.pipe(vc((function(e){var t,n=!1,r=e.userJoin$.pipe(Y((function(){n=!0}))),i=e.input$.pipe(Y((function(e){"Ping"!==yi[e.uri].slice(0,-3)&&(n=!1)})));return Tb(uc(5e3,4500).pipe(jt(e.receivedPacket),Y((function(r){r=pa(r,2),r=pa(r[1],2)[1],t!==r||n||e.forceReconnect(),t=r}))),r,i)})))})).forEach((function(t,n){var r=e.loginSocketSubs[n].keepAliveReconnector;void 0!==r&&r.unsubscribe(),e.loginSocketSubs[n].keepAliveReconnector=t.subscribe({error:function(){}})}))}},{key:"initLoginReceiver",value:function(){var e=this;this.lastLoginSockets.map((function(t){return t.pipe(vc((function(t){return Tb(fb(t,"reconnect").pipe(Y(e.onSocketReconnect(t))),t.fromReceived("Message").pipe(Y(e.onMessage(t))),t.fromReceived("GroupEnterNotice").pipe(Y(e.onGroupEnterNotice())),t.fromReceived("GroupLeaveNotice").pipe(Y(e.onGroupLeaveNotice())),t.fromReceived("GroupCountNotice").pipe(Y(e.onGroupCountNotice())),t.fromReceived("GroupAttributeAlt").pipe(Y(e.onGroupAttributeAlt())),t.fromReceived("UserJoinNotice").pipe(Y(e.onUserNotice(S.PeerOnlineState.ONLINE))),t.fromReceived("UserQuitNotice").pipe(Y(e.onUserNotice(S.PeerOnlineState.OFFLINE))),t.fromReceived("UserWaitNotice").pipe(Y(e.onUserNotice(S.PeerOnlineState.UNREACHABLE)))).pipe(bf(void 0))})))})).forEach((function(t,n){e.loginSocketSubs[n].receivers.push(t.subscribe({error:function(){}}))}))}},{key:"requestSocketLogin",value:function(e,t,n){var r=this;return Ol(qd((function(){r.userJoinOptions=new Cr(t),e.sendPacket("UserJoin",{account:r.context.uid,instance:r.instanceId,opt:r.userJoinOptions.toLong(),seq:n,ticket:e.ticket})})),e.fromReceived("UserResp").pipe(X((function(e){return n.eq(e.seq)})),Y((function(t){if(0!==(t=t.code))throw r.clearSockets(),r.logError("Connected to gateway success but the Rtm server rejected login"),new ca(["Login failure. The response code from the RTM service is %d",t],sh);r.log("ENV_%d logged in",e.env)})),bf(e),Za(5e3))).pipe(nb((function(e){return void 0!==e})),Ga((function(e){return e instanceof pb&&r.warn("Login response timeout, rejoin: %s",t),ba(e)})))}},{key:"getSocketLoginObservables",value:function(e,t){var n=this;return e.map((function(e){return e.pipe(Y((function(e){0===e.listenerCount("socketUserDrop")&&e.on("socketUserDrop",(function(t){return n.onUserDrop(t,e)}))})),vc((function(e,r){return n.incSeqIfNeeded(e.env),n.requestSocketLogin(e,0!==r,0===r?t:n.seq)})),be())}))}},{key:"incSeqIfNeeded",value:function(e){if(![0,1].includes(e))throw new Ca({INVALID_ENV:"The env argument is not 0 or 1"});this.seqSentStatuses[e]&&(this.seq=this.seq.add(1),this.seqSentStatuses=[!1,!1]),this.seqSentStatuses[e]=!0}},{key:"incGetSeq",value:function(){return this.seq=this.seq.add(1),this.seqSentStatuses=[!0,!0],this.seq}},{key:"getLoginSockets",value:function(){for(var e=this.curLoginSockets,t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i}},{key:"emitMessage",value:function(e,n){var r=e.options,i=e.payload,o=e.src,s=e.dst,a=e.instance,u=e.dialogue,c=e.sequence,l=e.ms,f=e.MiscMap;this.dialogueSequenceLru.set(u.toString(),c),a="".concat(a,"-").concat(u,"#").concat(c),this.msgDedupLru.has(a)?this.warn("Env_%d: Messages out-of-order or not start with 1: %s",n,a):(this.msgDedupLru.set(a,void 0),n=new Od(r),this.lastLoginSockets.forEach(function(){var n=K(w.mark((function n(r){var i;return w.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,r.pipe(Pa(1)).toPromise();case 2:i=n.sent,t.sendMessageAck(e,i);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()),r=n.isZlibCompressed(),n.isInvitation()?(s=na(r?Wk(Am(i,Uint8Array.of(0,0,0,0))):i),s=JSON.parse(s),this.log("The received invitation body is %o",s),this.emit("invitationMessage",{body:s,type:n.getInvitationType(),peerId:o,serverReceivedTs:l.toNumber()})):n.isTextMessage()?(f=n.isPeerTextMessage(),i=na(r?Wk(Am(i,Uint8Array.of(0,0,0,0))):i),this.info("Received a%s %s text message from %s to %s, %s",r?" compressed":"",f?"peer":"channel",o,s,a),f?(o={text:i,peerId:o,properties:{serverReceivedTs:l.toNumber(),isOfflineMessage:n.isFromCache()}},this.emit("peerTextMessage",o)):this.emit("channelTextMessage",{channelId:s,memberId:o,text:i,properties:{serverReceivedTs:l.toNumber(),isOfflineMessage:!1}})):n.isRawMessage()?(u=n.isRawPeerMessage(),f=void 0===(f=f.description)?"":na(f),i=r?Wk(i):i,this.info("Received a%s %s raw message from %s to %s, %s",r?" compressed":"",u?"peer":"channel",o,s,a),u?(o={desc:f,raw:i,peerId:o,properties:{serverReceivedTs:l.toNumber(),isOfflineMessage:n.isFromCache()}},this.emit("peerRawMessage",o)):this.emit("channelRawMessage",{desc:f,raw:i,channelId:s,memberId:o,properties:{serverReceivedTs:l.toNumber(),isOfflineMessage:!1}})):(n.isImageMessage()||n.isFileMessage())&&(i=n.isPeerMessage(),this.info("Received a %s media message from %s to %s, %s",i?"peer":"channel",o,s,a),i?this.emit("peerMediaMessage",{messageType:n.isImageMessage()?"IMAGE":"FILE",details:f,peerId:o,properties:{serverReceivedTs:l.toNumber(),isOfflineMessage:n.isFromCache()}}):this.emit("channelMediaMessage",{messageType:n.isImageMessage()?"IMAGE":"FILE",details:f,memberId:o,channelId:s,properties:{serverReceivedTs:l.toNumber(),isOfflineMessage:n.isFromCache()}})))}},{key:"onSocketReconnect",value:function(e){var t=this;return function(){var n=[0,1].filter((function(t){return t!==e.env}))[0];(n=t.connection.curOpenSockets[n])&&!n.loggedIn&&t.emit("connectionLost")}}},{key:"onUserDrop",value:function(e,t){var n,r;e=e.code,cb("KickedOff",{code:0,elapse:db(this.startTime),linkId:parseInt(t.name.split("-")[1],10),lts:U.fromNumber(Date.now()),server:t.address,serverCode:e,sid:Sa(this.instanceId),userId:this.context.uid},null===(n=this.context.areaConfig)||void 0===n?void 0:n.EVENT_REPORT_DOMAIN[0],null===(r=this.context.areaConfig)||void 0===r?void 0:r.EVENT_REPORT_BACKUP_DOMAIN[0]),10006===e||10001===e?this.warn("Login too often and kicked off, reconnect and login"):10009===e?(this.warn("The instance ID conflicts, reconnecting"),this.instanceId=lg(),this.context.sid=Sa(this.instanceId),this.emit("instanceChanged",this.instanceId)):[11,14,15,16].includes(e)&&(this.emit("userDrop",e),this.clearSockets())}},{key:"clearSockets",value:function(){var e=this,t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];[0,1].forEach((function(r){e.cleanLoginSubs(r,n),e.connection.closeSocket(r,t)}))}},{key:"onMessage",value:function(e){var t=this;return function(n){var r=n.dialogue,i=n.instance,o=n.sequence,s=n.options;if(n.src===t.context.uid)t.log("The message is from the local account, ignored");else{var a=r.toString(),u=t.dialPendingMsgSubjectMaps[e.env].get(a);if(r="".concat(i,"-").concat(r,"#").concat(o),u)u.next(n),t.log("Env_%d: The dialogue has pending messages, next: %s",e.env,r);else{var c=t.dialogueSequenceLru.get(a);if(u=!c&&o.eq(1),i=void 0!==c&&o.sub(c).eq(1),u||i)t.emitMessage(n,e.env);else{if(c){if(o.lte(c))return;t.log("Env_%d: The message pended, the sequence is not continuous with the last: %s",e.env,r)}else t.log("Env_%d: The message pended, the first sequence is not equal to 1: %s",e.env,r);o=new La,t.dialPendingMsgSubjectMaps[e.env].set(a,o);var l=o.pipe(ks(yk),ig((function(e,t){return[].concat(I(e),[t])}),[]),Z((function(e){return e.sort((function(e,t){return e=e.sequence,t=t.sequence,e.eq(t)?0:e.gt(t)?1:-1}))})),Yl(1));s=!(s=new Od(s)).isFromCache()&&!s.isBufferedMessage(),l.pipe(ob(uc(s?750:1500)),X((function(e){if(2>e.length)return!1;for(var t=void 0===c?U.fromNumber(1,!0):c.add(1),n=0;n<e.length;t=t.add(1),n++)if(!e[n].sequence.eq(t))return!1;return!0})),hg((function(){t.dialPendingMsgSubjectMaps[e.env].delete(a)}))).subscribe((function(n){n.forEach((function(n){t.emitMessage(n,e.env),t.log("Env_%d: The message queue has fully ordered, emitting: %s",e.env,"".concat(n.instance,"-").concat(n.dialogue,"#").concat(n.sequence))}))}),(function(n){n instanceof gg&&l.pipe(Pa(1)).subscribe((function(n){return n.forEach((function(n){t.log("Env_%d: The message pending queue expired, emitting: %s",e.env,"".concat(n.instance,"-").concat(n.dialogue,"#").concat(n.sequence)),t.emitMessage(n,e.env)}))}))})),o.next(n)}}}}}},{key:"onGroupEnterNotice",value:function(){var e=this;return function(t){e.emit("memberNotice",{channelId:t.group,seq:t.seq,instance:t.instance,memberId:t.user,type:"MemberJoined",size:t.size})}}},{key:"onGroupLeaveNotice",value:function(){var e=this;return function(t){e.emit("memberNotice",{channelId:t.group,seq:t.seq,instance:t.instance,memberId:t.user,type:"MemberLeft",size:t.size})}}},{key:"onGroupCountNotice",value:function(){var e=this;return function(t){e.emit("memberNotice",{channelId:t.group,seq:t.seq,instance:t.instance,type:"MemberCountUpdated",size:t.size})}}},{key:"onGroupAttributeAlt",value:function(){var e=this;return function(t){var n=t.group;t=Se(t,["group"]),e.emit("channelAttributesUpdated",Ja({channelId:n},t))}}},{key:"onUserNotice",value:function(e){var t=this;return function(n){t.emit("peerOnlineStatusChanged",{peerId:n.user,instance:n.instance,seq:n.seq,state:e})}}}],[{key:"sendMessageAck",value:function(e,t){var n=new Od(e.options);(n.isInvitation()||n.isPeerMessage())&&t.sendPacket("Ack",{code:0,dialogue:e.dialogue,instance:e.instance,sequence:e.sequence})}}]),t}(vb());m(Fr,"genTimeoutError",(function(e,t){return mb(void 0).pipe(Wc(void 0===t?1e4:t),Z((function(){throw new bb(["Request timed out after %ds",void 0===t?1e4:t],e)})))}));var Gr,Xk,Yk=0,Zk=0;Id.v1=function(e,t,n){n=t&&n||0;var r=t||[],i=(e=e||{}).node||Gr,o=void 0!==e.clockseq?e.clockseq:Xk;if(null==i||null==o){var s=jq();null==i&&(i=Gr=[1|s[0],s[1],s[2],s[3],s[4],s[5]]),null==o&&(o=Xk=16383&(s[6]<<8|s[7]))}s=void 0!==e.msecs?e.msecs:(new Date).getTime();var a=void 0!==e.nsecs?e.nsecs:Zk+1,u=s-Yk+(a-Zk)/1e4;if(0>u&&void 0===e.clockseq&&(o=o+1&16383),(0>u||s>Yk)&&void 0===e.nsecs&&(a=0),1e4<=a)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");for(Yk=s,Zk=a,Xk=o,e=(1e4*(268435455&(s+=122192928e5))+a)%4294967296,r[n++]=e>>>24&255,r[n++]=e>>>16&255,r[n++]=e>>>8&255,r[n++]=255&e,e=s/4294967296*1e4&268435455,r[n++]=e>>>8&255,r[n++]=255&e,r[n++]=e>>>24&15|16,r[n++]=e>>>16&255,r[n++]=o>>>8|128,r[n++]=255&o,o=0;6>o;++o)r[n+o]=i[o];return t||kq(r)},Id.v4=Id;var $k=zh(),jd,Hr,Oe=S.LocalInvitationFailureReason,xa=S.LocalInvitationState,AC=(Hr=function(e){function t(e,i,o){W(this,t);var s=r.call(this,o,"RtmLocalInvitation",!0);return m(n(s),"state",xa.IDLE),m(n(s),"localInvitationEnd$",ya(fb(n(s),"LocalInvitationAccepted"),fb(n(s),"LocalInvitationRefused"),fb(n(s),"LocalInvitationFailure"),fb(n(s),"LocalInvitationCanceled")).pipe(Pa(1))),m(n(s),"callId",Id.v4()),m(n(s),"_content",""),m(n(s),"_channelId",""),m(n(s),"_response",""),m(n(s),"calleeId",void 0),m(n(s),"logger",void 0),m(n(s),"getSession",void 0),s.calleeId=e,s.getSession=i,s.logger=o,s}ka(t,e);var r=la(t);return Ea(t,[{key:"channelId",get:function(){return this._channelId},set:function(e){this.state!==xa.IDLE?this.info("set channelId only allow before invitation sent to remote"):(this.log("set channelId for %s",this.callId),this._channelId=e)}},{key:"content",get:function(){return this._content},set:function(e){this.log("set content for %s",this.callId),this._content=e}},{key:"response",get:function(){return this._response},set:function(e){throw new L('Cannot set the "response" of the LocalInvitation instance.',rc)}},{key:"send",value:function(){var e,t=this;if(this.state===xa.SENT_TO_REMOTE||this.state===xa.RECEIVED_BY_REMOTE)throw new H("The local invitation send failure. The call invitation has already been sent.",Fz);if(this.isLocalInvitationEnd())throw new H("The local invitation send failure. The call invitation has ended.",rh);if(0<this._channelId.length&&!ua(this._channelId))throw new L("Illegal invitation channel ID",rc);if(!ua(this.calleeId))throw new L("Illegal invitation callee user ID",rc);if(8192<sg(this._content))throw new L('The length of the "content" overflows. The number of bytes representing content must not exceed 8 Ã 1024 if encoded in UTF-8.',rc);this.state=xa.SENT_TO_REMOTE,qd(K(w.mark((function n(){var r,i,o;return w.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.getSession().sendInvitationMessage({peerId:t.calleeId,callId:t.callId,extra:t._content,type:"CallInvite",channelId:t._channelId});case 2:if(r=n.sent,i=r.hasPeerReceived,o=r.hasReSent,!t.isLocalInvitationEnd()){n.next=7;break}throw new bb("send invitation timeout");case 7:if(t.log("The local invitation has sent to the callee"),i||o){n.next=11;break}throw e=new $k({PEER_NOT_ONLINE:"The peer of the invitation is not online"});case 11:if(i){n.next=14;break}throw e=new $k({RESENT_AND_OFFLINE:"Resent and the peer of the invitation is not online"});case 14:case"end":return n.stop()}}),n)})))).pipe(ae((function(e){return e.pipe(Y((function(e){if(!(e instanceof $k))throw e})),Wc(2e3))})),Za(3e4),Ga((function(e){return Na(e)&&t.warn("local invitation ack timed out"),ba(e)})),ob(this.localInvitationEnd$)).subscribe({next:function(){t.state===xa.RECEIVED_BY_REMOTE?t.log('The local invitation state is already "RECEIVED_BY_REMOTE", skipped emitting "LocalInvitationReceivedByPeer"'):t.state!==xa.SENT_TO_REMOTE?t.log("The invitation has ended, skipped emitting the %s event","LocalInvitationReceivedByPeer"):(t.info("The peer received the local invitation %s.",t.callId),t.state=xa.RECEIVED_BY_REMOTE,t.emit("LocalInvitationReceivedByPeer"),t.localInvitationEnd$.pipe(Za(6e4),Ga((function(e){return Na(e)&&t.warn("local invitation expired"),ba(e)}))).subscribe({error:function(){t.state=xa.FAILURE,t.emit("LocalInvitationFailure",Oe.INVITATION_EXPIRE)}}))},error:function(n){t.isLocalInvitationEnd()?t.log("The invitation has ended, skipped emitting the %s event","LocalInvitationFailure"):(t.state=xa.FAILURE,Na(n)&&e?"PEER_NOT_ONLINE"===e.code?t.emit("LocalInvitationFailure",Oe.PEER_OFFLINE):"RESENT_AND_OFFLINE"===e.code&&t.emit("LocalInvitationFailure",Oe.PEER_NO_RESPONSE):Na(n)?t.emit("LocalInvitationFailure",Oe.PEER_NO_RESPONSE):"RtmInvalidStatusError"===n.name?t.emit("LocalInvitationFailure",Oe.NOT_LOGGEDIN):t.emit("LocalInvitationFailure",Oe.UNKNOWN))}})}},{key:"cancel",value:function(){if(this.isLocalInvitationEnd())throw new H("The local invitation cancel failure",rh);if(this.state===xa.IDLE)throw new H("The local invitation has not been sent",Ez);if(8192<sg(this._content))throw new L('The length of the "content" overflows. The number of bytes representing content must not exceed 8 Ã 1024 if encoded in UTF-8.',rc);this.getSession().sendInvitationMessage({callId:this.callId,peerId:this.calleeId,type:"CallCancel",channelId:this._channelId,extra:this._content}),this.state=xa.CANCELED,this.emit("LocalInvitationCanceled")}},{key:"onAcceptReceived",value:function(e){if(this.isLocalInvitationEnd()&&this.state!==xa.ACCEPTED_BY_REMOTE)this.log("The invitation has ended, skipped emitting the %s event","LocalInvitationAccepted");else{if(this.state===xa.IDLE)throw new H("the local have not sent the invitation, how can remote accept it?");this.getSession().sendInvitationMessage({callId:this.callId,isAcceptAck:!0,type:"CallAccept",peerId:this.calleeId,channelId:this.channelId}),this.state===xa.ACCEPTED_BY_REMOTE?this.log("already in ACCEPTED_BY_REMOTE state, ignore emit ACCEPTED_BY_REMOTE"):(this.state===xa.SENT_TO_REMOTE&&(this.log("receive LocalInvitationAccepted before remote response to the invitation"),this.state=xa.RECEIVED_BY_REMOTE,this.emit("LocalInvitationReceivedByPeer")),this.state=xa.ACCEPTED_BY_REMOTE,this._response=e,this.emit("LocalInvitationAccepted",e))}}},{key:"onRefuseReceived",value:function(e){if(this.isLocalInvitationEnd())this.log("The invitation has ended, skipped emitting the %s event","LocalInvitationRefused");else{if(this.state===xa.IDLE)throw new H("the local have not sent the invitation, how can remote refuse it?");this.state===xa.SENT_TO_REMOTE&&(this.log("receive LocalInvitationRefused before remote response to the invitation"),this.state=xa.RECEIVED_BY_REMOTE,this.emit("LocalInvitationReceivedByPeer")),this._response=e,this.state=xa.REFUSED_BY_REMOTE,this.emit("LocalInvitationRefused",e)}}},{key:"isLocalInvitationEnd",value:function(){return[xa.CANCELED,xa.FAILURE,xa.ACCEPTED_BY_REMOTE,xa.REFUSED_BY_REMOTE].includes(this.state)}}]),t}(vb()),jd=Hr,da(jd.prototype,"send",[ia],Object.getOwnPropertyDescriptor(jd.prototype,"send"),jd.prototype),da(jd.prototype,"cancel",[ia],Object.getOwnPropertyDescriptor(jd.prototype,"cancel"),jd.prototype),jd),Bh=S.RemoteInvitationFailureReason,ib=S.RemoteInvitationState,BC=function(e){function t(e){var i=e.invitationChannel,o=e.extraContent,s=e.callId,a=e.callerId,u=e.logger;e=e.getSession,W(this,t);var c=r.call(this,u,"RtmRemoteInvitation",!0);return m(n(c),"state",ib.INVITATION_RECEIVED),m(n(c),"remoteInvitationEnd$",ya(fb(n(c),"RemoteInvitationCanceled"),fb(n(c),"RemoteInvitationRefused"),fb(n(c),"RemoteInvitationAccepted"),fb(n(c),"RemoteInvitationFailure")).pipe(Pa(1))),m(n(c),"callerId",void 0),m(n(c),"callId",void 0),m(n(c),"_getSession",void 0),m(n(c),"logger",void 0),m(n(c),"_content",void 0),m(n(c),"_channelId",void 0),m(n(c),"_response",""),c._channelId=i,c._content=o,c.callId=s,c.callerId=a,c._getSession=e,c.logger=u,c.remoteInvitationEnd$.pipe(Za(6e4),Ga((function(e){return Na(e)&&c.warn("Remote invitation expired"),ba(e)}))).subscribe({error:function(){c.state=ib.FAILURE,c.emit("RemoteInvitationFailure",Bh.INVITATION_EXPIRE)}}),c}ka(t,e);var r=la(t);return Ea(t,[{key:"channelId",get:function(){return this._channelId},set:function(e){throw new L('Cannot set the "response" of the RemoteInvitation instance.',rc)}},{key:"content",get:function(){return this._content},set:function(e){throw new L('Cannot set the "content" of the RemoteInvitation instance.',rc)}},{key:"response",get:function(){return this._response},set:function(e){this._response=e}},{key:"accept",value:function(){var e,t=this;if(this.isRemoteInvitationEnd())throw new H("The local invitation has ended. Cannot accept.",rh);if(this.state===ib.ACCEPT_SENT_TO_LOCAL)throw new H("The remote invitation is accepting. Cannot do the operation.",pq);if(8192<sg(this._response))throw new L('The length of the "response" overflows. The number of bytes representing content must not exceed 8 Ã 1024 if encoded in UTF-8.',rc);this.state=ib.ACCEPT_SENT_TO_LOCAL,Tb(Sl(1e3).pipe(eb((function(){return qd(K(w.mark((function e(){return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t._getSession().sendInvitationMessage({peerId:t.callerId,callId:t.callId,extra:t.response,type:"CallAccept",isAcceptAck:!1,channelId:t.channelId}));case 1:case"end":return e.stop()}}),e)}))))})),nb((function(t){return e=t.hasPeerReceived})),Pa(1)),fb(this,"RemoteInvitationAccepted")).pipe(Za(5e3),ob(this.remoteInvitationEnd$)).subscribe({error:function(n){if(t.logError(n),t.state=ib.FAILURE,Na(n))switch(e){case void 0:case!0:return void t.emit("RemoteInvitationFailure",Bh.ACCEPT_FAILURE);case!1:return void t.emit("RemoteInvitationFailure",Bh.PEER_OFFLINE)}t.emit("RemoteInvitationFailure",Bh.UNKNOWN)}})}},{key:"refuse",value:function(){if(this.state===ib.ACCEPT_SENT_TO_LOCAL)throw new H("The remote invitation is accepting. Cannot do the operation.",pq);if(this.isRemoteInvitationEnd())throw new H("The invitation is end. Cannot refuse",rh);if(8192<sg(this._response))throw new L('The length of the "response" overflows. The number of bytes representing content must not exceed 8 Ã 1024 if encoded in UTF-8.',rc);this._getSession().sendInvitationMessage({peerId:this.callerId,callId:this.callId,extra:this.response,type:"CallReject",channelId:this.channelId}),this.state=ib.REFUSED,this.emit("RemoteInvitationRefused")}},{key:"onCancelReceived",value:function(e){this.isRemoteInvitationEnd()?this.log("The invitation has ended, skipped emitting the %s event","RemoteInvitationCanceled"):(this.state===ib.ACCEPT_SENT_TO_LOCAL&&this.log("caller canceled before receive accept"),this._content=e,this.state=ib.CANCELED,this.emit("RemoteInvitationCanceled",e))}},{key:"onAcceptAckReceived",value:function(){this.state!==ib.ACCEPT_SENT_TO_LOCAL?this.log("The invitation has ended, skipped emitting the %s event","ori:".concat(this.state,", to: RemoteInvitationAccepted")):(this.state=ib.ACCEPTED,this.emit("RemoteInvitationAccepted"))}},{key:"isRemoteInvitationEnd",value:function(){return[ib.ACCEPTED,ib.REFUSED,ib.CANCELED,ib.FAILURE].includes(this.state)}}]),t}(vb()),CC=function(e){function t(e,i){W(this,t);var o=r.call(this,i,"InvitationManager");return m(n(o),"getSession",void 0),m(n(o),"invitationDispatcher",new aa.EventEmitter),m(n(o),"outgoingLocalInvitations",new Map),m(n(o),"receivedRemoteInvitations",new nc(void 0,{maxlen:1e4})),m(n(o),"logger",void 0),o.getSession=Fm(e),o.logger=i,o.invitationDispatcher.on("remoteInvitationToManager",(function(e){var t=e.callId,n=e.extra,r=e.callerId;e=e.channelId,o.receivedRemoteInvitations.has(t)||((n=new BC({callerId:r,callId:t,getSession:o.getSession,logger:i,extraContent:n,invitationChannel:e})).remoteInvitationEnd$.subscribe((function(){o.receivedRemoteInvitations.delete(t)})),o.receivedRemoteInvitations.set(t,n),o.emit("remoteInvitationInstance",n))})),o.invitationDispatcher.on("acceptAckToRemoteInvitation",(function(e){(e=o.receivedRemoteInvitations.get(e.callId))&&e.onAcceptAckReceived()})),o.invitationDispatcher.on("cancelToRemoteInvitation",(function(e){var t=e.extra;(e=o.receivedRemoteInvitations.get(e.callId))&&e.onCancelReceived(t)})),o.invitationDispatcher.on("acceptToLocalInvitation",(function(e){var t=e.extra;(e=o.outgoingLocalInvitations.get(e.callId))&&e.onAcceptReceived(t)})),o.invitationDispatcher.on("refuseToLocalInvitation",(function(e){var t=e.extra;(e=o.outgoingLocalInvitations.get(e.callId))&&e.onRefuseReceived(t)})),o}ka(t,e);var r=la(t);return Ea(t,[{key:"invitationMessageHandler",value:function(e){var t=e.body,n=t.callId,r=t.extra;r=void 0===r?"":r;var i=t.type,o=void 0===(t=t.channel)?"":t,s=e.type;switch(t=e.peerId,e=e.serverReceivedTs,s){case"CallAccept":"ack"===i?this.invitationDispatcher.emit("acceptAckToRemoteInvitation",{callId:n}):"request"===i&&this.invitationDispatcher.emit("acceptToLocalInvitation",{callId:n,extra:r});break;case"CallInvite":this.invitationDispatcher.emit("remoteInvitationToManager",{callId:n,callerId:t,extra:r,channelId:o});break;case"CallCancel":if("0"===n){n="".concat("AgoraRTMLegacyEndcallCompatibleMessagePrefix","_").concat(o,"_").concat(r),this.getSession().emit("peerTextMessage",{peerId:t,properties:{serverReceivedTs:e,isOfflineMessage:!1},text:n});break}this.invitationDispatcher.emit("cancelToRemoteInvitation",{callId:n,extra:r});break;case"CallReject":this.invitationDispatcher.emit("refuseToLocalInvitation",{callId:n,extra:r});break;default:throw mm("invitationType",s)}}},{key:"genLocalInvitation",value:function(e){var t=this,n=new AC(e,this.getSession,this.logger);return n.localInvitationEnd$.subscribe((function(){t.outgoingLocalInvitations.delete(n.callId)})),this.outgoingLocalInvitations.set(n.callId,n),n}}]),t}(vb()),DC=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return jb(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),KB(e,t,{leading:r,maxWait:t,trailing:i})},wb,Ir,Pe;!function(e){e[e.JOINED=0]="JOINED",e[e.LEFT=1]="LEFT"}(Pe||(Pe={}));var Jr=S.ConnectionState,EC=(Ir=function(e){function t(e,i,o,s){W(this,t);var a=r.call(this,s,"RtmChannel",!0);return m(n(a),"onMemberCountUpdated",DC((function(e){e!==a.memberCount&&(a.memberCount=e,a.emit("MemberCountUpdated",e))}),1e3)),m(n(a),"getSession",void 0),m(n(a),"memberCount",0),m(n(a),"memberJoinedLru",new nc(void 0,{maxlen:1e4})),m(n(a),"memberLeftLru",new nc(void 0,{maxlen:1e4})),m(n(a),"memberJoinStateLru",new nc(void 0,{maxlen:1e4})),m(n(a),"attributesSeqLru",new nc(void 0,{maxlen:1e4})),m(n(a),"channelId",void 0),m(n(a),"client",void 0),m(n(a),"onAttributesUpdated",(function(e){var t=e.channelId,n=e.attributeMaps,r=e.seq;e=e.instance.toString();var i=a.attributesSeqLru.get(e);if((!i||r.greaterThan(i))&&(a.attributesSeqLru.set(e,r),t===a.channelId)){for(t={},r=0;r<n.length;r++){var o=n[r];e=o.key,i=o.ms;var s=o.value;if(o=o.origin,"string"!=typeof e||!U.isLong(i)||"string"!=typeof s||!ua(o))break;t[e]={value:s,lastUpdateUserId:o,lastUpdateTs:i.toNumber()}}a.emit("AttributesUpdated",t)}})),m(n(a),"onChannelTextMessage",(function(e){var t=e.memberId,n=e.text,r=e.properties;e.channelId===a.channelId&&a.emit("ChannelMessage",{text:n,messageType:S.MessageType.TEXT},t,r)})),m(n(a),"onChannelMediaMessage",(function(e){var t=e.memberId,n=e.properties,r=e.details,i=e.messageType;e.channelId===a.channelId&&("FILE"===i?a.emit("ChannelMessage",{messageType:S.MessageType.FILE,size:parseInt(na(r.media_size),10),description:na(r.media_description),fileName:na(r.media_filename),mediaId:na(r.media_id),thumbnail:new Blob([r.media_thumbnail])},t,n):"IMAGE"===i&&a.emit("ChannelMessage",{messageType:S.MessageType.IMAGE,size:parseInt(na(r.media_size),10),description:na(r.media_description),fileName:na(r.media_filename),mediaId:na(r.media_id),thumbnail:new Blob([r.media_thumbnail]),height:parseInt(na(r.media_height),10),width:parseInt(na(r.media_width),10),thumbnailHeight:parseInt(na(r.media_thumbnailheight),10),thumbnailWidth:parseInt(na(r.media_thumbnailwidth),10)},t,n))})),m(n(a),"onChannelRawMessage",(function(e){var t=e.desc,n=e.raw,r=e.memberId,i=e.properties;e.channelId===a.channelId&&a.emit("ChannelMessage",{messageType:S.MessageType.RAW,rawMessage:n,description:t},r,i)})),m(n(a),"onMemberNotice",(function(e){var t=e.memberId,n=e.type,r=e.size;if(e.channelId===a.channelId){var i=e.instance.toString();e=e.seq.toString();var o={MemberLeft:a.memberLeftLru,MemberJoined:a.memberJoinedLru,MemberCountUpdated:void 0}[n];if(o){if(o.has(i+e))return void a.log("received duplicated %s notice (seq: %s), channel '%s', member '%s'",n,e,a.channelId,t);if(o.set(i+e,void 0),"string"!=typeof t)return;if(t!==a.getSession().context.uid){if((i=a.memberJoinStateLru.get(t))===Pe.JOINED&&"MemberJoined"===n)return void a.log("received duplicated %s state (seq: %s), channel '%s', member '%s'",n,e,a.channelId,t);if(i===Pe.LEFT&&"MemberLeft"===n)return void a.log("received duplicated %s state (seq: %s), channel '%s', member '%s'",n,e,a.channelId,t)}a.memberJoinStateLru.set(t,"MemberJoined"===n?Pe.JOINED:Pe.LEFT)}a.info("Channel %s - %s, memberId: %s",n,a.channelId,"MemberCountUpdated"===n?"[unknown]":t),i=t===a.getSession().context.uid,"MemberLeft"===n&&ua(t)||"MemberJoined"===n&&ua(t)?(i||a.emit(n,t),a.onMemberCountUpdated(r)):"MemberCountUpdated"===n&&"number"==typeof r&&a.onMemberCountUpdated(r)}})),a.getSession=Fm(i),a.channelId=e,a.client=o,a.info("A channel created, id %s",e),a}ka(t,e);var r=la(t);return Ea(t,[{key:"join",value:function(){var e=K(w.mark((function e(){var t,n,r,i,o,s,a,u,c,l,f,h,p;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ua(this.channelId)){e.next=2;break}throw new L(["The %s in the arguments is invalid","channelId"],Gz);case 2:e.prev=2,t=this.getSession(),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(2),new H("The client is not logged in. Cannot do the operation",uq);case 9:if(!t.joinedChannels.has(this)){e.next=12;break}throw cb("ChnJoin",{cname:this.channelId,lts:U.fromNumber(Date.now()),userId:t.context.uid,elapse:db(t.startTime),errCode:tq,sid:Sa(t.instanceId)},null===(n=t.context.areaConfig)||void 0===n?void 0:n.EVENT_REPORT_DOMAIN[0],null===(r=t.context.areaConfig)||void 0===r?void 0:r.EVENT_REPORT_BACKUP_DOMAIN[0]),new H("The channel has joined. Cannot rejoin",tq);case 12:if(e.prev=12,this.log("Joining the channel %s",this.channelId),!this.hasOtherChannelJoined()){e.next=17;break}throw cb("ChnJoin",{cname:this.channelId,lts:U.fromNumber(Date.now()),userId:t.context.uid,elapse:db(t.startTime),errCode:vq,sid:Sa(t.instanceId)},null===(u=t.context.areaConfig)||void 0===u?void 0:u.EVENT_REPORT_DOMAIN[0],null===(c=t.context.areaConfig)||void 0===c?void 0:c.EVENT_REPORT_BACKUP_DOMAIN[0]),new H("A channel of the same channel ID has already joined. Cannot rejoin",vq);case 17:if(20!==t.joinedChannels.size){e.next=20;break}throw cb("ChnJoin",{cname:this.channelId,lts:U.fromNumber(Date.now()),userId:t.context.uid,elapse:db(t.startTime),errCode:sq,sid:Sa(t.instanceId)},null===(l=t.context.areaConfig)||void 0===l?void 0:l.EVENT_REPORT_DOMAIN[0],null===(f=t.context.areaConfig)||void 0===f?void 0:f.EVENT_REPORT_BACKUP_DOMAIN[0]),new gb("The joined channels has exceeded the limit of 20",sq);case 20:return cb("ChnJoin",{cname:this.channelId,lts:U.fromNumber(Date.now()),userId:t.context.uid,elapse:db(t.startTime),errCode:0,sid:Sa(t.instanceId)},null===(i=t.context.areaConfig)||void 0===i?void 0:i.EVENT_REPORT_DOMAIN[0],null===(o=t.context.areaConfig)||void 0===o?void 0:o.EVENT_REPORT_BACKUP_DOMAIN[0]),e.next=23,t.requestChannelJoin(this,this.channelId);case 23:cb("ChnJoinRes",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:db(t.startTime),errCode:0,sid:Sa(t.instanceId),serverErrCode:0,userId:t.context.uid},null===(s=t.context.areaConfig)||void 0===s?void 0:s.EVENT_REPORT_DOMAIN[0],null===(a=t.context.areaConfig)||void 0===a?void 0:a.EVENT_REPORT_BACKUP_DOMAIN[0]),this.info("The channel %s joined successfully",this.channelId),t.on("channelTextMessage",this.onChannelTextMessage),t.on("channelRawMessage",this.onChannelRawMessage),t.on("channelMediaMessage",this.onChannelMediaMessage),t.on("memberNotice",this.onMemberNotice),t.on("channelAttributesUpdated",this.onAttributesUpdated),e.next=41;break;case 32:if(e.prev=32,e.t1=e.catch(12),this.logError(e.t1),!wa(e.t1)){e.next=37;break}throw e.t1;case 37:if(!Na(e.t1)){e.next=40;break}throw cb("ChnJoinRes",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:db(t.startTime),errCode:rq,sid:Sa(t.instanceId),serverErrCode:0,userId:t.context.uid},null===(h=t.context.areaConfig)||void 0===h?void 0:h.EVENT_REPORT_DOMAIN[0],null===(p=t.context.areaConfig)||void 0===p?void 0:p.EVENT_REPORT_BACKUP_DOMAIN[0]),new bb(["Join channel %s timed out",this.channelId],rq);case 40:throw new Pc(["The channel %s join failure",this.channelId],{code:qq,originalError:e.t1});case 41:case"end":return e.stop()}}),e,this,[[2,6],[12,32]])})));return function(){return e.apply(this,arguments)}}()},{key:"leave",value:function(){var e=K(w.mark((function e(){var t,n,r,i,o,s,a;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,r=this.getSession(),e.next=7;break;case 4:throw e.prev=4,e.t0=e.catch(0),new H("The client is not logged in. Cannot do the operation",Iz);case 7:if(r.joinedChannels.has(this)){e.next=9;break}throw new H("The channel does not join. Cannot do the operation",Hz);case 9:e.prev=9,r.requestChannelLeave(this,this.channelId),this.memberLeftLru.empty(),this.memberJoinedLru.empty(),this.attributesSeqLru.empty(),this.memberJoinStateLru.empty(),this.memberCount=0,r.removeListener("channelTextMessage",this.onChannelTextMessage),r.removeListener("channelRawMessage",this.onChannelRawMessage),r.removeListener("channelMediaMessage",this.onChannelMediaMessage),r.removeListener("memberNotice",this.onMemberNotice),r.removeListener("channelAttributesUpdated",this.onAttributesUpdated),e.next=32;break;case 23:if(e.prev=23,e.t1=e.catch(9),this.logError(e.t1),!wa(e.t1)){e.next=30;break}throw void 0===e.t1.code&&(e.t1.code=xq),cb("ChnLeave",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:db(r.startTime),errCode:xq,sid:Sa(r.instanceId),userId:r.context.uid},null===(s=r.context.areaConfig)||void 0===s?void 0:s.EVENT_REPORT_DOMAIN[0],null===(a=r.context.areaConfig)||void 0===a?void 0:a.EVENT_REPORT_BACKUP_DOMAIN[0]),e.t1;case 30:throw cb("ChnLeave",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:db(r.startTime),errCode:wq,sid:Sa(r.instanceId),userId:r.context.uid},null===(i=r.context.areaConfig)||void 0===i?void 0:i.EVENT_REPORT_DOMAIN[0],null===(o=r.context.areaConfig)||void 0===o?void 0:o.EVENT_REPORT_BACKUP_DOMAIN[0]),new Pc("The channel leave failure",{code:wq,originalError:e.t1});case 32:cb("ChnLeave",{cname:this.channelId,lts:U.fromNumber(Date.now()),elapse:db(r.startTime),errCode:0,sid:Sa(r.instanceId),userId:r.context.uid},null===(t=r.context.areaConfig)||void 0===t?void 0:t.EVENT_REPORT_DOMAIN[0],null===(n=r.context.areaConfig)||void 0===n?void 0:n.EVENT_REPORT_BACKUP_DOMAIN[0]);case 33:case"end":return e.stop()}}),e,this,[[0,4],[9,23]])})));return function(){return e.apply(this,arguments)}}()},{key:"sendMessage",value:function(){var e=K(w.mark((function e(t){var n,r,i,o,s,a=this,u=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=1<u.length&&void 0!==u[1]?u[1]:{},r=n.enableHistoricalMessaging,i=void 0!==r&&r,ym(t,qh),e.prev=2,o=this.getSession(),e.next=9;break;case 6:throw e.prev=6,e.t0=e.catch(2),new H("The client is not logged in. Cannot do the operation",Uf);case 9:if(o.joinedChannels.has(this)){e.next=11;break}throw new H("The channel does not join. Cannot do the operation",Uf);case 11:if(this.client.connectionState!==Jr.RECONNECTING){e.next=16;break}return s=Date.now(),e.next=15,new Promise((function(e,n){var r=function(){var r=K(w.mark((function r(){var u;return w.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u=Date.now()-s,r.prev=1,r.next=4,pg({message:t,peerId:a.channelId,toPeer:!1,session:a.getSession(),errorCodes:{NOT_LOGGED_IN:Uf,TOO_OFTEN:mq},diff:u,logger:a.logger,options:{enableHistoricalMessaging:i,enableOfflineMessaging:!1}});case 4:e(),r.next=12;break;case 7:r.prev=7,r.t0=r.catch(1),Na(r.t0)&&n(new bb(Md(a.name,"sendMessageToPeer",1e4),Gk)),wa(r.t0)&&n(r.t0),n(new ca("Channel message send failure",{code:Tf,originalError:r.t0}));case 12:return r.prev=12,clearTimeout(o),r.finish(12);case 15:case"end":return r.stop()}}),r,null,[[1,7,12,15]])})));return function(){return r.apply(this,arguments)}}();a.client.internalEmitter.once("RECONNECTED",r);var o=setTimeout((function(){a.client.internalEmitter.off("RECONNECTED",r),n(new bb(Md(a.name,"sendMessageToPeer",1e4),Gk))}),9e3)}));case 15:return e.abrupt("return");case 16:if(this.client.connectionState===Jr.CONNECTED){e.next=18;break}throw new H("The client is not logged in. Cannot do the operation",Uf);case 18:return e.prev=18,e.next=21,pg({message:t,peerId:this.channelId,toPeer:!1,session:this.getSession(),errorCodes:{NOT_LOGGED_IN:Uf,TOO_OFTEN:mq},diff:0,logger:this.logger,options:{enableHistoricalMessaging:i,enableOfflineMessaging:!1}});case 21:e.next=31;break;case 23:if(e.prev=23,e.t1=e.catch(18),!Na(e.t1)){e.next=27;break}throw new bb(Md(this.name,"sendMessage",1e4),Gk);case 27:if(!wa(e.t1)){e.next=30;break}throw this.logError(e.t1),e.t1;case 30:throw new Pc("The channel message send failure",Tf);case 31:case"end":return e.stop()}}),e,this,[[2,6],[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getMembers",value:function(){var e=K(w.mark((function e(){var t,n,r;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.prev=1,t=this.getSession(),e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(1),new H("The client is not logged in. Cannot do the operation",Dz);case 8:if(t.joinedChannels.has(this)){e.next=10;break}throw new H("The channel does not join. Cannot do the operation",Cz);case 10:return n=this.getSession().requestChannelMemberList(this.channelId),e.next=13,n.pipe(Z((function(e){return e.memberInfos.map((function(e){return e.account}))}))).toPromise();case 13:return r=e.sent,this.info("Channel %s - get members success, %o",this.channelId,r),e.abrupt("return",r);case 18:if(e.prev=18,e.t1=e.catch(0),!wa(e.t1)){e.next=23;break}throw this.logError(e.t1),e.t1;case 23:throw new Pc("The channel members get failure",Az);case 24:case"end":return e.stop()}}),e,this,[[0,18],[1,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"hasOtherChannelJoined",value:function(){var e=this;return!this.getSession().joinedChannels.has(this)&&Array.from(this.getSession().joinedChannels).some((function(t){return t.channelId===e.channelId}))}}]),t}(vb()),wb=Ir,da(wb.prototype,"join",[ia],Object.getOwnPropertyDescriptor(wb.prototype,"join"),wb.prototype),da(wb.prototype,"leave",[ia],Object.getOwnPropertyDescriptor(wb.prototype,"leave"),wb.prototype),da(wb.prototype,"sendMessage",[ia],Object.getOwnPropertyDescriptor(wb.prototype,"sendMessage"),wb.prototype),da(wb.prototype,"getMembers",[ia],Object.getOwnPropertyDescriptor(wb.prototype,"getMembers"),wb.prototype),wb),C,Kr,Cb=S.ConnectionChangeReason,Q=S.ConnectionState,Lr={DISCONNECTED:1,CONNECTING:2,CONNECTED:3,RECONNECTING:4,ABORTED:5},FC={LOGIN:1,LOGIN_SUCCESS:2,LOGIN_FAILURE:3,LOGIN_TIMEOUT:4,INTERRUPTED:5,LOGOUT:6,BANNED_BY_SERVER:7,REMOTE_LOGIN:8},GC=(Kr=function(e){function t(e,i,o,s,a){W(this,t);var u=r.call(this,i,"RtmClient",!0);return m(n(u),"connectionState",Q.DISCONNECTED),m(n(u),"internalEmitter",new aa),m(n(u),"context",void 0),m(n(u),"attributes",{}),m(n(u),"loginPromise",void 0),m(n(u),"attributeDrafts",new Set),m(n(u),"session",void 0),m(n(u),"lastLoginTime",void 0),m(n(u),"reconnId",0),m(n(u),"channelAttributesCacheLru",new nc(void 0,{maxlen:1e4})),m(n(u),"invitationManager",void 0),m(n(u),"subscribedPeerStatusCache",{}),m(n(u),"peerStatusSeqLru",new nc(void 0,{maxlen:1e4})),m(n(u),"peerUnreachableTimers",{}),m(n(u),"mediaTaskManager",void 0),m(n(u),"config",void 0),m(n(u),"setParameters",void 0),m(n(u),"updateConfig",void 0),m(n(u),"userDropHandler",(function(e){if(u.connectionState!==Q.ABORTED)switch(e){case 11:u.logError("Kicked off by remote session"),u.onConnectionStateChanged(Q.ABORTED,Cb.REMOTE_LOGIN);break;case 14:case 15:case 16:u.logError("Server banned because of illegal ".concat({14:"User ID",15:"IP",16:"Channel Name"}[e])),u.onConnectionStateChanged(Q.ABORTED,Cb.BANNED_BY_SERVER);break;default:u.logError("User kicked off for unknown code: ".concat(e)),u.onConnectionStateChanged(Q.ABORTED,Cb.INTERRUPTED)}})),u.context=new qC(e,i),u.mediaTaskManager=new zr(i),u.config=o,u.internalEmitter.setMaxListeners(512),u.setParameters=s.bind(n(u)),u.updateConfig=s.bind(n(u)),void 0!==a&&u.context.setAreaConfig(a),u.invitationManager=new CC((function(){return u.session}),i),u.invitationManager.on("remoteInvitationInstance",(function(e){u.emit("RemoteInvitationReceived",e)})),u}ka(t,e);var r=la(t);return Ea(t,[{key:"renewToken",value:function(){var e=K(w.mark((function e(t){var n,r,i,o=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t&&0!==t.length){e.next=2;break}throw new L("Invalid argument",Qz);case 2:if(this.connectionState!==Q.ABORTED){e.next=5;break}return e.next=5,new Promise((function(){}));case 5:if(this.connectionState===Q.CONNECTED||this.connectionState===Q.RECONNECTING){e.next=7;break}throw new H("The client is not logged in",Tz);case 7:if(void 0!==this.session){e.next=9;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 9:return e.prev=9,n=this.context.token,this.context.token=t,e.next=14,this.session.connection.apClient.getApEdgeInfo$(!1).pipe(rd((function(){return Error("No available edge address to connect")})),ae((function(e){return e.pipe(Y((function(e){if(wa(e))throw e})),Wc(1500),Pa(4))})),Pa(1),Za(1e4),Ga((function(e){return Na(e)&&o.warn("renewToken timed out"),ba(e)}))).toPromise();case 14:r=e.sent,i=r.ticket,e.next=27;break;case 18:if(e.prev=18,e.t0=e.catch(9),this.context.token=n,e.t0.code!==zq&&e.t0.code!==Aq){e.next=23;break}throw new Ke("Invalid token",Sz);case 23:if(e.t0.code!==uh){e.next=25;break}throw new Ke("The token expired",Rz);case 25:if(!Na(e.t0)){e.next=27;break}throw new bb("Renew token timed out",Pz);case 27:this.session.curLoginSockets.filter((function(e){return void 0!==e})).forEach((function(e){return e.ticket=i}));case 28:case"end":return e.stop()}}),e,this,[[9,18]])})));return function(t){return e.apply(this,arguments)}}()},{key:"queryPeersOnlineStatus",value:function(){var e=K(w.mark((function e(t){var n,r,i=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===Q.CONNECTED){e.next=2;break}throw new H("The client is not logged in",Oz);case 2:if(void 0!==this.session){e.next=4;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(!(!Array.isArray(t)||0===t.length||t.some((function(e){return!ua(e)}))||256<t.length)){e.next=6;break}throw new L("invalid arguments",Eq);case 6:return e.next=8,this.session.requestPeersOnlineStatus(t).toPromise();case 8:return n=e.sent,r=oc(sk(n.userInfos,"account"),(function(e){return!!e.ts})),Object.keys(r).forEach((function(e){if(e in i.subscribedPeerStatusCache&&i.subscribedPeerStatusCache[e]!==S.PeerOnlineState.UNREACHABLE){var t=r[e]?S.PeerOnlineState.ONLINE:S.PeerOnlineState.OFFLINE;i.emit("PeersOnlineStatusChanged",m({},e,t)),i.subscribedPeerStatusCache[e]=t}})),e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getChannelMemberCount",value:function(){var e=K(w.mark((function e(t){var n,r,i,o,s,a,u,c=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===Q.CONNECTED){e.next=2;break}throw new H("The client is not logged in",zz);case 2:if(void 0!==this.session){e.next=4;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(t)&&t.every((function(e){return"string"==typeof e}))&&0!==t.length){e.next=6;break}throw new L("Invalid arguments: channelIds",nq);case 6:if(!(32<t.length)){e.next=8;break}throw new L("getChannelMemberCount exceed limit of 32 channelIds",yz);case 8:n=0;case 9:if(!(n<t.length)){e.next=16;break}if(ua(r=t[n])){e.next=13;break}throw new L(["getChannelMemberCount channel id %s is invalid",r],nq);case 13:n++,e.next=9;break;case 16:return e.next=18,this.session.requestGetChannelMemberCount(t).toPromise();case 18:for(i=e.sent,o=i.groupInfos,s={},a=function(e){var t=(e=o[e]).group,n=e.memberCount;ua(t)&&"number"==typeof n&&(c.session.joinedChannels.forEach((function(e){e.channelId===t&&e.onMemberCountUpdated(n)})),s[t]=n)},u=0;u<o.length;u++)a(u);return e.abrupt("return",s);case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setLocalUserAttributes",value:function(){var e=K(w.mark((function e(t){var n,r;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ff({attributes:t,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),this.connectionState===Q.CONNECTED){e.next=3;break}throw new H("The client is not logged in",Qb);case 3:if(void 0!==this.session){e.next=5;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 5:return n=this.session.requestSetLocalUserAttributes(t).toPromise(),r={attribute:t,promise:n},this.attributeDrafts.add(r),e.prev=8,e.next=11,n;case 11:this.attributes=t,e.next=19;break;case 14:if(e.prev=14,e.t0=e.catch(8),!wa(e.t0)){e.next=18;break}throw e.t0;case 18:throw new L("arguments is not valid",Fa);case 19:return e.prev=19,this.attributeDrafts.delete(r),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[8,14,19,22]])})));return function(t){return e.apply(this,arguments)}}()},{key:"setChannelAttributes",value:function(){var e=K(w.mark((function e(t,n){var r,i,o,s,a,u=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=2<u.length&&void 0!==u[2]?u[2]:{},i=r.enableNotificationToChannelMembers,o=void 0!==i&&i,ff({attributes:n,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:32768}),this.connectionState===Q.CONNECTED){e.next=4;break}throw new H("The client is not logged in",Qb);case 4:if(void 0!==this.session){e.next=6;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return s=this.session.requestSetChannelAttributes(t,n,o).toPromise(),e.prev=7,e.next=10,s;case 10:a=oc(n,(function(e){return new Blob([e]).size})),this.channelAttributesCacheLru.set(t,a),e.next=19;break;case 14:if(e.prev=14,e.t0=e.catch(7),!wa(e.t0)){e.next=18;break}throw e.t0;case 18:throw new L("arguments is not valid",Fa);case 19:case"end":return e.stop()}}),e,this,[[7,14]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"addOrUpdateLocalUserAttributes",value:function(){var e=K(w.mark((function e(t){var n,r,i;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Ja(Ja({},this.attributes),t),ff({attributes:t,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),ff({attributes:n,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:16384}),this.connectionState===Q.CONNECTED){e.next=5;break}throw new H("The client is not logged in",Qb);case 5:if(void 0!==this.session){e.next=7;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 7:return r=this.session.requestAddOrUpdateLocalUserAttributes(t).toPromise(),i={attribute:n,promise:r},this.attributeDrafts.add(i),e.prev=10,e.next=13,r;case 13:this.attributes=n,e.next=21;break;case 16:if(e.prev=16,e.t0=e.catch(10),!wa(e.t0)){e.next=20;break}throw e.t0;case 20:throw new L("arguments is not valid",Eq);case 21:return e.prev=21,this.attributeDrafts.delete(i),e.finish(21);case 24:case"end":return e.stop()}}),e,this,[[10,16,21,24]])})));return function(t){return e.apply(this,arguments)}}()},{key:"addOrUpdateChannelAttributes",value:function(){var e=K(w.mark((function e(t,n){var r,i,o,s,a,u,c,l=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=2<l.length&&void 0!==l[2]?l[2]:{},i=r.enableNotificationToChannelMembers,o=void 0!==i&&i,s=this.channelAttributesCacheLru.get(t,{}),a=oc(n,(function(e){return new Blob([e]).size})),u=Ja(Ja({},s),a),ff({attributes:n,attrSizeMap:u,maxAttrValueSize:8192,maxAttrsCount:32,maxTotalSize:32768}),this.connectionState===Q.CONNECTED){e.next=7;break}throw new H("The client is not logged in",Qb);case 7:if(void 0!==this.session){e.next=9;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 9:return c=this.session.requestAddOrUpdateChannelAttributes(t,n,o).toPromise(),e.prev=10,e.next=13,c;case 13:this.channelAttributesCacheLru.set(t,u),e.next=21;break;case 16:if(e.prev=16,e.t0=e.catch(10),!wa(e.t0)){e.next=20;break}throw e.t0;case 20:throw new L("arguments is not valid",Fa);case 21:case"end":return e.stop()}}),e,this,[[10,16]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteLocalUserAttributesByKeys",value:function(){var e=K(w.mark((function e(t){var n,r,i,o;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)&&0!==t.length&&!t.some((function(e){return 0===e.length}))){e.next=2;break}throw new H("arguments is not valid",Fa);case 2:if(this.connectionState===Q.CONNECTED){e.next=4;break}throw new H("The client is not logged in",Qb);case 4:if(void 0!==this.session){e.next=6;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return n=this.session.requestDeleteLocalUserAttributesByKeys(t).toPromise(),r={attribute:rg(this.attributes,t),promise:n},this.attributeDrafts.add(r),e.prev=9,e.next=12,n;case 12:for(i=0;i<t.length;i++)o=t[i],delete this.attributes[o];e.next=20;break;case 15:if(e.prev=15,e.t0=e.catch(9),!wa(e.t0)){e.next=19;break}throw e.t0;case 19:throw new L("arguments is not valid",Fa);case 20:return e.prev=20,this.attributeDrafts.delete(r),e.finish(20);case 23:case"end":return e.stop()}}),e,this,[[9,15,20,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteChannelAttributesByKeys",value:function(){var e=K(w.mark((function e(t,n){var r,i,o,s,a,u,c,l=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=2<l.length&&void 0!==l[2]?l[2]:{},i=r.enableNotificationToChannelMembers,o=void 0!==i&&i,Array.isArray(n)&&0!==n.length&&ua(t)&&!n.some((function(e){return 0===e.length||512<e.length}))){e.next=3;break}throw new H("arguments is not valid",Fa);case 3:if(this.connectionState===Q.CONNECTED){e.next=5;break}throw new H("The client is not logged in",Qb);case 5:if(void 0!==this.session){e.next=7;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 7:return s=this.session.requestDeleteChannelAttributesByKeys(t,n,o).toPromise(),e.prev=8,e.next=11,s;case 11:if(a=this.channelAttributesCacheLru.get(t))for(u=0;u<n.length;u++)c=n[u],delete a[c];e.next=20;break;case 15:if(e.prev=15,e.t0=e.catch(8),!wa(e.t0)){e.next=19;break}throw e.t0;case 19:throw new L("arguments is not valid",Fa);case 20:case"end":return e.stop()}}),e,this,[[8,15]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"clearLocalUserAttributes",value:function(){var e=K(w.mark((function e(){var t,n;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===Q.CONNECTED){e.next=2;break}throw new H("The client is not logged in",Qb);case 2:if(void 0!==this.session){e.next=4;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return t=this.session.requestClearLocalUserAttributes().toPromise(),n={attribute:{},promise:t},this.attributeDrafts.add(n),e.prev=7,e.next=10,t;case 10:this.attributes={},e.next=18;break;case 13:if(e.prev=13,e.t0=e.catch(7),!wa(e.t0)){e.next=17;break}throw e.t0;case 17:throw new L("arguments is not valid",Fa);case 18:return e.prev=18,this.attributeDrafts.delete(n),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[7,13,18,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"clearChannelAttributes",value:function(){var e=K(w.mark((function e(t){var n,r,i,o,s=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=1<s.length&&void 0!==s[1]?s[1]:{},r=n.enableNotificationToChannelMembers,i=void 0!==r&&r,this.connectionState===Q.CONNECTED){e.next=3;break}throw new H("The client is not logged in",Qb);case 3:if(void 0!==this.session){e.next=5;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 5:return o=this.session.requestClearChannelAttributes(t,i).toPromise(),e.prev=6,e.next=9,o;case 9:this.channelAttributesCacheLru.delete(t),e.next=17;break;case 12:if(e.prev=12,e.t0=e.catch(6),!wa(e.t0)){e.next=16;break}throw e.t0;case 16:throw new L("arguments is not valid",Fa);case 17:case"end":return e.stop()}}),e,this,[[6,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserAttributes",value:function(){var e=K(w.mark((function e(t){var n,r,i;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ua(t)){e.next=2;break}throw new L("Not a valid user ID",Fa);case 2:if(this.connectionState===Q.CONNECTED){e.next=4;break}throw new H("The client is not logged in",Qb);case 4:if(void 0!==this.session){e.next=6;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return e.prev=6,e.next=9,this.session.requestGetUserAttributeKeys(t).toPromise();case 9:return n=e.sent,r=n.keys,e.next=13,this.session.requestGetUserAttributesByKeys(t,r.slice(0,512)).toPromise();case 13:i=e.sent,e.next=21;break;case 16:if(e.prev=16,e.t0=e.catch(6),!wa(e.t0)){e.next=20;break}throw e.t0;case 20:throw new L("arguments is not valid",Fa);case 21:return e.abrupt("return",yp(i.attributeInfos.map((function(e){return[e.key,e.value]}))));case 22:case"end":return e.stop()}}),e,this,[[6,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getChannelAttributes",value:function(){var e=K(w.mark((function e(t){var n,r,i,o,s,a,u,c,l,f,h;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ua(t)){e.next=2;break}throw new L("Not a valid channel ID",Fa);case 2:if(this.connectionState===Q.CONNECTED){e.next=4;break}throw new H("The client is not logged in",Qb);case 4:if(void 0!==this.session){e.next=6;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 6:return e.prev=6,e.next=9,this.session.requestGetChannelAttributesKeys(t).toPromise();case 9:return n=e.sent,r=n.keys,e.next=13,this.session.requestGetChannelAttributesByKeys(t,r).toPromise();case 13:i=e.sent,o=i.attributeMaps,e.next=22;break;case 17:if(e.prev=17,e.t0=e.catch(6),!wa(e.t0)){e.next=21;break}throw e.t0;case 21:throw new L("arguments is not valid",Fa);case 22:s={},a=0;case 24:if(!(a<o.length)){e.next=32;break}if(u=o[a],c=u.key,l=u.ms,f=u.value,h=u.origin,"string"==typeof c&&U.isLong(l)&&"string"==typeof f&&ua(h)){e.next=28;break}return e.abrupt("break",32);case 28:s[c]={value:f,lastUpdateUserId:h,lastUpdateTs:l.toNumber()};case 29:a++,e.next=24;break;case 32:return this.channelAttributesCacheLru.set(t,oc(s,(function(e){return new Blob([e.value]).size}))),e.abrupt("return",s);case 34:case"end":return e.stop()}}),e,this,[[6,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getChannelAttributesByKeys",value:function(){var e=K(w.mark((function e(t,n){var r,i,o,s,a,u,c,l,f,h;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===Q.CONNECTED){e.next=2;break}throw new H("The client is not logged in",Qb);case 2:if(void 0!==this.session){e.next=4;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return lm(t,n),e.prev=5,e.next=8,this.session.requestGetChannelAttributesByKeys(t,n).toPromise();case 8:r=e.sent,i=r.attributeMaps,e.next=17;break;case 12:if(e.prev=12,e.t0=e.catch(5),!wa(e.t0)){e.next=16;break}throw e.t0;case 16:throw new L("arguments is not valid",Fa);case 17:o={},s=this.channelAttributesCacheLru.get(t,{}),a=0;case 20:if(!(a<i.length)){e.next=29;break}if(u=i[a],c=u.key,l=u.ms,f=u.value,h=u.origin,"string"==typeof c&&U.isLong(l)&&"string"==typeof f&&ua(h)){e.next=24;break}return e.abrupt("break",29);case 24:s[c]=new Blob([f]).size,o[c]={value:f,lastUpdateUserId:h,lastUpdateTs:l.toNumber()};case 26:a++,e.next=20;break;case 29:return this.channelAttributesCacheLru.set(t,s),e.abrupt("return",o);case 31:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getUserAttributesByKeys",value:function(){var e=K(w.mark((function e(t,n){var r;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===Q.CONNECTED){e.next=2;break}throw new H("The client is not logged in",Qb);case 2:if(void 0!==this.session){e.next=4;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:return lm(t,n),e.prev=5,e.next=8,this.session.requestGetUserAttributesByKeys(t,n).toPromise();case 8:r=e.sent,e.next=16;break;case 11:if(e.prev=11,e.t0=e.catch(5),!wa(e.t0)){e.next=15;break}throw e.t0;case 15:throw new L("arguments is not valid",Fa);case 16:return e.abrupt("return",yp(r.attributeInfos.map((function(e){return[e.key,e.value]}))));case 17:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=K(w.mark((function e(t){var n,r,i,o,s,a,u;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=lg(),o=t.token,t.token===this.context.appId&&(o=void 0),cb("Session",{appId:this.context.appId,did:navigator.userAgent,elapse:db(this.session&&this.session.startTime),index:{index1:t.uid,index2:this.context.appId,index3:"enableLogUpload=".concat(this.config.enableLogUpload)},installId:Sf,lts:U.fromNumber(Date.now()),os:7,sid:Sa(i),token:o||"",userId:t.uid,ver:"1.4.2",buildno:801,subVersion:301,version:5},null===(n=this.context.areaConfig)||void 0===n?void 0:n.EVENT_REPORT_DOMAIN[0],null===(r=this.context.areaConfig)||void 0===r?void 0:r.EVENT_REPORT_BACKUP_DOMAIN[0]),md(t)&&ua(t.uid)){e.next=6;break}throw new L("not a valid user id",th);case 6:if("string"!=typeof o||!o){e.next=10;break}this.context.token=o,e.next=12;break;case 10:if("string"==typeof o||null==o){e.next=12;break}throw new L('The "token" is not a valid string.',th);case 12:return s=Date.now(),this.context.sid=Sa(i),this.loginPromise=this.loginImpl({uid:t.uid,instanceId:i}),this.info("RTM Client logging in as ".concat(t.uid)),e.prev=16,e.next=19,this.loginPromise;case 19:e.next=26;break;case 21:throw e.prev=21,e.t0=e.catch(16),wa(e.t0)&&cb("Link",{ackedServerIp:"",destServerIp:"",ec:e.t0.code||1,sc:e.t0.serverCode,elapse:db(this.session&&this.session.startTime),lts:U.fromNumber(Date.now()),responseTime:Date.now()-s,sid:Sa(i),userId:t.uid},null===(a=this.context.areaConfig)||void 0===a?void 0:a.EVENT_REPORT_DOMAIN[0],null===(u=this.context.areaConfig)||void 0===u?void 0:u.EVENT_REPORT_BACKUP_DOMAIN[0]),this.context.token=void 0,e.t0;case 26:return e.prev=26,this.loginPromise=void 0,e.finish(26);case 29:case"end":return e.stop()}}),e,this,[[16,21,26,29]])})));return function(t){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=K(w.mark((function e(){var t,n;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.loginPromise){e.next=3;break}return e.next=3,this.loginPromise;case 3:if(this.connectionState!==Q.DISCONNECTED){e.next=6;break}throw this.logError("Already in logout state"),new H("Logout failure. The client has already been logged out",Bq);case 6:if(this.connectionState!==Q.ABORTED){e.next=10;break}return this.info('Reset connection state from "ABORTED" to "DISCONNECTED"'),this.onConnectionStateChanged(Q.DISCONNECTED,Cb.LOGOUT),e.abrupt("return");case 10:if(void 0!==this.session){e.next=13;break}return this.onConnectionStateChanged(Q.DISCONNECTED,Cb.LOGOUT),e.abrupt("return");case 13:return cb("Logout",{elapse:db(this.session.startTime),lts:U.fromNumber(Date.now()),sid:Sa(this.session.instanceId),userId:this.context.uid},null===(t=this.context.areaConfig)||void 0===t?void 0:t.EVENT_REPORT_DOMAIN[0],null===(n=this.context.areaConfig)||void 0===n?void 0:n.EVENT_REPORT_BACKUP_DOMAIN[0]),e.next=16,this.session.logoutHandler();case 16:this.onConnectionStateChanged(Q.DISCONNECTED,Cb.LOGOUT),this.log("Log out success");case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"logoutSync",value:function(){var e,t,n=this;if(this.connectionState===Q.DISCONNECTED)throw this.logError("Already in logout state"),new H("Logout failure. The client has already been logged out",Bq);this.connectionState===Q.ABORTED?this.info('Reset connection state from "ABORTED" to "DISCONNECTED"'):void 0!==this.session&&(cb("Logout",{elapse:db(this.session.startTime),lts:U.fromNumber(Date.now()),sid:Sa(this.session.instanceId),userId:this.context.uid},null===(e=this.context.areaConfig)||void 0===e?void 0:e.EVENT_REPORT_DOMAIN[0],null===(t=this.context.areaConfig)||void 0===t?void 0:t.EVENT_REPORT_BACKUP_DOMAIN[0]),this.session.logoutHandler().then((function(){n.log("Log out success")}))),this.onConnectionStateChanged(Q.DISCONNECTED,Cb.LOGOUT)}},{key:"sendMessageToPeer",value:function(){var e=K(w.mark((function e(t,n){var r,i,o,s,a,u,c=this,l=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=2<l.length&&void 0!==l[2]?l[2]:{},i=r.enableOfflineMessaging,o=void 0!==i&&i,s=r.enableHistoricalMessaging,a=void 0!==s&&s,ym(t,ge),this.connectionState!==Q.RECONNECTING){e.next=5;break}return u=Date.now(),e.abrupt("return",new Promise((function(e,r){var i=function(){var i=K(w.mark((function i(){var l;return w.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(void 0!==c.session){i.next=2;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 2:return l=Date.now()-u,i.prev=3,i.t0=e,i.next=7,pg({message:t,peerId:n,toPeer:!0,session:c.session,errorCodes:{NOT_LOGGED_IN:Jk,TOO_OFTEN:Dq},diff:l,logger:c.logger,options:{enableHistoricalMessaging:a,enableOfflineMessaging:o}});case 7:i.t1=i.sent,(0,i.t0)(i.t1),i.next=16;break;case 11:i.prev=11,i.t2=i.catch(3),Na(i.t2)&&r(new bb(Md(c.name,"sendMessageToPeer",1e4),Hk)),wa(i.t2)&&r(i.t2),r(new ca("Peer-to-peer message send failure",{code:Cq,originalError:i.t2}));case 16:return i.prev=16,clearTimeout(s),i.finish(16);case 19:case"end":return i.stop()}}),i,null,[[3,11,16,19]])})));return function(){return i.apply(this,arguments)}}();c.internalEmitter.once("RECONNECTED",i);var s=setTimeout((function(){c.internalEmitter.off("RECONNECTED",i),r(new bb(Md(c.name,"sendMessageToPeer",1e4),Hk))}),9e3)})));case 5:if(this.connectionState===Q.CONNECTED){e.next=7;break}throw new H("Failed to send the peer-to-peer message. The client is not logged in",Jk);case 7:if(void 0!==this.session){e.next=9;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 9:return e.prev=9,e.next=12,pg({message:t,peerId:n,toPeer:!0,session:this.session,errorCodes:{NOT_LOGGED_IN:Jk,TOO_OFTEN:Dq},diff:0,logger:this.logger,options:{enableHistoricalMessaging:a,enableOfflineMessaging:o}});case 12:return e.abrupt("return",e.sent);case 15:if(e.prev=15,e.t0=e.catch(9),!Na(e.t0)){e.next=19;break}throw new bb(Md(this.name,"sendMessageToPeer",1e4),Hk);case 19:if(!wa(e.t0)){e.next=21;break}throw e.t0;case 21:throw new ca("Peer-to-peer message send failure",{code:Cq,originalError:e.t0});case 22:case"end":return e.stop()}}),e,this,[[9,15]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createChannel",value:function(e){var t=this;if(!ua(e))throw new L(["The %s in the arguments is invalid",Object.keys({channelId:e})[0]],wz);return new EC(e,(function(){return t.session}),this,this.logger)}},{key:"createLocalInvitation",value:function(e){if(!ua(e))throw new L(["The %s in the arguments is invalid",Object.keys({calleeId:e})[0]],rc);return this.invitationManager.genLocalInvitation(e)}},{key:"subscribePeersOnlineStatus",value:function(){var e=K(w.mark((function e(t){var n,r,i,o,s,a,u,c,l,f,h,p,d,v=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===Q.CONNECTED){e.next=2;break}throw new H("The client is not logged in",Kk);case 2:if(void 0!==this.session){e.next=4;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(t)&&0!==t.length){e.next=6;break}throw new L("Invalid arguments: peerIds",Vf);case 6:n=0;case 7:if(!(n<t.length)){e.next=14;break}if(ua(r=t[n])){e.next=11;break}throw new L(["subscribePeersOnlineStatus peer id %s is invalid",r],Vf);case 11:n++,e.next=7;break;case 14:if(!(512<(i=t&&t.length?fk(t):[]).length+Object.keys(this.subscribedPeerStatusCache).length)){e.next=17;break}throw new gb("Subscribed peers overflows",Gq);case 17:return e.next=19,this.session.requestSubscribePeersOnlineStatus(i).toPromise();case 19:o=e.sent,s=o.errors,a=[],u=[],c=0;case 24:if(!(c<s.length)){e.next=32;break}if(l=s[c],f=l.code,"string"==typeof(h=l.account)){e.next=28;break}throw new ca("Returned account is invalid",Fq);case 28:0!==f&&a.push(h);case 29:c++,e.next=24;break;case 32:for(p=0;p<i.length;p++)d=i[p],a.includes(d)||(u.push(d),this.subscribedPeerStatusCache[d]=void 0);if(this.session.requestPeersOnlineStatus(u).pipe(Z((function(e){return oc(sk(e.userInfos,"account"),(function(e){return!!e.ts}))}))).subscribe((function(e){e=oc(e,(function(e,t){return e=e?S.PeerOnlineState.ONLINE:S.PeerOnlineState.OFFLINE,v.subscribedPeerStatusCache[t]=e})),v.emit("PeersOnlineStatusChanged",e)})),0===a.length){e.next=36;break}throw new ca("Subscription failed",Fq);case 36:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unsubscribePeersOnlineStatus",value:function(){var e=K(w.mark((function e(t){var n,r,i,o,s;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===Q.CONNECTED){e.next=2;break}throw new H("The client is not logged in",Kk);case 2:if(void 0!==this.session){e.next=4;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 4:if(Array.isArray(t)&&0!==t.length){e.next=6;break}throw new L("Invalid arguments: peerIds",Vf);case 6:n=0;case 7:if(!(n<t.length)){e.next=14;break}if(ua(r=t[n])){e.next=11;break}throw new L(["subscribePeersOnlineStatus peer id %s is invalid",r],Vf);case 11:n++,e.next=7;break;case 14:if(!(512<t.length)){e.next=16;break}throw new gb("Unsubscribed peers overflows",Gq);case 16:for(i=t&&t.length?fk(t):[],this.session.requestUnsubscribePeersOnlineStatus(i),o=0;o<i.length;o++)s=i[o],delete this.subscribedPeerStatusCache[s];case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryPeersBySubscriptionOption",value:function(){var e=K(w.mark((function e(t){return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.connectionState===Q.CONNECTED){e.next=2;break}throw new H("The client is not logged in",Kk);case 2:if(t!==S.PeerSubscriptionOption.ONLINE_STATUS){e.next=4;break}return e.abrupt("return",Object.keys(this.subscribedPeerStatusCache));case 4:throw new L("Subscription option not supported",Vf);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createMessage",value:function(e){return"IMAGE"===e.messageType?Ja({width:0,height:0,fileName:"",description:"",thumbnail:new Blob,thumbnailWidth:0,thumbnailHeight:0,size:0},e):"FILE"===e.messageType?Ja({fileName:"",description:"",thumbnail:new Blob,size:0},e):e}},{key:"downloadMedia",value:function(){var e=K(w.mark((function e(t){var n,r,i,o,s,a,u,c,l,f,h,p,d,v,b=this,g=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=1<g.length&&void 0!==g[1]?g[1]:{},"string"==typeof t){e.next=3;break}throw new L("invalid mediaId format",Lk);case 3:if(e.prev=3,r=t.split("z"),i=pa(r,3),o=i[0],s=i[1],a=i[2],u=o.slice(1,65),c=tC(u),l=parseInt(o.slice(65),10),f=parseInt(s,10),h=parseInt(a,10),!(Number.isNaN(l)||Number.isNaN(f)||Number.isNaN(h))){e.next=12;break}throw new L("Invalid mediaId content",Lk);case 12:e.next=19;break;case 14:if(e.prev=14,e.t0=e.catch(3),!wa(e.t0)){e.next=18;break}throw e.t0;case 18:throw new L("parse mediaId failure",{code:Lk,originalError:e.t0});case 19:if(this.connectionState===Q.CONNECTED){e.next=21;break}throw new H("The client is not logged in, cannot download",aA);case 21:if(void 0!==this.session){e.next=23;break}throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});case 23:return p=this.mediaTaskManager.addDownloadTask({unit:f,zone:l,hashHexStr:u,size:h},(function(){if(void 0===b.session)throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});return b.session.requestFileDownloadIndexGet({hash:c,zone:l,unit:f,size:h}).toPromise()}),n),e.next=26,this.mediaTaskManager.waitMediaTask(p);case 26:return d=e.sent,v=d.payload,e.abrupt("return",v);case 29:case"end":return e.stop()}}),e,this,[[3,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"createMediaMessageByUploading",value:function(){var e=K(w.mark((function e(t){var n,r,i,o,s,a,u,c,l,f,h,p,d,v,b,g,y,E,m,_,O,I,k,A,T=this,R=arguments;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=1<R.length&&void 0!==R[1]?R[1]:{},r=2<R.length&&void 0!==R[2]?R[2]:{},md(n)){e.next=4;break}throw new L("Invalid params",jf);case 4:if(i="thumbnailWidth"in n||"thumbnailHeight"in n||"width"in n||"height"in n,o=n.messageType,s=void 0===o?i?"IMAGE":"FILE":o,a=n.description,u=void 0===a?"":a,c=n.fileName,l=void 0===c?"":c,f=n.thumbnail,"string"==typeof n.messageType&&"string"==typeof u&&"string"==typeof l&&(um(f)||void 0===f)&&um(t)){e.next=8;break}throw new L("Invalid message params type",jf);case 8:if(!i||"FILE"!==s){e.next=10;break}throw new L("Invalid message params, unexpected field in RtmFileMessage",jf);case 10:if(!(33554432<(h=t.size))){e.next=13;break}throw new gb("The payload size overflow 32 MB",Vz);case 13:return e.next=15,wi(t);case 15:return p=e.sent,e.next=18,sC(p);case 18:if(d=e.sent,this.connectionState===Q.CONNECTED){e.next=21;break}throw new H("The client is not logged in",Xz);case 21:if("IMAGE"!==s){e.next=29;break}return e.next=24,st(n,p);case 24:v=e.sent,b=v.height,g=v.width,y=v.thumbnailWidth,E=v.thumbnailHeight;case 29:return m=this.mediaTaskManager.addUploadTask({file:new Uint8Array(p),hash:d},(function(){if(void 0===T.session)throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});return T.session.fetchFileUploadIndexGet({hash:d,size:h})}),(function(e,t){if(void 0===T.session)throw new Ca({SESSION_NOT_FOUND:"Failed to get session of the client"});return T.session.requestFileUploadIndexSet({hash:d,unit:e,servers:t}).toPromise()}),r),e.next=32,this.mediaTaskManager.waitMediaTask(m);case 32:if(_=e.sent,O=_.zone,I=_.retUnit,"IMAGE"!==s){e.next=38;break}return k={height:b,width:g,fileName:l,size:h,description:u,thumbnail:f,messageType:s,thumbnailWidth:y,thumbnailHeight:E,mediaId:"0".concat(tr(d)).concat(O,"z").concat(I,"z").concat(h,"z").concat(b,"z").concat(g)},e.abrupt("return",k);case 38:return A={fileName:l,size:h,description:u,mediaId:"0".concat(tr(d)).concat(O,"z").concat(I,"z").concat(h),thumbnail:f,messageType:s},e.abrupt("return",A);case 40:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loginImpl",value:function(){var e=K(w.mark((function e(t){var n,r,i,o,s=this;return w.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.uid,r=t.instanceId,!(void 0!==this.lastLoginTime&&500>Date.now()-this.lastLoginTime)){e.next=4;break}throw new LB(["The frequency of login exceeded the limit of %d queries per second",2],Lz);case 4:if(this.connectionState===Q.DISCONNECTED){e.next=6;break}throw new H("The SDK is either logging in or has logged in the Agora RTM system",Jz);case 6:e.prev=6,this.context.uid=n,e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(6),new L(["The %s in the arguments is invalid",Object.keys({uid:n})[0]],th);case 13:return this.onConnectionStateChanged(Q.CONNECTING,Cb.LOGIN),this.session=i=new Fr(this.context,new sr(this.context,this.logger,!1),r,this.logger),o=function(){s.connectionState===Q.CONNECTED&&(s.onConnectionStateChanged(Q.RECONNECTING,Cb.INTERRUPTED),s.session)&&s.session.once("userJoined",(function(){s.onConnectionStateChanged(Q.CONNECTED,Cb.LOGIN_SUCCESS)}))},i.on("connectionLost",o),i.on("tokenExpired",(function(){s.emit("TokenExpired")})),i.once("userDrop",this.userDropHandler),this.session.on("peerTextMessage",(function(e){s.emit("MessageFromPeer",{text:e.text,messageType:S.MessageType.TEXT},e.peerId,e.properties)})),this.session.on("peerMediaMessage",(function(e){var t=e.peerId,n=e.properties,r=e.messageType;e=e.details,"FILE"===r?s.emit("MessageFromPeer",{messageType:S.MessageType.FILE,size:parseInt(na(e.media_size),10),description:na(e.media_description),fileName:na(e.media_filename),mediaId:na(e.media_id),thumbnail:new Blob([e.media_thumbnail])},t,n):"IMAGE"===r&&s.emit("MessageFromPeer",{messageType:S.MessageType.IMAGE,size:parseInt(na(e.media_size),10),description:na(e.media_description),fileName:na(e.media_filename),mediaId:na(e.media_id),thumbnail:new Blob([e.media_thumbnail]),height:parseInt(na(e.media_height),10),width:parseInt(na(e.media_width),10),thumbnailHeight:parseInt(na(e.media_thumbnailheight),10),thumbnailWidth:parseInt(na(e.media_thumbnailwidth),10)},t,n)})),this.session.on("peerRawMessage",(function(e){s.emit("MessageFromPeer",{rawMessage:e.raw,description:e.desc,messageType:S.MessageType.RAW},e.peerId,e.properties)})),i.on("instanceChanged",(function(e){return r=e})),i.on("peerOnlineStatusChanged",(function(e){var t=e.instance.toString()+e.state,n=s.peerStatusSeqLru.get(t);!n||e.seq.greaterThan(n)?(s.peerStatusSeqLru.set(t,e.seq),e.state!==s.subscribedPeerStatusCache[e.peerId]?s.emit("PeersOnlineStatusChanged",m({},e.peerId,e.state)):s.log("peer status for %s not changed, previous %s",e.peerId,e.state),s.subscribedPeerStatusCache[e.peerId]=e.state,clearTimeout(s.peerUnreachableTimers[t]),e.state===S.PeerOnlineState.UNREACHABLE&&(s.peerUnreachableTimers[t]=setTimeout((function(){s.subscribedPeerStatusCache[e.peerId]===S.PeerOnlineState.UNREACHABLE&&(s.subscribedPeerStatusCache[e.peerId]=S.PeerOnlineState.ONLINE,s.emit("PeersOnlineStatusChanged",m({},e.peerId,S.PeerOnlineState.ONLINE)))}),3e4))):s.log("peerOnlineStatusChanged dedup for %s, %d",t,e.seq.toNumber())})),i.on("invitationMessage",this.invitationManager.invitationMessageHandler.bind(this.invitationManager)),i.on("channelAttributesUpdated",(function(e){var t=e.channelId;e=e.attributeMaps;for(var n={},r=0;r<e.length;r++){var i=e[r],o=i.key,a=i.ms,u=i.value;if(i=i.origin,"string"!=typeof o||!U.isLong(a)||"string"!=typeof u||!ua(i))break;n[o]=new Blob([u]).size}s.channelAttributesCacheLru.set(t,n)})),i.on("userJoined",(function(e){if(0!==Object.keys(s.attributes).length){if(void 0===s.session)return;s.session.requestSetLocalUserAttributes(s.attributes,e).toPromise()}if(0!==s.attributeDrafts.size)for(var t=function(t,n){var r=(t=n[t]).attribute;t.promise.then((function(){void 0!==s.session&&s.session.requestSetLocalUserAttributes(r,e).toPromise()}))},n=0,r=Array.from(s.attributeDrafts);n<r.length;n++)t(n,r);0!==Object.keys(s.subscribedPeerStatusCache).length&&i.requestSubscribePeersOnlineStatus(Object.keys(s.subscribedPeerStatusCache))})),this.lastLoginTime=Date.now(),e.prev=29,e.next=32,i.loginHandler().toPromise();case 32:this.mediaTaskManager.setAuthInfo({ticket:i.connection.curOpenSockets.filter((function(e){return void 0!==e}))[0].ticket,instance:i.instanceId,isAreaCN:"CN"===this.context.area,loginOpt:i.userJoinOptions.toLong()}),e.next=44;break;case 35:if(e.prev=35,e.t1=e.catch(29),!Na(e.t1)){e.next=40;break}throw this.onConnectionStateChanged(Q.DISCONNECTED,Cb.LOGIN_TIMEOUT),new bb(Md(this.name,"login",1e4),Kz);case 40:if(this.onConnectionStateChanged(Q.DISCONNECTED,Cb.LOGIN_FAILURE),!wa(e.t1)){e.next=43;break}throw e.t1;case 43:throw new ca("Login failure",{code:yq,originalError:e.t1});case 44:this.onConnectionStateChanged(Q.CONNECTED,Cb.LOGIN_SUCCESS);case 45:case"end":return e.stop()}}),e,this,[[6,10],[29,35]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onConnectionStateChanged",value:function(e,t){var n,r,i=this;e===Q.RECONNECTING&&(this.reconnId+=1),cb("ConnectionStateChange",{elapse:db(this.session&&this.session.startTime),lts:U.fromNumber(Date.now()),newState:Lr[e],oldState:Lr[this.connectionState],reason:FC[t],sid:Sa(this.session&&this.session.instanceId||U.fromNumber(0)),userId:this.context.uid,reconnId:this.reconnId},null===(n=this.context.areaConfig)||void 0===n?void 0:n.EVENT_REPORT_DOMAIN[0],null===(r=this.context.areaConfig)||void 0===r?void 0:r.EVENT_REPORT_BACKUP_DOMAIN[0]),this.connectionState===Q.RECONNECTING&&e===Q.CONNECTED&&(0!==Object.keys(this.subscribedPeerStatusCache).length&&void 0!==this.session&&this.session.requestPeersOnlineStatus(Object.keys(this.subscribedPeerStatusCache)).pipe(Z((function(e){return oc(sk(e.userInfos,"account"),(function(e){return!!e.ts}))}))).subscribe((function(e){e=oc(e,(function(e,t){return e=e?S.PeerOnlineState.ONLINE:S.PeerOnlineState.OFFLINE,i.subscribedPeerStatusCache[t]=e})),i.emit("PeersOnlineStatusChanged",e)})),this.internalEmitter.emit("RECONNECTED")),this.connectionState=e,e!==Q.ABORTED&&e!==Q.DISCONNECTED||(this.reconnId=0,this.attributes={},this.session&&(this.session.removeAllListeners(),this.session.joinedChannels.clear(),this.session.msgDedupLru.empty(),this.session.dialogueSequenceLru.empty()),this.session=void 0,this.channelAttributesCacheLru.empty(),this.peerStatusSeqLru.empty(),this.peerUnreachableTimers={},this.subscribedPeerStatusCache={},this.attributeDrafts.clear(),this.context.token=void 0),this.mediaTaskManager.emit("connectionStateChanged",e),this.emit("ConnectionStateChanged",e,t)}}]),t}(vb()),C=Kr,da(C.prototype,"renewToken",[ia],Object.getOwnPropertyDescriptor(C.prototype,"renewToken"),C.prototype),da(C.prototype,"queryPeersOnlineStatus",[ia],Object.getOwnPropertyDescriptor(C.prototype,"queryPeersOnlineStatus"),C.prototype),da(C.prototype,"getChannelMemberCount",[ia],Object.getOwnPropertyDescriptor(C.prototype,"getChannelMemberCount"),C.prototype),da(C.prototype,"setLocalUserAttributes",[ia],Object.getOwnPropertyDescriptor(C.prototype,"setLocalUserAttributes"),C.prototype),da(C.prototype,"setChannelAttributes",[ia],Object.getOwnPropertyDescriptor(C.prototype,"setChannelAttributes"),C.prototype),da(C.prototype,"addOrUpdateLocalUserAttributes",[ia],Object.getOwnPropertyDescriptor(C.prototype,"addOrUpdateLocalUserAttributes"),C.prototype),da(C.prototype,"addOrUpdateChannelAttributes",[ia],Object.getOwnPropertyDescriptor(C.prototype,"addOrUpdateChannelAttributes"),C.prototype),da(C.prototype,"deleteLocalUserAttributesByKeys",[ia],Object.getOwnPropertyDescriptor(C.prototype,"deleteLocalUserAttributesByKeys"),C.prototype),da(C.prototype,"deleteChannelAttributesByKeys",[ia],Object.getOwnPropertyDescriptor(C.prototype,"deleteChannelAttributesByKeys"),C.prototype),da(C.prototype,"clearLocalUserAttributes",[ia],Object.getOwnPropertyDescriptor(C.prototype,"clearLocalUserAttributes"),C.prototype),da(C.prototype,"clearChannelAttributes",[ia],Object.getOwnPropertyDescriptor(C.prototype,"clearChannelAttributes"),C.prototype),da(C.prototype,"getUserAttributes",[ia],Object.getOwnPropertyDescriptor(C.prototype,"getUserAttributes"),C.prototype),da(C.prototype,"getChannelAttributes",[ia],Object.getOwnPropertyDescriptor(C.prototype,"getChannelAttributes"),C.prototype),da(C.prototype,"getChannelAttributesByKeys",[ia],Object.getOwnPropertyDescriptor(C.prototype,"getChannelAttributesByKeys"),C.prototype),da(C.prototype,"getUserAttributesByKeys",[ia],Object.getOwnPropertyDescriptor(C.prototype,"getUserAttributesByKeys"),C.prototype),da(C.prototype,"login",[ia],Object.getOwnPropertyDescriptor(C.prototype,"login"),C.prototype),da(C.prototype,"logout",[ia],Object.getOwnPropertyDescriptor(C.prototype,"logout"),C.prototype),da(C.prototype,"logoutSync",[ia],Object.getOwnPropertyDescriptor(C.prototype,"logoutSync"),C.prototype),da(C.prototype,"sendMessageToPeer",[ia],Object.getOwnPropertyDescriptor(C.prototype,"sendMessageToPeer"),C.prototype),da(C.prototype,"createChannel",[ia],Object.getOwnPropertyDescriptor(C.prototype,"createChannel"),C.prototype),da(C.prototype,"createLocalInvitation",[ia],Object.getOwnPropertyDescriptor(C.prototype,"createLocalInvitation"),C.prototype),da(C.prototype,"subscribePeersOnlineStatus",[ia],Object.getOwnPropertyDescriptor(C.prototype,"subscribePeersOnlineStatus"),C.prototype),da(C.prototype,"unsubscribePeersOnlineStatus",[ia],Object.getOwnPropertyDescriptor(C.prototype,"unsubscribePeersOnlineStatus"),C.prototype),da(C.prototype,"queryPeersBySubscriptionOption",[ia],Object.getOwnPropertyDescriptor(C.prototype,"queryPeersBySubscriptionOption"),C.prototype),da(C.prototype,"createMessage",[ia],Object.getOwnPropertyDescriptor(C.prototype,"createMessage"),C.prototype),da(C.prototype,"downloadMedia",[ia],Object.getOwnPropertyDescriptor(C.prototype,"downloadMedia"),C.prototype),da(C.prototype,"createMediaMessageByUploading",[ia],Object.getOwnPropertyDescriptor(C.prototype,"createMediaMessageByUploading"),C.prototype),C),Mr={LOG_FILTER_OFF:{error:!1,warn:!1,info:!1,track:!1,debug:!1},LOG_FILTER_ERROR:{error:!0,warn:!1,info:!1,track:!1,debug:!1},LOG_FILTER_WARNING:{error:!0,warn:!0,info:!1,track:!1,debug:!1},LOG_FILTER_INFO:{error:!0,warn:!0,info:!0,track:!1,debug:!1},LOG_FILTER_DEBUG:{error:!0,warn:!0,info:!0,track:!0,debug:!0}},Nd=Ja(Ja({createInstance:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.enableLogUpload;n=void 0!==n&&n;var r=void 0===(t=t.logFilter)?Mr.LOG_FILTER_INFO:t;if(t=2<arguments.length?arguments[2]:void 0,!/^[\dA-Za-z]{32}$/.test(e))throw new L(["The %s in the arguments is invalid",Object.keys({appId:e})[0]],xz);var i={enableLogUpload:n,logFilter:r};if(null!=t){var o=fC(t);i._areaConfig=o}n=Sk=Ta.__global_unique_id__=(Ta.__global_unique_id__||0)+1,r=TB(i);var s=UB(i),a=VB(i),u=WB(n,i),c=nr(n,i),l=c("RTM:DEBUG","<Entry> ");return r("The Agora RTM Web SDK version is %s","1.4.2"),void 0!==t&&r("RTM areas are set to %s",t.join(", ")),l("Creating an RtmClient instance"),l('The Git commit ID is "'.concat("v1.4.2-0-gcddbca54",'"')),r("The process ID is %s",Sf),r("The build is %s","v1.4.2-0-gcddbca54"),l("NODE_ENV is %s","production"),new GC(e,{genLogger:c,genTracker:u,info:r,warn:s,logError:a,loggerId:n},i,(function(e){for(var t=0,n=Rk(e);t<n.length;t++){var r=n[t];try{var o=e[r];null!=o&&(i[r]=o)}catch(e){throw new L(["The %s in the arguments is invalid",r],void 0)}}}),o)},BUILD:"v1.4.2-0-gcddbca54",VERSION:"1.4.2",END_CALL_PREFIX:"AgoraRTMLegacyEndcallCompatibleMessagePrefix",processId:Sf,ConnectionChangeReason:S.ConnectionChangeReason,ConnectionState:S.ConnectionState,LocalInvitationFailureReason:S.LocalInvitationFailureReason,LocalInvitationState:S.LocalInvitationState,RemoteInvitationFailureReason:S.RemoteInvitationFailureReason,RemoteInvitationState:S.RemoteInvitationState,MessageType:S.MessageType,PeerOnlineState:S.PeerOnlineState,PeerSubscriptionOption:S.PeerSubscriptionOption},Mr),{},{setParameter:function(e,t){Object.keys(dd).includes(e)&&(dd[e]=t)},getParameter:function(e){return dd[e]}});return Nd}));
