
module.exports = function(RED) {
    function AgoraDownstreamFilterNode(config) {
        RED.nodes.createNode(this,config);
        var node = this;

        node.on("input", function(msg, send, done){
            gMsg = getGlobalMsg(msg);
            if (!gMsg.payload.downstreamFilter){
                gMsg.payload.downstreamFilter = []
            }
            gMsg.payload.downstreamFilter.push({
                uidList: config.uidList,
            })
            send(msg);
        });
    }
    RED.nodes.registerType("agora-downstream-filter", AgoraDownstreamFilterNode);
}