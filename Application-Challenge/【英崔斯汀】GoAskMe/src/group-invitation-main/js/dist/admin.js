module.exports=function(t){var n={};function e(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return t[a].call(o.exports,o,o.exports,e),o.l=!0,o.exports}return e.m=t,e.c=n,e.d=function(t,n,a){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:a})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(e.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)e.d(a,o,function(n){return t[n]}.bind(null,o));return a},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="",e(e.s=15)}([function(t,n){t.exports=flarum.core.compat.app},function(t,n){t.exports=flarum.core.compat.Model},function(t,n,e){"use strict";function a(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n}e.d(n,"a",(function(){return a}))},function(t,n){t.exports=flarum.core.compat["components/Button"]},function(t,n){t.exports=flarum.core.compat.extend},function(t,n){t.exports=flarum.core.compat["components/LoadingIndicator"]},function(t,n){t.exports=flarum.core.compat["components/GroupBadge"]},function(t,n,e){"use strict";function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}e.d(n,"a",(function(){return s}));var o=e(2);function r(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var i=e(1),u=e.n(i),s=function(t){function n(){for(var n,e=arguments.length,o=new Array(e),i=0;i<e;i++)o[i]=arguments[i];return r(a(n=t.call.apply(t,[this].concat(o))||this),"code",u.a.attribute("code")),r(a(n),"hasUsagesLeft",u.a.attribute("hasUsagesLeft")),r(a(n),"canUse",u.a.attribute("canUse")),r(a(n),"usageCount",u.a.attribute("usageCount")),r(a(n),"inviter",u.a.attribute("inviter")),r(a(n),"maxUsage",u.a.attribute("maxUsage")),r(a(n),"createdAt",u.a.attribute("createdAt",u.a.transformDate)),r(a(n),"group",u.a.hasOne("group")),n}return Object(o.a)(n,t),n.prototype.apiEndpoint=function(){return"/group-invitations"+(this.exists?"/"+this.data.id:"")},n}(u.a)},function(t,n){t.exports=flarum.core.compat["models/Group"]},,,,function(t,n){t.exports=flarum.core.compat["components/PermissionGrid"]},function(t,n){t.exports=flarum.core.compat["components/Modal"]},function(t,n){t.exports=flarum.core.compat["helpers/icon"]},function(t,n,e){"use strict";e.r(n);var a=e(4),o=e(0),r=e.n(o),i=e(12),u=e.n(i),s=e(2),l=e(13),c=e.n(l),p=e(3),d=e.n(p),f=e(6),g=e.n(f),v=e(5),h=e.n(v),b=e(8),w=e.n(b),x=e(14),y=e.n(x),I=function(){function t(){}return t.prototype.view=function(t){var n=t.attrs,e=n.onchange,a=n.value;return m("span.Select",[m("select.Select-input.FormControl",{onchange:function(t){e(t.target.value)},value:a},[m("option",{value:"",disabled:!0,hidden:!0},r.a.translator.trans("clarkwinkelmann-group-invitation.admin.settings.placeholder.group")),r.a.store.all("groups").filter((function(t){return-1===[w.a.GUEST_ID,w.a.MEMBER_ID].indexOf(t.id())})).map((function(t){return m("option",{value:t.id()},t.namePlural())}))]),y()("fas fa-sort",{className:"Select-caret"})])},t}(),k="clarkwinkelmann-group-invitation.admin.settings.",U=function(t){function n(){return t.apply(this,arguments)||this}Object(s.a)(n,t);var e=n.prototype;return e.className=function(){return"GroupInvitationSettingsModal Modal--large"},e.title=function(){return r.a.translator.trans(k+"title")},e.oninit=function(n){var e=this;t.prototype.oninit.call(this,n),this.invitations=null,r.a.store.find("group-invitations").then((function(t){e.invitations=t,m.redraw()})),this.loading=!1,this.newInvitationGroupId="",this.newInvitationMaxUsage="",this.newInviter=""},e.content=function(){var t=this;return m(".Modal-body",[m("table",[m("thead",m("tr",[m("th",r.a.translator.trans(k+"head.code")),m("th",r.a.translator.trans(k+"head.group")),m("th",r.a.translator.trans(k+"head.usage")),m("th",r.a.translator.trans(k+"head.inviter")),m("th")])),m("tbody",[null===this.invitations?m("tr",m("td",h.a.component())):[this.invitations.map((function(n,e){return m("tr",[m("td",m("a",{href:r.a.forum.attribute("baseUrl")+"/get-role/"+n.code(),target:"_blank"},m("code",n.code()))),m("td",[g.a.component({group:n.group()})," ",n.group().namePlural()]),m("td",n.usageCount()+"/"+(null===n.maxUsage()?r.a.translator.trans(k+"unlimited"):n.maxUsage())),m("td",null===n.inviter()?r.a.translator.trans(k+"unlimited"):n.inviter()),m("td",d.a.component({className:"Button Button--danger",onclick:function(){t.loading=!0,n.delete().then((function(){t.loading=!1,t.invitations.splice(e,1),m.redraw()})).catch((function(n){throw t.loading=!1,m.redraw(),n}))},loading:t.loading},r.a.translator.trans(k+"delete")))])})),0===this.invitations.length?m("tr.NoResultRow",m("td",{colspan:5},m("em",r.a.translator.trans(k+"empty")))):null],m("tr",[m("td",m("em",r.a.translator.trans(k+"placeholder.code"))),m("td",m(I,{onchange:function(n){t.newInvitationGroupId=n},value:this.newInvitationGroupId})),m("td",m("input.FormControl",{type:"number",min:"0",onchange:function(n){var e=n.target.value;t.newInvitationMaxUsage="0"===e?"":e},value:this.newInvitationMaxUsage,placeholder:r.a.translator.trans(k+"placeholder.usage")})),m("td",m("input.FormControl",{type:"text",onchange:function(n){var e=n.target.value;console.log(e),t.newInviter=e},value:this.newInviter,placeholder:r.a.translator.trans(k+"placeholder.inviter")})),m("td",d.a.component({className:"Button Button--primary",onclick:function(){t.loading=!0,r.a.request({method:"POST",url:r.a.forum.attribute("apiUrl")+"/group-invitations",body:{groupId:t.newInvitationGroupId,maxUsage:t.newInvitationMaxUsage,inviter:t.newInviter}}).then((function(n){t.loading=!1,t.invitations.push(r.a.store.pushPayload(n)),t.newInvitationGroupId="",t.newInvitationMaxUsage="",t.newInviter="",m.redraw()})).catch((function(n){throw t.loading=!1,m.redraw(),n}))},loading:this.loading,disabled:!this.newInvitationGroupId},r.a.translator.trans(k+"create")))])])])])},n}(c.a),M=e(7);r.a.initializers.add("clarkwinkelmann-group-invitation",(function(){r.a.extensionSettings["clarkwinkelmann-group-invitation"]=function(){return r.a.modal.show(U)},r.a.store.models["group-invitations"]=M.a,Object(a.extend)(u.a.prototype,"startItems",(function(t){t.add("clarkwinkelmann-group-invitation-use",{icon:"fas fa-certificate",label:r.a.translator.trans("clarkwinkelmann-group-invitation.admin.permissions.use"),permission:"clarkwinkelmann-group-invitation.use"})}))}))}]);
//# sourceMappingURL=admin.js.map